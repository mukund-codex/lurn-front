(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{EoDo:function(e,t,n){"use strict";n.r(t),n.d(t,"ModuleFormbuildersModule",(function(){return Ee}));var a=n("ofXK"),s=n("1kSV"),o=n("tyNb"),l=n("fXoL"),r=n("G5QB"),i=n("tk/3"),c=n("hHWK");let d=(()=>{class e extends r.a{constructor(e,t){super("form_secondary",e),this.http=e,this.campaignService=t}getCampaignData(e){return this.campaignService.getAll({id:e})}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](i.b),l["\u0275\u0275inject"](c.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n("5eHb"),u=n("5Lta"),m=n("3Pt+"),h=n("utbL");const f=["searchForm"];function g(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275element"](1,"app-actionbtns",17),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("addRedirect","/module-formbuilders/add")("showExport",!1)("showImport",!1))}function b(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275template"](1,g,2,3,"div",7),l["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data.length)}}function v(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e.message.text)}}function y(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2,"No Records Found!"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275attribute"]("colSpan",7))}function x(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1,","),l["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1),l["\u0275\u0275template"](2,x,2,0,"span",7),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.index,a=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.label," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n!=a.form.length-1)}}const k=function(e){return[e]},q=function(e,t){return{campaign_id:e,module_id:t}};function C(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275elementStart"](2,"a",19),l["\u0275\u0275element"](3,"i",20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"th",21),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"td"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"td"),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"td"),l["\u0275\u0275template"](11,w,3,2,"ng-container",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,a=l["\u0275\u0275nextContext"]().ngIf,s=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](6,k,"/module-formbuilder/edit/"+e.id))("queryParams",l["\u0275\u0275pureFunction2"](8,q,s.campaign_id,s.module_id)),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",(a.meta.pagination.current_page-1)*a.meta.pagination.per_page+n+1," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.module.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",e.form)}}function E(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,y,3,1,"tr",7),l["\u0275\u0275template"](2,C,12,11,"tr",18),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",e.data)}}function S(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"ngb-pagination",22),l["\u0275\u0275listener"]("pageChange",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().pageChange(t)}))("pageChange",(function(n){return l["\u0275\u0275restoreView"](e),t.ngIf.meta.pagination.current_page=n})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",e.meta.pagination.total)("pageSize",e.meta.pagination.per_page)("page",e.meta.pagination.current_page)}}function O(e,t){1&e&&l["\u0275\u0275text"](0,"Loading Form Builder Data")}let N=(()=>{class e{constructor(e,t,n,a,s){this.formbuildersMasterService=e,this.router=t,this.activeRoute=n,this.toasterService=a,this.cs=s,this.searchObj={},this.parameters={},this.isCollapsed=!0}getCurrentCampaign(){return this.cs.getCampaignId()}ngOnInit(){this.activeRoute.queryParams.subscribe(e=>{this.module_id=e.module_id}),this.campaign_id=this.getCurrentCampaign(),this.campaign_id&&(this.parameters.campaign=this.campaign_id,this.searchObj.campaign_id=this.campaign_id,this.searchObj.module_id=this.module_id),this.activeRoute.queryParams.subscribe(e=>{const t=Object.assign(this.searchObj,e);this.formbuildersData=this.formbuildersMasterService.getAll(t),this.parameters=e})}add(){this.router.navigate(["module-formbuilders/add"])}pageChange(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id,module_id:this.module_id},queryParamsHandling:"merge"})}delete(e){if(confirm("Are you sure you want to delete Formbuilder?")){const t=new FormData;this.formbuildersMasterService.delete(t,e).subscribe(e=>{this.toasterService.success("Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),this.search()})}}search(){this.searchObj=Object.assign(this.name?{name:this.name}:{},this.campaign_name?{campaign_name:this.campaign_name}:{},this.company_name?{company_name:this.company_name}:{},this.parameters),this.formbuildersData=this.formbuildersMasterService.getAll(this.searchObj)}changeCampaign(e){this.cs.setCampaignId(e.id),this.parameters.campaign_id=this.campaign_id,this.sf.form.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d),l["\u0275\u0275directiveInject"](o.c),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](p.b),l["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-module-formbuilders-master"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275viewQuery"](f,!0),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.sf=n.first)},decls:37,vars:11,consts:[[3,"changeCampaign"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[4,"ngIf"],[1,"clearfix"],[1,"card-body",2,"margin-top","60px"],[1,"card-block"],[1,"table-responsive"],["name","searchForm",1,"table-responsive"],["searchForm","ngForm"],[1,"table","table-bordered","table-condensed"],[4,"ngIf","ngIfElse"],["loading",""],[3,"addRedirect","showExport","showImport"],[4,"ngFor","ngForOf"],[1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"routerLink","queryParams"],[1,"ft-edit-2","info","font-medium-1","mr-2"],["scope","row"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"app-topbar",0),l["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](1,"section",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"h4",6),l["\u0275\u0275text"](7,"Doctor Form Builder"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,b,2,1,"div",7),l["\u0275\u0275pipe"](9,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](10,"div",8),l["\u0275\u0275elementStart"](11,"div",9),l["\u0275\u0275template"](12,v,2,1,"p",7),l["\u0275\u0275elementStart"](13,"div",10),l["\u0275\u0275elementStart"](14,"div",11),l["\u0275\u0275elementStart"](15,"form",12,13),l["\u0275\u0275elementStart"](17,"table",14),l["\u0275\u0275elementStart"](18,"thead"),l["\u0275\u0275elementStart"](19,"tr"),l["\u0275\u0275elementStart"](20,"th"),l["\u0275\u0275text"](21,"Action"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"th"),l["\u0275\u0275text"](23,"Sr. No"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"th"),l["\u0275\u0275text"](25,"Module Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"th"),l["\u0275\u0275text"](27,"Form Builder Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"th"),l["\u0275\u0275text"](29,"Form Data"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"tbody"),l["\u0275\u0275template"](31,E,3,2,"ng-container",15),l["\u0275\u0275pipe"](32,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](33,S,2,5,"div",7),l["\u0275\u0275pipe"](34,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](35,O,1,0,"ng-template",null,16,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275reference"](36);l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](9,5,t.formbuildersData)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.message),l["\u0275\u0275advance"](19),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](32,7,t.formbuildersData))("ngIfElse",e),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](34,9,t.formbuildersData))}},directives:[u.a,a.n,m.D,m.r,m.s,h.a,a.m,o.f,s.l],pipes:[a.b],styles:[""]}),e})();var A=n("mrSG");const j={controlPosition:"right",append:!1,actionButtons:[],controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","number","radio-group","select","text","textarea"],dataType:"json",disableFields:[],disabledAttrs:[],disabledActionButtons:[],editOnAdd:!1,defaultFields:[],fields:[],fieldRemoveWarn:!1,inputSets:[],roles:{1:"Administrator"},notify:{error:e=>console.error(e),success:e=>console.log(e),warning:e=>console.warn(e)},onSave:(e,t)=>null,onClearAll:()=>null,prepend:!1,sortableControls:!1,stickyControls:{enable:!0,offset:{top:5,bottom:"auto",right:"auto"}},templates:{},showActionButtons:!0,typeUserDisabledAttrs:{},typeUserAttrs:{},typeUserEvents:{},prefix:"form-builder-"},I={btn:["default","danger","info","primary","success","warning"]},M={location:"https://formbuilder.online/assets/lang/",langs:["en-US"],preloaded:{"en-US":{addOption:"Add Option +",allFieldsRemoved:"All fields were removed.",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clear:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",copyButton:"&#43;",copyButtonTooltip:"Copy",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",inline:"Inline",inlineDesc:"Display {type} inline",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",minSelectionRequired:"Minimum {min} selections required",multipleFiles:"Multiple Files",name:"Name",no:"No",noFieldsToClear:"There are no fields to clear",number:"Number",off:"Off",on:"On",option:"Option",options:"Options",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder","placeholder.value":"Value","placeholder.label":"Label","placeholder.text":"","placeholder.textarea":"","placeholder.email":"Enter you email","placeholder.placeholder":"","placeholder.className":"space separated classes","placeholder.password":"Enter your password",preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",removeOption:"Remove Option",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",rows:"Rows",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size","size.xs":"Extra Small","size.sm":"Small","size.m":"Default","size.lg":"Large",style:"Style","styles.btn.default":"Default","styles.btn.danger":"Danger","styles.btn.info":"Info","styles.btn.primary":"Primary","styles.btn.success":"Success","styles.btn.warning":"Warning",subtype:"Type",text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:"Yes"}}},D={};n("c/YC");const F={},L={text:["text","password","email","color","tel"],header:["h1","h2","h3"],button:["button","submit","reset"],paragraph:["p","address","blockquote","canvas","output"],textarea:["textarea","quill"]},_=e=>{e.parentNode&&e.parentNode.removeChild(e)},T=e=>{for(;e.firstChild;)e.removeChild(e.firstChild);return e},R=(e,t,n=!0)=>{let a=[],s=["none","block"];n&&(s=s.reverse());for(let o=e.length-1;o>=0;o--)-1!==e[o].textContent.toLowerCase().indexOf(t.toLowerCase())?(e[o].style.display=s[0],a.push(e[o])):e[o].style.display=s[1];return a},P=["select","checkbox-group","checkbox","radio-group","autocomplete"],B=new RegExp(`(${P.join("|")})`);class H{constructor(e){return this.optionFields=P,this.optionFieldsRegEx=B,this.subtypes=L,this.empty=T,this.filter=R,F[e]=this,F[e]}}const U={};class z{constructor(e){this.formData={},this.formID=e,this.layout="",U[e]=this}}window.fbLoaded={js:[],css:[]},window.fbEditors={quill:{},tinymce:{}};const V={inArray:(e,t)=>-1!==t.indexOf(e),trimObj(e){let t=[null,void 0,"",!1,"false"];for(let n in e)V.inArray(e[n],t)?delete e[n]:Array.isArray(e[n])&&(e[n].length||delete e[n]);return e},validAttr:e=>!V.inArray(e,["values","enableOther","other","label","subtype"]),attrString(e){let t=[];for(let n in e)if(e.hasOwnProperty(n)&&V.validAttr(n)){let a=V.safeAttr(n,e[n]);t.push(a.name+a.value)}return t.join(" ")},safeAttr(e,t){let n;return e=V.safeAttrName(e),t&&(Array.isArray(t)?n=V.escapeAttr(t.join(" ")):("boolean"==typeof t&&(t=t.toString()),n=V.escapeAttr(t.replace(","," ").trim()))),{name:e,value:t=t?`="${n}"`:""}},safeAttrName:e=>({className:"class"}[e]||V.hyphenCase(e)),hyphenCase:e=>(e=(e=e.replace(/[^\w\s\-]/gi,"")).replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))).replace(/\s/g,"-").replace(/^-+/g,""),camelCase:e=>e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),contentType(e){let t=typeof e;return e instanceof Node||e instanceof HTMLElement?t="node":Array.isArray(e)&&(t="array"),t},bindEvents(e,t){if(t)for(let n in t)t.hasOwnProperty(n)&&e.addEventListener(n,e=>t[n](e))},nameAttr(e){let t=(new Date).getTime();return(e.type||V.hyphenCase(e.label))+"-"+t},markup(e,t="",n={}){function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var s=V.contentType(t),o=n.events,l=a(n,["events"]),r=document.createElement(e),i={string:function(e){r.innerHTML+=e},object:function(e){var t=e.tag,n=e.content,s=a(e,["tag","content"]);return r.appendChild(V.markup(t,n,s))},node:function(e){return r.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)s=V.contentType(e[t]),i[s](e[t])},function:function(e){e=e(),s=V.contentType(e),i[s](e)},undefined:function(){}};for(var c in l)if(l.hasOwnProperty(c)){var d=V.safeAttrName(c);r.setAttribute(d,l[c])}return t&&i[s].call(this,t),V.bindEvents(r,o),r},parseAttrs(e){const t=e.attributes,n={};return this.forEach(t,e=>{let a=t[e].value||"";a.match(/false|true/g)?a="true"===a:a.match(/undefined/g)&&(a=void 0),a&&(n[t[e].name]=a)}),n},parseOptions(e){let t={};const n=[];for(let a=0;a<e.length;a++)t=V.parseAttrs(e[a]),t.label=e[a].textContent,n.push(t);return n},parseXML(e){const t=(new window.DOMParser).parseFromString(e,"text/xml"),n=[];if(t){const e=t.getElementsByTagName("field");for(let t=0;t<e.length;t++){const a=V.parseAttrs(e[t]),s=e[t].getElementsByTagName("option");s&&s.length&&(a.values=V.parseOptions(s)),n.push(a)}}return n},parsedHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.textContent},escapeHtml(e){const t=document.createElement("textarea");return t.textContent=e,t.innerHTML},escapeAttr(e){const t={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof e?e.replace(/["&<>]/g,e=>t[e]||e):e},escapeAttrs(e){for(const t in e)e.hasOwnProperty(t)&&(e[t]=V.escapeAttr(e[t]));return e},forEach(e,t,n=null){for(let a=0;a<e.length;a++)t.call(n,a,e[a])},unique:e=>e.filter((e,t,n)=>n.indexOf(e)===t),remove(e,t){const n=t.indexOf(e);n>-1&&t.splice(n,1)},getScripts(e,t=null){let n=[];return Array.isArray(e)||(e=[e]),this.isCached(e)||(n=$.map(e,e=>$.ajax({dataType:"script",cache:!0,url:(t||"")+e}).done(()=>window.fbLoaded.js.push(e)))),n.push($.Deferred(e=>$(e.resolve))),$.when(...n)},isCached(e,t="js"){let n=!1;const a=window.fbLoaded[t];return n=Array.isArray(e)?e.every(e=>V.inArray(e,a)):V.inArray(e,a),n},getStyles(e,t=null){Array.isArray(e)||(e=[e]),e.forEach(e=>{let n="href",a=e,s="";if("object"==typeof e&&(n=e.type||(e.style?"inline":"href"),s=e.id,e="inline"===n?e.style:e.href,a=s||e.href||e.style),!V.isCached(a,"css")){if("href"===n){const n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=(t||"")+e,document.head.appendChild(n)}else $(`<style type="text/css">${e}</style>`).attr("id",s).appendTo($(document.head));window.fbLoaded.css.push(a)}})},capitalize:e=>e.replace(/\b\w/g,(function(e){return e.toUpperCase()})),merge(e,t){const n=Object.assign({},e,t);for(const a in t)n.hasOwnProperty(a)&&(n[a]=Array.isArray(t[a])?Array.isArray(e[a])?V.unique(e[a].concat(t[a])):t[a]:"object"==typeof t[a]?V.merge(e[a],t[a]):t[a]);return n},addEventListeners:(e,t,n)=>t.split(" ").forEach(t=>e.addEventListener(t,n,!1)),closest(e,t){const n=t.replace(".","");for(;(e=e.parentElement)&&!e.classList.contains(n););return e},noop:()=>null,debounce(e,t=250,n=!1){let a;return function(...s){const o=this,l=n&&!a;clearTimeout(a),a=setTimeout((function(){a=null,n||e.apply(o,s)}),t),l&&e.apply(o,s)}},mobileClass(){let e="";var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=" fb-mobile"),e},makeClassName:e=>V.hyphenCase(e.replace(/[^\w\s\-]/gi,"")),safename:e=>e.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\[\]\_-]/g,"").toLowerCase(),forceNumber:e=>e.replace(/[^0-9]/g,"")};var W=V;function X(e){let t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),t}var J={loaded:X("loaded"),viewData:X("viewData"),userDeclined:X("userDeclined"),modalClosed:X("modalClosed"),modalOpened:X("modalOpened"),formSaved:X("formSaved"),fieldAdded:X("fieldAdded"),fieldRemoved:X("fieldRemoved"),fieldRendered:X("fieldRendered")};class Y{constructor(e,t){this.preview=t,this.templates={label:null,help:null,default:(e,t,n,a)=>(n&&t.appendChild(n),this.markup("div",[t,e],{className:a.id?`fb-${a.type} form-group field-${a.id}`:""})),noLabel:(e,t,n,a)=>this.markup("div",e,{className:a.id?`fb-${a.type} form-group field-${a.id}`:""}),hidden:(e,t,n,a)=>e},e&&(this.templates=$.extend(this.templates,e)),this.configure()}configure(){}build(e,t,n){this.preview&&(t.name=t.name?t.name+"-preview":W.nameAttr(t)+"-preview"),t.id=t.name,this.data=$.extend({},t);const a=new e(t,this.preview);let s=a.build();"object"==typeof s&&s.field||(s={field:s});const o=this.label(),l=this.help();let r;r=n&&this.isTemplate(n)?n:this.isTemplate(s.layout)?s.layout:"default";const i=this.processTemplate(r,s.field,o,l);return a.on("prerender")(i),i.addEventListener("fieldRendered",a.on("render")),i}label(){const e=[W.parsedHtml(this.data.label||"")];return this.data.required&&e.push(this.markup("span","*",{className:"fb-required"})),this.isTemplate("label")?this.processTemplate("label",e):this.markup("label",e,{for:this.data.id,className:`fb-${this.data.type}-label`})}help(){return this.data.description?this.isTemplate("help")?this.processTemplate("help",this.data.description):this.markup("span","?",{className:"tooltip-element",tooltip:this.data.description}):null}isTemplate(e){return"function"==typeof this.templates[e]}processTemplate(e,...t){let n=this.templates[e](...t,this.data);return n.jquery&&(n=n[0]),n}markup(e,t="",n={}){return W.markup(e,t,n)}}class Q{constructor(e){this.defaultConfig={extension:".lang",location:"assets/lang/",langs:["en-US"],locale:"en-US",preloaded:{}},this.init=e=>(Q.config=Object.assign({},this.defaultConfig,e),Q.langs=Object.assign({},Q.config.preloaded),Q.locale=Q.config.locale||Q.config.langs[0],Q.setCurrent(Q.locale))}static getValue(e){return Q.current&&Q.current[e]||e}static makeSafe(e){const t={"{":"\\{","}":"\\}","|":"\\|"};return e=e.replace(/\{|\}|\|/g,e=>t[e]),new RegExp(e,"g")}static put(e,t){return Q.current[e]=t}static get(e,t=null){let n=Q.getValue(e);const a=n.match(/\{[^\}]+?\}/g);let s;if(t&&a)if("object"==typeof t)for(let o=0;o<a.length;o++)s=a[o].substring(1,a[o].length-1),n=n.replace(Q.makeSafe(a[o]),t[s]||"");else n=n.replace(/\{[^\}]+?\}/g,t);return n}static fromFile(e){const t=e.split("\n"),n={};for(let a,s=0;s<t.length;s++)if(a=t[s].match(/^(.+?) *?= *?([^\n]+)/),a){const e=a[2].replace(/^\s+|\s+$/,"");n[a[1]]=e}return n}static processFile(e){const t=e.replace(/\n\n/g,"\n");return this.fromFile(t)}static loadLang(e){const t=this;return new Promise((function(n,a){if(Q.langs[e])n(Q.langs[e]);else{const s=new XMLHttpRequest;s.open("GET",this.config.location+e+Q.config.extension,!0),s.onload=function(){if(this.status<=304){const a=t.processFile(s.responseText);Q.langs[e]=a,n(a)}else a({status:this.status,statusText:s.statusText})},s.onerror=function(){a({status:this.status,statusText:s.statusText})},s.send()}}))}get getLangs(){return Q.config.langs}static setCurrent(e="en-US"){return Object(A.a)(this,void 0,void 0,(function*(){return yield Q.loadLang(e),Q.locale=e,Q.current=Q.langs[e],Q.current}))}}let G=(()=>{class e{constructor(t,n){this.rawConfig=$.extend({},t),t=$.extend({},t),this.preview=n,delete t.isPreview,this.preview&&delete t.required;const a=["label","description","subtype","required"];for(const e of a)this[e]=t[e],delete t[e];t.id||(t.id=t.name?t.name:"control-"+Math.floor(1e7*Math.random()+1)),this.id=t.id,this.type=t.type,this.description&&(t.title=this.description),e.controlConfig||(e.controlConfig={}),this.classConfig=$.extend({},e.controlConfig[this.subtype?this.type+"."+this.subtype:this.type]||{}),this.subtype&&(t.type=this.subtype),this.required&&(t.required="required",t["aria-required"]="true"),this.config=t,this.configure()}static get definition(){return{}}static register(t,n,a=null){const s=a?a+".":"";e.classRegister||(e.classRegister={}),Array.isArray(t)||(t=[t]);for(const o of t)o.indexOf(".")>-1?e.error(`Ignoring type ${o}. Cannot use the character '.' in a type name.`):e.classRegister[s+o]=n}static getRegistered(t=!1){const n=Object.keys(e.classRegister);return n.length?n.filter(e=>t?e.indexOf(t+".")>-1:-1==e.indexOf(".")):n}static getRegisteredSubtypes(){const t={};for(const n in e.classRegister)if(e.classRegister.hasOwnProperty(n)){const[e,a]=n.split(".");if(!a)continue;t[e]||(t[e]=[]),t[e].push(a)}return t}static getClass(t,n=null){return e.classRegister[n?t+"."+n:t]||e.classRegister[t]||e.error("Invalid control type. (Type: "+t+", Subtype: "+n+"). Please ensure you have registered it, and imported it correctly.")}static loadCustom(t=null){let n=[];if(t&&(n=n.concat(t)),window.fbControls&&(n=n.concat(window.fbControls)),!window.fbControlsLoaded){for(const t of n)t(e,e.classRegister);window.fbControlsLoaded=!0}}static mi18n(e,t=null){const n=this.definition;let a=n.i18n||{};a=a[Q.locale]||a.default||a;const s=this.camelCase(e),o="object"==typeof a?a[s]||a[e]:a;if(o)return o;let l=n.mi18n;return"object"==typeof l&&(l=l[s]||l[e]),l||(l=s),Q.get(l,t)}static active(e){return!Array.isArray(this.definition.inactive)||-1==this.definition.inactive.indexOf(e)}static label(e){return this.mi18n(e)}static icon(e){const t=this.definition;return t&&"object"==typeof t.icon?t.icon[e]:t.icon}configure(){}build(){const e=this.config,{label:t,type:n}=e,a=Object(A.b)(e,["label","type"]);return this.markup(n,W.parsedHtml(t),a)}on(e){const t={prerender:e=>{},render:e=>{const t=()=>{this.onRender&&this.onRender()};this.css&&W.getStyles(this.css),this.js&&!W.isCached(this.js)?W.getScripts(this.js).done(t):t()}};return e?t[e]:t}static error(e){throw new Error(e)}markup(e,t="",n={}){return this.element=W.markup(e,t,n),this.element}parsedHtml(e){return W.parsedHtml(e)}static camelCase(e){return W.camelCase(e)}}return e.classRegister={},e})();var Z=(()=>{class e extends G{static register(t={},n=[]){e.def||(e.def={icon:{},i18n:{}}),e.templates=t;const a=Q.locale;e.def.i18n[a]||(e.def.i18n[a]={}),G.register(Object.keys(t),e);for(const s of n){let n=s.type;if(s.attrs=s.attrs||{},!n){if(!s.attrs.type){this.error("Ignoring invalid custom field definition. Please specify a type property.");continue}n=s.attrs.type}let o=s.subtype||n;if(!t[n]){const t=G.getClass(n,s.subtype);if(!t){this.error("Error while registering custom field: "+n+(s.subtype?":"+s.subtype:"")+". Unable to find any existing defined control or template for rendering.");continue}o=`${n}-${Math.floor(9e3*Math.random()+1e3)}`,e.customRegister[o]=$.extend(s,{type:n,class:t})}e.def.i18n[a][o]=s.label,e.def.icon[o]=s.icon}}static getRegistered(t=!1){return t?G.getRegistered(t):Object.keys(e.customRegister)}static lookup(t){return e.customRegister[t]}static get definition(){return e.def}build(){let t=e.templates[this.type];if(!t)return G.error("Invalid custom control type. Please ensure you have registered it correctly as a template option.");const n=Object.assign(this.config),a=["label","description","subtype","id","isPreview","required","title","aria-required","type"];for(const e of a)n[e]=this.config[e]||this[e];return t=t.bind(this),t=t(n),t.js&&(this.js=t.js),t.css&&(this.css=t.css),this.onRender=t.onRender,{field:t.field,layout:t.layout}}}return e.customRegister={},e})();const K=W.markup;class ee{constructor(e,t){this.data=U[e],this.d=F[e],this.doCancel=!1,this.layout=t}startMoving(e,t){t.item.show().addClass("moving"),this.doCancel=!0,this.from=t.item.parent()}stopMoving(e,t){t.item.removeClass("moving"),this.doCancel&&(t.sender&&$(t.sender).sortable("cancel"),this.from.sortable("cancel")),this.save(),this.doCancel=!1}beforeStop(e,t){const n=D.opts,a=this.d.stage.childNodes.length-1,s=[];this.stopIndex=t.placeholder.index()-1,!n.sortableControls&&t.item.parent().hasClass("frmb-control")&&s.push(!0),n.prepend&&s.push(0===this.stopIndex),n.append&&s.push(this.stopIndex+1===a),this.doCancel=s.some(e=>!0===e)}getTypes(e){const t={type:e.attr("type")},n=$(".fld-subtype",e).val();return n!==t.type&&(t.subtype=n),t}fieldOptionData(e){const t=[],n=$(".sortable-options li",e);return n.each(e=>{const a=$(n[e]),s=$(".option-selected",a).is(":checked"),o={label:$(".option-label",a).val(),value:$(".option-value",a).val()};s&&(o.selected=s),t.push(o)}),t}xmlSave(e){const t=this.prepData(e),n=["<form-template>\n\t<fields>"];return W.forEach(t,(function(e,t){let a=null;if(t.type.match(B)){const e=t.values,n=[];for(let t=0;t<e.length;t++){const a=e[t],s=K("option",a.label,a).outerHTML;n.push("\n\t\t\t"+s)}n.push("\n\t\t"),a=n.join(""),delete t.values}const s=K("field",a,t);n.push("\n\t\t"+s.outerHTML)})),n.push("\n\t</fields>\n</form-template>"),n.join("")}prepData(e){const t=[],n=this.d,a=this;return 0!==e.childNodes.length&&W.forEach(e.childNodes,(function(e,s){const o=$(s);if(!o.hasClass("disabled-field")){let e=a.getTypes(o);const l=$(".roles-field:checked",s),r=l.map(e=>l[e].value).get();if(a.setAttrVals(s,e),e.subtype)if("quill"===e.subtype){const t=`${e.name}-preview`;if(window.fbEditors.quill[t]){const n=window.fbEditors.quill[t].instance.getContents();e.value=window.JSON.stringify(n.ops)}}else if("tinymce"===e.subtype&&window.tinymce){const t=`${e.name}-preview`;if(window.tinymce.editors[t]){const n=window.tinymce.editors[t];e.value=n.getContent()}}if(r.length&&(e.role=r.join(",")),e.className=e.className||e.class,e.className){const t=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(e.className);t&&(e.style=t[1])}e=W.trimObj(e),e.type.match(n.optionFieldsRegEx)&&(e.values=a.fieldOptionData(o)),t.push(e)}})),t}getData(e){const t=this.data;return e||(e=D.opts.formData),!!e&&(t.formData={xml:e=>W.parseXML(e),json:e=>window.JSON.parse(e)}[D.opts.dataType](e)||[],t.formData)}save(e=null){const t=this,n=this.data;return e||(e=this.d.stage),n.formData={xml:()=>t.xmlSave(e),json:()=>window.JSON.stringify(t.prepData(e),null,"\t")}[D.opts.dataType](e),document.dispatchEvent(J.formSaved),n.formData}incrementId(e){const t=e.lastIndexOf("-"),n=parseInt(e.substring(t+1))+1;return`${e.substring(0,t)}-${n}`}setAttrVals(e,t){const n=e.querySelectorAll('[class*="fld-"]');W.forEach(n,e=>{const a=n[e];let s;const o=W.camelCase(a.getAttribute("name"));s=a.attributes.contenteditable?a.innerHTML:"checkbox"===a.type?a.checked:a.value,t[o]=s})}updatePreview(e){const t=this.d,n=e.attr("class"),a=e[0];if(-1!==n.indexOf("input-control"))return;const s=e.attr("type"),o=$(".prev-holder",a);let l,r={type:s};this.setAttrVals(a,r);const i=$(".btn-style",a).val();i&&(r.style=i),s.match(t.optionFieldsRegEx)&&(r.values=[],r.multiple=$('[name="multiple"]',a).is(":checked"),$(".sortable-options li",a).each((function(e,t){const n={};n.selected=$(".option-selected",t).is(":checked"),n.value=$(".option-value",t).val(),n.label=$(".option-label",t).val(),r.values.push(n)}))),r=W.trimObj(r),r.className=this.classNames(a,r),$(".fld-className",a).val(r.className),e.data("fieldData",r);const c=Z.lookup(r.type),d=c?c.class:G.getClass(r.type,r.subtype);l=this.layout.build(d,r),T(o[0]),o[0].appendChild(l),l.dispatchEvent(J.fieldRendered)}disabledTT(e){const t=e.querySelectorAll(".disabled-field");W.forEach(t,e=>{const n=t[e],a=Q.get("fieldNonEditable");if(a){const e=W.markup("p",a,{className:"frmb-tt"});n.appendChild(e),n.addEventListener("mousemove",t=>((e,t)=>{const n=t.field.getBoundingClientRect();t.tt.style.transform=`translate(${e.clientX-n.left-21}px, ${e.clientY-n.top-t.tt.offsetHeight-12}px)`})(t,{tt:e,field:n}))}})}classNames(e,t){const n=e.querySelector(".fld-className");if(!n)return;let a;const s=t.type,o=t.style,l=n.value.split(" "),r={button:"btn",submit:"btn"}[s];if(r){if(o){for(a=0;a<l.length;a++){const e=new RegExp(`(?:^|s)${r}-(.*?)(?:s|$)+`,"g");l[a].match(e)&&l.splice(a,1)}l.push(r+"-"+o)}l.push(r)}return W.unique(l).join(" ").trim()}closeConfirm(e,t=null){e||(e=document.getElementsByClassName("form-builder-overlay")[0]),t||(t=document.getElementsByClassName("form-builder-dialog")[0]),e.classList.remove("visible"),_(t),_(e),document.dispatchEvent(J.modalClosed)}editorLayout(e){return{left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}}[e]||""}showOverlay(){const e=this,t=W.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(t),t.classList.add("visible"),t.onclick=function(){e.closeConfirm(t)},t}confirm(e,t,n=!1,a=""){const s=this,o=Q.current,l=s.showOverlay(),r=K("button",o.yes,{className:"yes btn btn-success btn-sm"}),i=K("button",o.no,{className:"no btn btn-danger btn-sm"});i.onclick=function(){s.closeConfirm(l)},r.onclick=function(){t(),s.closeConfirm(l)};const c=K("div",[i,r],{className:"button-wrap"}),d=K("div",[e,c],{className:a="form-builder-dialog "+a});if(n)d.classList.add("positioned");else{const e=document.documentElement;n={pageX:Math.max(e.clientWidth,window.innerWidth||0)/2,pageY:Math.max(e.clientHeight,window.innerHeight||0)/2},d.style.position="fixed"}return d.style.left=n.pageX+"px",d.style.top=n.pageY+"px",document.body.appendChild(d),r.focus(),d}dialog(e,t=!1,n=""){const a=document.documentElement.clientWidth,s=document.documentElement.clientHeight;this.showOverlay();const o=W.markup("div",e,{className:n="form-builder-dialog "+n});return t?o.classList.add("positioned"):(t={pageX:Math.max(a,window.innerWidth||0)/2,pageY:Math.max(s,window.innerHeight||0)/2},o.style.position="fixed"),o.style.left=t.pageX+"px",o.style.top=t.pageY+"px",document.body.appendChild(o),document.dispatchEvent(J.modalOpened),-1!==n.indexOf("data-dialog")&&document.dispatchEvent(J.viewData),o}confirmRemoveAll(e){const t=this,n=e.target.id.match(/frmb-\d{13}/)[0],a=document.getElementById(n),s=Q.current,o=$("li.form-field",a),l=e.target.getBoundingClientRect(),r=document.body.getBoundingClientRect(),i={pageX:l.left+l.width/2,pageY:l.top-r.top-12};o.length?t.confirm(s.clearAllMessage,(function(){t.removeAllFields.call(t,a),D.opts.notify.success(s.allFieldsRemoved),D.opts.onClearAll()}),i):t.dialog(s.noFieldsToClear,i)}removeAllFields(e,t=!0){const n=Q.current,a=D.opts,s=e.querySelectorAll("li.form-field"),o=[];if(!s.length)return!1;if(a.prepend&&o.push(!0),a.append&&o.push(!0),o.some(e=>!0===e)||(e.parentElement.classList.add("empty"),e.parentElement.dataset.content=n.getStarted),t){e.classList.add("removing");let t=0;W.forEach(s,e=>t+=s[e].offsetHeight+3),s[0].style.marginTop=`${-t}px`,setTimeout(()=>{T(e).classList.remove("removing"),this.save()},400)}else T(e),this.save()}setFieldOrder(e){if(!D.opts.sortableControls)return!1;const{sessionStorage:t,JSON:n}=window,a=[];return e.children().each((e,t)=>{const n=$(t).data("type");n&&a.push(n)}),t&&t.setItem("fieldOrder",n.stringify(a)),a}orderFields(e){const t=D.opts,n=t.controlOrder.concat(e);let a;return window.sessionStorage&&(t.sortableControls?a=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),a?(a=window.JSON.parse(a),a=W.unique(a.concat(e)),a=Object.keys(a).map(e=>a[e])):a=W.unique(n),a.forEach(e=>{const t=new RegExp("-[\\d]{4}$");if(e.match(t)){const n=a.indexOf(e.replace(t,""));-1!==n&&(a.splice(a.indexOf(e),1),a.splice(n+1,a.indexOf(e),e))}}),t.disableFields.length&&(a=a.filter(e=>-1==t.disableFields.indexOf(e))),a.filter(Boolean)}closeAllEdit(){const e=$("> li.editing",this.d.stage),t=$(".toggle-form",this.d.stage),n=$(".frm-holder",e);t.removeClass("open"),e.removeClass("editing"),$(".prev-holder",e).show(),n.hide()}toggleEdit(e,t=!0){const n=document.getElementById(e),a=$(".toggle-form",n);if(!a.length)return;const s=$(".frm-holder",n);n.classList.toggle("editing"),a.toggleClass("open"),t?($(".prev-holder",n).slideToggle(250),s.slideToggle(250)):($(".prev-holder",n).toggle(),s.toggle()),this.updatePreview($(n))}stickyControls(){const e=this.d,t=$(e.controls).parent(),n=$(e.stage).parent(),a=t.width(),s=e.controls.getBoundingClientRect();$(window).scroll((function(o){const l=$(o.target).scrollTop(),r=Object.assign({},{top:5,bottom:"auto",right:"auto",left:s.left},D.opts.stickyControls.offset);if(l>n.offset().top){const e=Object.assign({position:"fixed",width:a},r),s=t.offset(),o=n.offset(),i=s.top+t.height(),c=o.top+n.height(),d=i===c&&s.top>l;i>c&&s.top!==o.top&&t.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(i<c||d)&&t.css(e)}else e.controls.parentElement.removeAttribute("style")}))}showData(){const e=W.escapeHtml(this.data.formData),t=K("code",e,{className:`formData-${D.opts.dataType}`});this.dialog(K("pre",t),null,"data-dialog")}removeField(e,t=250){let n=!1;const a=this,s=this.d.stage,o=s.getElementsByClassName("form-field");if(!o.length)return console.warn("No fields to remove"),!1;if(!e){const t=[].slice.call(o).map(e=>e.id);console.warn("fieldID required to remove specific fields."),console.warn("Removing last field since no ID was supplied."),console.warn("Available IDs: "+t.join(", ")),e=s.lastChild.id}const l=document.getElementById(e),r=$(l);return l?(r.slideUp(t,(function(){if(r.removeClass("deleting"),r.remove(),n=!0,a.save(),!s.childNodes.length){const e=s.parentElement;e.classList.add("empty"),e.dataset.content=Q.current.getStarted}})),document.dispatchEvent(J.fieldRemoved),n):(console.warn("Field not found"),!1)}processActionButtons(e){let{label:t,events:n}=e,a=Object(A.b)(e,["label","events"]);const s=this.data;t=t?Q.current[t]||t:a.id?Q.current[a.id]||W.capitalize(a.id):"",a.id=a.id?`${s.formID}-${a.id}-action`:`${s.formID}-action-${Math.round(1e3*Math.random())}`;const o=K("button",t,a);if(n)for(const l in n)n.hasOwnProperty(l)&&o.addEventListener(l,e=>n[l](e));return o}processSubtypes(e){for(const a in e)if(e.hasOwnProperty(a)){const t=G.getClass(a);G.register(e[a],t,a)}const t=G.getRegisteredSubtypes(),n={};for(const a in t)if(t.hasOwnProperty(a)){const e=[];for(const n of t[a]){const t=G.getClass(a,n);e.push({label:t.mi18n(n),value:n})}n[a]=e}return n}editorUI(e){const t=this.d,n=this.data;t.stage=K("ul",null,{id:n.formID,className:"frmb"}),t.controls=K("ul",null,{id:`${n.formID}-control-box`,className:"frmb-control"})}processOptions(e){const t=this;let{actionButtons:n,replaceFields:a}=e,s=Object(A.b)(e,["actionButtons","replaceFields"]);return n=[{type:"button",id:"clear",className:"clear-all btn btn-danger",events:{click:t.confirmRemoveAll.bind(t)}},{type:"button",label:"viewJSON",id:"data",className:"btn btn-default get-data",events:{click:t.showData.bind(t)}},{type:"button",id:"save",className:"btn btn-primary btn-raised save-template",events:{click:e=>{t.save(),D.opts.onSave(e,t.data.formData)}}}].concat(e.actionButtons),D.opts=Object.assign({},{actionButtons:n},s),void 0!==a&&(s.disableFields=s.disableFields.concat(a.map(({type:e})=>e&&e))),D.opts=Object.assign({},{actionButtons:n},s),D.opts}input(e={}){return K("input",null,e)}getFormData(e="js",t=!1){const n=this;return{js:()=>n.prepData(n.d.stage),xml:()=>n.xmlSave(n.d.stage),json:e=>{let t;return t=e?window.JSON.stringify(n.prepData(n.d.stage),null,"\t"):window.JSON.stringify(n.prepData(n.d.stage)),t}}[e](t)}}G.register("autocomplete",class extends G{build(){let e=this.config,{values:t,type:n}=e,a=Object(A.b)(e,["values","type"]);const s=e=>{const t=e.target.nextSibling.nextSibling,n=e.target.nextSibling;let a=this.getActiveOption(t),s=new Map([[38,()=>{const e=this.getPreviousOption(a);e&&this.selectOption(t,e)}],[40,()=>{const e=this.getNextOption(a);e&&this.selectOption(t,e)}],[13,()=>{a&&(e.target.value=a.innerHTML,n.value=a.getAttribute("value"),"none"===t.style.display?this.showList(t,a):this.hideList(t)),e.preventDefault()}],[27,()=>{this.hideList(t)}]]).get(e.keyCode);return s||(s=()=>!1),s()};let o=Object.assign({},a,{id:`${a.id}-input`,autocomplete:"off",events:{focus:e=>{const t=e.target.nextSibling.nextSibling,n=R(t.querySelectorAll("li"),e.target.value);e.target.addEventListener("keydown",s),e.target.value.length>0&&this.showList(t,n.length>0?n[n.length-1]:null)},blur:e=>{e.target.removeEventListener("keydown",s),setTimeout(()=>{e.target.nextSibling.nextSibling.style.display="none"},200)},input:e=>{const t=e.target.nextSibling.nextSibling;e.target.nextSibling.value=e.target.value;const n=R(t.querySelectorAll("li"),e.target.value);if(0==n.length)this.hideList(t);else{let e=this.getActiveOption(t);e||(e=n[n.length-1]),this.showList(t,e)}}}}),l=Object.assign({},a,{type:"hidden"});delete o.name;const r=[super.markup("input",null,o),super.markup("input",null,l)],i=t.map(e=>super.markup("li",e.label,{events:{click:t=>{const n=t.target.parentElement,a=n.previousSibling.previousSibling;a.value=e.label,a.nextSibling.value=e.value,this.hideList(n)}},value:e.value}));return r.push(super.markup("ul",i,{id:`${a.id}-list`,className:`fb-${n}-list`})),r}hideList(e){this.selectOption(e,null),e.style.display="none"}showList(e,t){this.selectOption(e,t),e.style.display="block",e.style.width=e.parentElement.offsetWidth+"px"}getActiveOption(e){const t=e.getElementsByClassName("active-option")[0];return t&&"none"!==t.style.display?t:null}getPreviousOption(e){let t=e;do{t=t?t.previousSibling:null}while(null!=t&&"none"===t.style.display);return t}getNextOption(e){let t=e;do{t=t?t.nextSibling:null}while(null!=t&&"none"===t.style.display);return t}selectOption(e,t){e.querySelectorAll("li").forEach(e=>{e.classList.remove("active-option")}),t&&t.classList.add("active-option")}});class te extends G{build(){return{field:super.markup("button",this.label,this.config),layout:"noLabel"}}}G.register("button",te),G.register(["button","submit","reset"],te,"button"),G.register("hidden",class extends G{build(){return{field:this.markup("input",null,this.config),layout:"hidden"}}});class ne extends G{build(){let e=this.config,{type:t}=e,n=Object(A.b)(e,["type"]),a={paragraph:"p",header:this.subtype};return a[t]&&(t=a[t]),{field:this.markup(t,W.parsedHtml(this.label),n),layout:"noLabel"}}}G.register(["paragraph","header"],ne),G.register(["p","address","blockquote","canvas","output"],ne,"paragraph"),G.register(["h1","h2","h3"],ne,"header"),G.register(["select","checkbox-group","radio-group","checkbox"],class extends G{static get definition(){return{inactive:["checkbox"],mi18n:{minSelectionRequired:"minSelectionRequired"}}}build(){let e=[],t=this.config,{values:n,value:a,placeholder:s,type:o,inline:l,other:r,toggle:i}=t,c=Object(A.b)(t,["values","value","placeholder","type","inline","other","toggle"]),d=o.replace("-group",""),p="select"===o;if((c.multiple||"checkbox-group"===o)&&(c.name=c.name+"[]"),"checkbox-group"===o&&c.required&&(this.onRender=this.groupRequired),delete c.title,n){s&&p&&e.push(this.markup("option",s,{disabled:null,selected:null}));for(let t=0;t<n.length;t++){let o=n[t];"string"==typeof o&&(o={label:o,value:o});let{label:r=""}=o,u=Object(A.b)(o,["label"]);if(u.id=`${c.id}-${t}`,u.selected&&!s||delete u.selected,void 0!==a&&u.value===a&&(u.selected=!0),p){let t=this.markup("option",document.createTextNode(r),u);e.push(t)}else{let t=d,n=[r];l&&(t+="-inline"),u.type=d,u.selected&&(u.checked="checked",delete u.selected);let a=this.markup("input",null,Object.assign({},c,u)),s={for:u.id};r=this.markup("label",n,s);let o=[a,r];i&&(s.className="kc-toggle",n.unshift(a,this.markup("span")),o=this.markup("label",n,s));let p=this.markup("div",o,{className:t});e.push(p)}}if(!p&&r){let t={id:`${c.id}-other`,className:`${c.className} other-option`,value:"",events:{click:()=>this.otherOptionCB(t.id)}},n=d;l&&(n+="-inline");let a=Object.assign({},c,t);a.type=d;let s={type:"text",events:{input:e=>{const t=e.target;t.previousElementSibling.value=t.value}},id:`${t.id}-value`,className:"other-val"},o=this.markup("input",null,a),r=[document.createTextNode("Other"),this.markup("input",null,s)],i=this.markup("label",r,{for:a.id}),p=this.markup("div",[o,i],{className:n});e.push(p)}}return"select"==o?this.markup(d,e,c):this.markup("div",e,{className:o})}groupRequired(){const e=this.element.getElementsByTagName("input"),t=()=>{let t=[].some.call(e,e=>e.checked);((e,t)=>{[].forEach.call(e,e=>{t?e.removeAttribute("required"):e.setAttribute("required","required"),((e,t)=>{let n=G.mi18n("minSelectionRequired",1);e.setCustomValidity(t?"":n)})(e,t)})})(e,t)};for(let n=e.length-1;n>=0;n--)e[n].addEventListener("change",t);t()}otherOptionCB(e){const t=document.getElementById(e);document.getElementById(`${e}-value`).style.display=t.checked?"inline-block":"none"}});class ae extends G{static get definition(){return{mi18n:{date:"dateField",file:"fileUpload"}}}build(){return this.markup("input",null,this.config)}}G.register(["text","file","date","number"],ae),G.register(["text","password","email","color","tel"],ae,"text"),ae.register("file",ae,"file"),ae.register("fineuploader",class extends ae{static get definition(){return{i18n:{default:"Fine Uploader"}}}configure(){this.js=this.classConfig.js||"//cdnjs.cloudflare.com/ajax/libs/file-uploader/5.14.2/jquery.fine-uploader/jquery.fine-uploader.min.js",this.css=[this.classConfig.css||"//cdnjs.cloudflare.com/ajax/libs/file-uploader/5.14.2/jquery.fine-uploader/fine-uploader-gallery.min.css",{type:"inline",id:"fineuploader-inline",style:"\n          .qq-uploader .qq-error-message {\n            position: absolute;\n            left: 20%;\n            top: 20px;\n            width: 60%;\n            color: #a94442;\n            background: #f2dede;\n            border: solid 1px #ebccd1;\n            padding: 15px;\n            line-height: 1.5em;\n            text-align: center;\n            z-index: 99999;\n          }\n          .qq-uploader .qq-error-message span {\n            display: inline-block;\n            text-align: left;\n          }"}],this.handler=this.classConfig.handler||"/upload",["js","css","handler"].forEach(e=>delete this.classConfig[e]);let e=this.classConfig.template||'\n      <div class="qq-uploader-selector qq-uploader qq-gallery" qq-drop-area-text="Drop files here">\n        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">\n          <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>\n        </div>\n        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>\n          <span class="qq-upload-drop-area-text-selector"></span>\n        </div>\n        <div class="qq-upload-button-selector qq-upload-button">\n          <div>Upload a file</div>\n        </div>\n        <span class="qq-drop-processing-selector qq-drop-processing">\n          <span>Processing dropped files...</span>\n          <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>\n        </span>\n        <ul class="qq-upload-list-selector qq-upload-list" role="region" aria-live="polite" aria-relevant="additions removals">\n          <li>\n            <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>\n            <div class="qq-progress-bar-container-selector qq-progress-bar-container">\n              <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>\n            </div>\n            <span class="qq-upload-spinner-selector qq-upload-spinner"></span>\n            <div class="qq-thumbnail-wrapper">\n              <img class="qq-thumbnail-selector" qq-max-size="120" qq-server-scale>\n            </div>\n            <button type="button" class="qq-upload-cancel-selector qq-upload-cancel">X</button>\n            <button type="button" class="qq-upload-retry-selector qq-upload-retry">\n              <span class="qq-btn qq-retry-icon" aria-label="Retry"></span>\n              Retry\n            </button>\n            <div class="qq-file-info">\n              <div class="qq-file-name">\n                <span class="qq-upload-file-selector qq-upload-file"></span>\n                <span class="qq-edit-filename-icon-selector qq-btn qq-edit-filename-icon" aria-label="Edit filename"></span>\n              </div>\n              <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">\n              <span class="qq-upload-size-selector qq-upload-size"></span>\n              <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">\n                <span class="qq-btn qq-delete-icon" aria-label="Delete"></span>\n              </button>\n              <button type="button" class="qq-btn qq-upload-pause-selector qq-upload-pause">\n                <span class="qq-btn qq-pause-icon" aria-label="Pause"></span>\n              </button>\n              <button type="button" class="qq-btn qq-upload-continue-selector qq-upload-continue">\n                <span class="qq-btn qq-continue-icon" aria-label="Continue"></span>\n              </button>\n            </div>\n          </li>\n        </ul>\n        <dialog class="qq-alert-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">Close</button>\n          </div>\n        </dialog>\n        <dialog class="qq-confirm-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">No</button>\n            <button type="button" class="qq-ok-button-selector">Yes</button>\n          </div>\n        </dialog>\n        <dialog class="qq-prompt-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <input type="text">\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">Cancel</button>\n            <button type="button" class="qq-ok-button-selector">Ok</button>\n          </div>\n        </dialog>\n      </div>';this.fineTemplate=$("<div/>").attr("id","qq-template").html(e)}build(){return this.input=this.markup("input",null,{type:"hidden",name:this.config.name,id:this.config.name}),this.wrapper=this.markup("div","",{id:this.config.name+"-wrapper"}),[this.input,this.wrapper]}onRender(){let e=$(this.wrapper),t=$(this.input),n=$.extend(!0,{request:{endpoint:this.handler},deleteFile:{enabled:!0,endpoint:this.handler},chunking:{enabled:!0,concurrent:{enabled:!0},success:{endpoint:this.handler+(-1==this.handler.indexOf("?")?"?":"&")+"done"}},resume:{enabled:!0},retry:{enableAuto:!0,showButton:!0},callbacks:{onError:(t,n,a,s)=>{"."!=a.slice(-1)&&(a+=".");let o=$("<div />").addClass("qq-error-message").html(`<span>Error processing upload: <b>${n}</b>.<br />Reason: ${a}</span>`).prependTo(e.find(".qq-uploader"));setTimeout(()=>{o.fadeOut(()=>{o.remove()})},6e3)},onStatusChange:(n,a,s)=>{let o=e.fineUploader("getUploads"),l=[];for(let e of o)"upload successful"==e.status&&l.push(e.name);t.val(l.join(", "))}},template:this.fineTemplate},this.classConfig);e.fineUploader(n)}},"file");class se extends G{static get definition(){return{mi18n:{textarea:"textArea"}}}build(){let e=this.config,{value:t=""}=e,n=Object(A.b)(e,["value"]);return this.field=this.markup("textarea",this.parsedHtml(t),n),this.field}on(e){return"prerender"==e&&this.preview?e=>{this.field&&(e=this.field),$(e).on("mousedown",e=>{e.stopPropagation()})}:super.on(e)}}G.register("textarea",se),G.register("textarea",se,"textarea"),n("EVdn");let oe=(new Date).getTime();class le{getFormBuilder(e,t){return re(e,t)}}const re=(e,t)=>{const n=jQuery,a=Q.current,s="frmb-"+oe++,o=new z(s),l=new H(s);e.layout||(e.layout=Y);const r=new e.layout(e.layoutTemplates,!0);G.controlConfig=e.controlConfig||{};const i=new ee(s,r),c=W.markup;e=i.processOptions(e),Object.keys(e.fields).length&&Z.register(e.templates,e.fields);const d=D.subtypes=i.processSubtypes(e.subtypes);i.editorUI(s);const p=n(l.stage);o.layout=i.editorLayout(e.controlPosition),o.formID=s,o.lastID=`${o.formID}-fld-1`;const u=G.getRegistered(),m=Z.getRegistered();m&&n.merge(u,m),e.sortableControls&&l.controls.classList.add("sort-enabled");const h=n(l.controls),f=[],g={};for(let I=0;I<u.length;I++){const e=u[I];let t,n=Z.lookup(e);if(n)t=n.class;else if(n={},t=G.getClass(e),!t||!t.active(e))continue;const a=n.icon||t.icon(e);let s=n.label||t.label(e);const o=a?"":n.iconClassName||`icon-${e.replace(/-[\d]{4}$/,"")}`;a&&(s=`<span class="control-icon">${a}</span>${s}`);const l=c("li",c("span",s),{className:`${o} input-control input-control-${I}`});l.dataset.type=e,f.push(e),g[e]=l}e.inputSets.length&&e.inputSets.forEach((e,t)=>{e.name=e.name||W.makeClassName(e.label);const n=c("li",e.label,{className:`input-set-control input-set-${t}`});n.dataset.type=e.name,f.push(e.name),g[e.name]=n}),i.orderFields(f).forEach(e=>{g[e]&&l.controls.appendChild(g[e])}),p.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:(e,t)=>i.beforeStop.call(i,e,t),start:(e,t)=>i.startMoving.call(i,e,t),stop:(e,t)=>i.stopMoving.call(i,e,t),cancel:["input","select","textarea",".disabled-field",".form-elements",".btn","button"].join(", "),placeholder:"frmb-placeholder"}),h.sortable({helper:"clone",opacity:.9,connectWith:p,cancel:".fb-separator",cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:(e,t)=>i.startMoving.call(i,e,t),stop:(e,t)=>i.stopMoving.call(i,e,t),revert:150,beforeStop:(e,t)=>i.beforeStop.call(i,e,t),distance:3,update:function(t,n){if(i.doCancel)return!1;n.item.parent()[0]===l.stage?(i.doCancel=!0,b(n.item)):(i.setFieldOrder(h),i.doCancel=!e.sortableControls)}});const b=t=>{if(t[0].classList.contains("input-set-control")){const n=[],a=e.inputSets.find(e=>e.name===t[0].dataset.type);a&&a.showHeader&&n.push({type:"header",subtype:"h2",id:a.name,label:a.label}),n.push(...a.fields),n.forEach(e=>{q(e,!0),(i.stopIndex||0===i.stopIndex)&&i.stopIndex++})}else q(t,!0)};l.editorWrap=c("div",null,{id:`${o.formID}-form-wrap`,className:"form-wrap form-builder"+W.mobileClass()});const v=n(l.editorWrap),y=c("div",l.controls,{id:`${o.formID}-cb-wrap`,className:"cb-wrap "+o.layout.controls});if(e.showActionButtons){const t=e.actionButtons.map(t=>{if(t.id&&-1===e.disabledActionButtons.indexOf(t.id))return i.processActionButtons(t)}),n=l.formActions=c("div",t,{className:"form-actions btn-group"});y.appendChild(n)}const x=c("div",[l.stage,y],{id:`${o.formID}-stage-wrap`,className:"stage-wrap "+o.layout.stage});v.append(x,y),"textarea"!==t.type?n(t).append(v):n(t).replaceWith(v);const w=W.debounce(e=>{if(e){if("keyup"===e.type&&"className"===e.target.name)return!1;const t=n(e.target).closest(".form-field");i.updatePreview(t),i.save.call(i)}}),k=[".form-elements input",".form-elements select",".form-elements textarea"].join(", ");p.on("change blur keyup",k,w),n("li",l.controls).click(e=>{const t=n(e.target).closest("li");i.stopIndex=void 0,b(t),i.save.call(i)});const q=function(e,t=!1){let a={};if(e instanceof jQuery)if(a.type=e[0].dataset.type,a.type){const e=Z.lookup(a.type);if(e)a=Object.assign({},e);else{const e=G.getClass(a.type);a.label=e.label(a.type)}}else{const s=e[0].attributes;t||(a.values=a.children().map((e,t)=>({label:n(t).text(),value:n(t).attr("value"),selected:Boolean(n(t).attr("selected"))})));for(let e=s.length-1;e>=0;e--)a[s[e].name]=s[e].value}else a=Object.assign({},e);a.name||(a.name=W.nameAttr(a)),t&&W.inArray(a.type,["text","number","file","date","select","textarea","autocomplete"])&&(a.className=a.className||"form-control");const s=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(a.className);s&&(a.style=s[1]),F(a,t),t&&document.dispatchEvent(J.fieldAdded),x.classList.remove("empty")},C=t=>{const{type:n}=t,s=[],r=(e=>{const t=["required","label","description","placeholder","className","name","access","value"],n=["header","paragraph","file","autocomplete"].concat(l.optionFields),a=!W.inArray(e,n),s={autocomplete:t.concat(["options"]),button:["label","subtype","style","className","name","value","access"],checkbox:["required","label","description","toggle","inline","className","name","access","other","options"],text:t.concat(["subtype","maxlength"]),date:t,file:t.concat(["subtype","multiple"]),header:["label","subtype","className","access"],hidden:["name","value","access"],paragraph:["label","subtype","className","access"],number:t.concat(["min","max","step"]),select:t.concat(["multiple","options"]),textarea:t.concat(["subtype","maxlength","rows"])};s["checkbox-group"]=s.checkbox,s["radio-group"]=s.checkbox;const o=s[e];return"radio-group"===e&&W.remove("toggle",o),W.inArray(e,["header","paragraph","button"])&&W.remove("description",o),a||W.remove("value",o),o||t})(n),p={required:()=>M(t),toggle:()=>O("toggle",t,{first:a.toggle}),inline:()=>{const e={first:a.inline,second:Q.get("inlineDesc",n.replace("-group",""))};return O("inline",t,e)},label:()=>j("label",t),description:()=>j("description",t),subtype:()=>A("subtype",t,d[n]),style:()=>$(t.style),placeholder:()=>j("placeholder",t),rows:()=>N("rows",t),className:()=>j("className",t),name:()=>j("name",t),value:()=>j("value",t),maxlength:()=>N("maxlength",t),access:()=>{const n=[`<div class="available-roles" ${t.role?'style="display:block"':""}>`];for(u in e.roles)if(e.roles.hasOwnProperty(u)){const t=`fld-${o.lastID}-roles-${u}`,a={type:"checkbox",name:"roles[]",value:u,id:t,className:"roles-field"};W.inArray(u,m)&&(a.checked="checked"),n.push(`<label for="${t}">`),n.push(i.input(a).outerHTML),n.push(` ${e.roles[u]}</label>`)}n.push("</div>");const s={first:a.roles,second:a.limitRole,content:n.join("")};return O("access",t,s)},other:()=>O("other",t,{first:a.enableOther,second:a.enableOtherMsg}),options:()=>function(e){let{type:t,values:n,name:s}=e;const o=[c("a",a.addOption,{className:"add add-opt"})],l=[c("label",a.selectOptions,{className:"false-label"})],r=e.multiple||"checkbox-group"===t;if(n&&n.length)n.forEach(e=>Object.assign({},{selected:!1},e));else{let e=[1,2,3];W.inArray(t,["checkbox-group","checkbox"])&&(e=[1]),n=e.map((function(e){return(e=>{const n={label:e,value:W.hyphenCase(e)};return"autocomplete"!==t&&(n.selected=!1),n})(`${a.option} ${e}`)}));const s=n[0];s.hasOwnProperty("selected")&&(s.selected=!0)}const i=c("div",o,{className:"option-actions"}),d=c("ol",n.map(e=>L(s,e,r)),{className:"sortable-options"}),p=c("div",[d,i],{className:"sortable-options-wrap"});return l.push(p),c("div",l,{className:"form-group field-options"}).outerHTML}(t)};let u;const m=void 0!==t.role?t.role.split(","):[];if("number"===n&&["min","max","step"].forEach(e=>{p[e]=()=>N(e,t)}),"file"===n&&(p.multiple=()=>O("multiple",t,{first:a.multipleFiles,second:a.allowMultipleFiles})),"select"===n&&(p.multiple=()=>O("multiple",t,{first:" ",second:a.selectionsMessage})),Object.keys(r).forEach(t=>{const a=r[t],o=[!0];if(e.typeUserDisabledAttrs[n]&&o.push(!W.inArray(a,e.typeUserDisabledAttrs[n])),e.typeUserAttrs[n]){const t=Object.keys(e.typeUserAttrs[n]);o.push(!W.inArray(a,t))}W.inArray(a,e.disabledAttrs)&&o.push(!1),o.every(e=>!0===e)&&s.push(p[a]())}),e.typeUserAttrs[n]){const o=function(e,t){const n=[];for(const s in e)if(e.hasOwnProperty(s)){const o=a[s],l=e[s],r=l.value;l.value=t[s]||l.value||"",l.label&&(a[s]=l.label),n.push(l.options?S(s,l):E(s,l)),a[s]=o,l.value=r}return n.join("")}(e.typeUserAttrs[n],t);s.push(o)}return s.join("")};function E(e,t){let n={id:e+"-"+o.lastID,title:t.description||t.label||e.toUpperCase(),name:e,type:t.type||"text",className:[`fld-${e}`]};const s=`<label for="${n.id}">${a[e]}</label>`;return W.inArray(n.type,["checkbox","checkbox-group","radio-group"])||n.className.push("form-control"),n=Object.assign({},t,n),`<div class="form-group ${e}-wrap">${s}${`<div class="input-wrap">${`<input ${W.attrString(n)}>`}</div>`}</div>`}function S(e,t){const n=Object.keys(t.options).map(e=>{const n={value:e};return e===t.value&&(n.selected=null),c("option",t.options[e],n).outerHTML}),s={id:e+"-"+o.lastID,title:t.description||t.label||e.toUpperCase(),name:e,className:`fld-${e} form-control`},l=`<label for="${s.id}">${a[e]}</label>`;return Object.keys(t).filter(e=>!W.inArray(e,["value","options","label"])).forEach((function(e){s[e]=t[e]})),`<div class="form-group ${e}-wrap">${l}${`<div class="input-wrap">${c("select",n,s).outerHTML}</div>`}</div>`}const O=(e,t,n)=>{const a=t=>c("label",t,{for:`${e}-${o.lastID}`}).outerHTML,s={type:"checkbox",className:`fld-${e}`,name:e,id:`${e}-${o.lastID}`};t[e]&&(s.checked=!0);const l=[];let r=[c("input",null,s).outerHTML];return n.first&&l.push(a(n.first)),n.second&&r.push(" ",a(n.second)),n.content&&r.push(n.content),r=c("div",r,{className:"input-wrap"}).outerHTML,c("div",l.concat(r),{className:`form-group ${e}-wrap`}).outerHTML},$=e=>{let t="";"undefined"===e&&(e="default");const n=`<label>${a.style}</label>`;return t+=i.input({value:e||"default",type:"hidden",className:"btn-style"}).outerHTML,t+='<div class="btn-group" role="group">',I.btn.forEach(n=>{const a=["btn-xs","btn",`btn-${n}`];e===n&&a.push("selected");const s=c("button",Q.get(`styles.btn.${n}`),{value:n,type:"button",className:a.join(" ")}).outerHTML;t+=s}),t+="</div>",t=c("div",[n,t],{className:"form-group style-wrap"}),t.outerHTML},N=(e,t)=>{const n=a[e]||e,s={type:"number",value:t[e],name:e,min:"0",placeholder:a[`placeholder.${e}`],className:`fld-${e} form-control`,id:`${e}-${o.lastID}`},l=i.input(W.trimObj(s)).outerHTML;return c("div",[`<label for="${s.id}">${n}</label>`,`<div class="input-wrap">${l}</div>`],{className:`form-group ${e}-wrap`}).outerHTML},A=(e,t,n)=>{const s=n.map((n,s)=>{let o=Object.assign({label:`${a.option} ${s}`,value:void 0},n);return n.value===t[e]&&(o.selected=!0),o=W.trimObj(o),c("option",o.label,o)}),l={id:e+"-"+o.lastID,name:e,className:`fld-${e} form-control`},r=a[e]||W.capitalize(e),i=c("label",r,{for:l.id}),d=c("select",s,l),p=c("div",d,{className:"input-wrap"});return c("div",[i,p],{className:`form-group ${l.name}-wrap`}).outerHTML},j=(e,t)=>{let n=t[e]||"",s=a[e];"label"===e&&(W.inArray(t.type,["paragraph"])?s=a.content:n=W.parsedHtml(t[e]));const l=a[`placeholder.${e}`]||"";let r="";if(![].some(e=>!0===e)){const a={name:e,placeholder:l,className:`fld-${e} form-control`,id:`${e}-${o.lastID}`},i=c("label",s,{for:a.id}).outerHTML;"label"===e?(a.contenteditable=!0,r+=c("div",n,a).outerHTML):(a.value=n,a.type="text",r+=`<input ${W.attrString(a)}>`);const d=`<div class="input-wrap">${r}</div>`;let p="block";"value"===e&&(p=t.subtype&&"quill"===t.subtype&&"none"),r=c("div",[i,d],{className:`form-group ${e}-wrap`,style:`display: ${p}`})}return r.outerHTML},M=e=>{const{type:t}=e,n=[];let s="";return W.inArray(t,["header","paragraph","button"])&&n.push(!0),n.some(e=>!0===e)||(s=O("required",e,{first:a.required})),s},F=function(t,s=!0){const r=t.type||"text",d=t.label||a[r]||a.label;void 0===e.disabledFieldButtons&&(e.disabledFieldButtons=[]);const u=e.disabledFieldButtons[r]||t.disabledFieldButtons;let m=[c("a",null,{type:"remove",id:"del_"+o.lastID,className:"del-button btn icon-cancel delete-confirm",title:a.removeMessage}),c("a",null,{type:"edit",id:o.lastID+"-edit",className:"toggle-form btn icon-pencil",title:a.hide}),c("a",null,{type:"copy",id:o.lastID+"-copy",className:"copy-button btn icon-copy",title:a.copyButtonTooltip})];u&&Array.isArray(u)&&(m=m.filter(e=>!W.inArray(e.type,u)));const h=[c("div",m,{className:"field-actions"})];h.push(c("label",W.parsedHtml(d),{className:"field-label"})),h.push(c("span"," *",{className:"required-asterisk",style:t.required?"display:inline":""})),h.push(c("span","?",{className:"tooltip-element",tooltip:t.description,style:t.description?"display:inline-block":"display:none"})),h.push(c("div","",{className:"prev-holder"}));const f=c("div",[C(t),c("a",a.close,{className:"close-field"})],{className:"form-elements"});h.push(c("div",f,{id:`${o.lastID}-holder`,className:"frm-holder"}));const g=c("li",h,{class:r+"-field form-field",type:r,id:o.lastID}),b=n(g);b.data("fieldData",{attrs:t}),void 0!==i.stopIndex?n("> li",l.stage).eq(i.stopIndex).before(b):p.append(b),jQuery(".sortable-options",b).sortable({update:()=>i.updatePreview(b)}),i.updatePreview(b),e.typeUserEvents[r]&&e.typeUserEvents[r].onadd&&e.typeUserEvents[r].onadd(g),e.editOnAdd&&s&&(i.closeAllEdit(),i.toggleEdit(o.lastID,!1)),o.lastID=i.incrementId(o.lastID)},L=function(e,t,n){const s={selected:n?"checkbox":"radio"},o=["value","label","selected"],l=[];t=Object.assign({selected:!1,label:"",value:""},t);for(let r=o.length-1;r>=0;r--){const n=o[r];if(t.hasOwnProperty(n)){const o={type:s[n]||"text",className:"option-"+n,value:t[n],name:e+"-option"};o.placeholder=a[`placeholder.${n}`]||"","selected"===n&&!0===t.selected&&(o.checked=t.selected),l.push(c("input",null,o))}}return l.push(W.markup("a",a.remove,{className:"remove btn",title:a.removeMessage})),W.markup("li",l).outerHTML};if(p.on("click touchstart",".remove",t=>{const s=jQuery(t.target).parents(".form-field:eq(0)"),o=s[0],l=o.getAttribute("type"),r=n(t.target.parentElement);t.preventDefault(),o.querySelector(".sortable-options").childNodes.length<=2&&!l.includes("checkbox")?e.notify.error("Error: "+a.minOptionMessage):r.slideUp("250",()=>{r.remove(),i.updatePreview(s),i.save.call(i)})}),p.on("touchstart","input",e=>{const t=n(void 0);if(!0===e.handled)return!1;if("checkbox"===t.attr("type"))t.trigger("click");else{t.focus();const e=t.val();t.val(e)}}),p.on("click touchstart",".toggle-form, .close-field",(function(e){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;{const t=n(e.target).parents(".form-field:eq(0)").attr("id");i.toggleEdit(t),e.handled=!0}})),p.on("dblclick","li.form-field, .field-label",e=>{if("input"!==e.target.tagName.toLowerCase()&&!e.target.contentEditable&&(e.stopPropagation(),e.preventDefault(),!0!==e.handled)){const t="li"==e.target.tagName?n(e.target).attr("id"):n(e.target).closest("li.form-field").attr("id");i.toggleEdit(t),e.handled=!0}}),p.on("change",'[name="subtype"]',e=>{const t=n(e.target).closest("li.form-field");n(".value-wrap",t).toggle("quill"!==e.target.value)}),p.on("change",[".prev-holder input",".prev-holder select",".prev-holder textarea"].join(", "),e=>{let t;const n=e;if(n.target.classList.contains("other-option"))return;const a=W.closest(n.target,".form-field");if(W.inArray(a.type,["select","checkbox-group","radio-group"])){const e=a.getElementsByClassName("option-value");"select"===a.type?W.forEach(e,t=>{e[t].parentElement.childNodes[0].checked=n.target.value===e[t].value}):(t=document.getElementsByName(n.target.name),W.forEach(t,n=>{e[n].parentElement.childNodes[0].checked=t[n].checked}))}else{const e=document.getElementById("value-"+a.id);e&&(e.value=n.target.value)}i.save.call(i)}),W.addEventListeners(l.stage,"keyup change",e=>{if(!e.target.classList.contains("fld-label"))return;const t=e.target.value||e.target.innerHTML;W.closest(e.target,".form-field").querySelector(".field-label").innerHTML=W.parsedHtml(t)}),p.on("keyup","input.error",(function(e){n(e.target).removeClass("error")})),p.on("keyup",'input[name="description"]',(function(e){const t=n(e.target).parents(".form-field:eq(0)"),a=n(".tooltip-element",t),s=n(e.target).val();if(""!==s)if(a.length)a.attr("tooltip",s).css("display","inline-block");else{const e=`<span class="tooltip-element" tooltip="${s}">?</span>`;n(".field-label",t).after(e)}else a.length&&a.css("display","none")})),p.on("change",".fld-multiple",e=>{const t=e.target.checked?"checkbox":"radio",a=n(".option-selected",n(e.target).closest(".form-elements"));return a.each(e=>a[e].type=t),t}),p.on("blur","input.fld-name",(function(e){e.target.value=W.safename(e.target.value),""===e.target.value?n(e.target).addClass("field-error").attr("placeholder",a.cannotBeEmpty):n(e.target).removeClass("field-error")})),p.on("blur","input.fld-maxlength",e=>{e.target.value=W.forceNumber(e.target.value)}),p.on("click touchstart",".icon-copy",(function(t){t.preventDefault();const a=n(t.target).parent().parent("li"),s=function(t){const a=t.attr("id"),s=t.attr("type"),l=s+"-"+(new Date).getTime(),r=t.clone();return n(".fld-name",r).val(l),r.find("[id]").each((e,t)=>{t.id=t.id.replace(a,o.lastID)}),r.find("[for]").each((e,t)=>{const n=t.getAttribute("for").replace(a,o.lastID);t.setAttribute("for",n)}),r.attr("id",o.lastID),r.attr("name",l),r.addClass("cloned"),n(".sortable-options",r).sortable(),e.typeUserEvents[s]&&e.typeUserEvents[s].onclone&&e.typeUserEvents[s].onclone(r[0]),o.lastID=i.incrementId(o.lastID),r}(a);s.insertAfter(a),i.updatePreview(s),i.save.call(i)})),p.on("click touchstart",".delete-confirm",t=>{t.preventDefault();const s=t.target.getBoundingClientRect(),o=document.body.getBoundingClientRect(),l={pageX:s.left+s.width/2,pageY:s.top-o.top-12},r=n(t.target).parents(".form-field:eq(0)").attr("id"),c=n(document.getElementById(r));if(document.addEventListener("modalClosed",(function(){c.removeClass("deleting")}),!1),e.fieldRemoveWarn){const e=W.markup("h3",a.warning),t=W.markup("p",a.fieldRemoveWarning);i.confirm([e,t],()=>i.removeField(r),l),c.addClass("deleting")}else i.removeField(r)}),p.on("click",".style-wrap button",e=>{const t=n(e.target),a=t.val(),s=t.parent().prev(".btn-style");s.val(a),t.siblings(".btn").removeClass("selected"),t.addClass("selected"),i.updatePreview(s.closest(".form-field")),i.save.call(i)}),p.on("click",".fld-required",e=>{n(e.target).closest(".form-field").find(".required-asterisk").toggle()}),p.on("click","input.fld-access",(function(e){const t=n(e.target).closest(".form-field").find(".available-roles"),a=n(e.target);t.slideToggle(250,(function(){a.is(":checked")||n("input[type=checkbox]",t).removeAttr("checked")}))})),p.on("click",".add-opt",(function(e){e.preventDefault();const t=n(e.target).closest(".field-options"),a=n('[name="multiple"]',t),s=n(".option-selected:eq(0)",t);let o=!1;o=a.length?a.prop("checked"):"checkbox"===s.attr("type");const l=s.attr("name");n(".sortable-options",t).append(L(l,!1,o))})),p.on("mouseover mouseout",".remove, .del-button",e=>n(e.target).closest("li").toggleClass("delete")),function(t=null){if((t=i.getData(t))&&t.length){for(let e=0;e<t.length;e++){const n=W.trimObj(t[e]);q(n)}x.classList.remove("empty")}else e.defaultFields&&e.defaultFields.length?(e.defaultFields.forEach(e=>q(e)),x.classList.remove("empty")):e.prepend||e.append||(x.classList.add("empty"),x.dataset.content=a.getStarted);(()=>{const t=[],a=t=>W.markup("li",e[t],{className:`disabled-field form-${t}`});return e.prepend&&!n(".disabled-field.form-prepend",l.stage).length&&(t.push(!0),p.prepend(a("prepend"))),e.append&&!n(".disabled-field.form-.append",l.stage).length&&(t.push(!0),p.append(a("append"))),i.disabledTT(l.stage),t.some(e=>!0===e)})()&&x.classList.remove("empty"),i.save()}(),p.css("min-height",h.height()),e.stickyControls.enable&&i.stickyControls(p),e.disableInjectedStyle){const e=document.getElementsByClassName("formBuilder-injected-style");W.forEach(e,t=>_(e[t]))}document.dispatchEvent(J.loaded)};var ie=n("uu/O"),ce=(n("UEVY"),n("cp0P"));function de(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Formbuilder Name is required! "),l["\u0275\u0275elementEnd"]())}function pe(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Please Enter atleast 3 Characters! "),l["\u0275\u0275elementEnd"]())}function ue(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Form Builder Name too long! "),l["\u0275\u0275elementEnd"]())}function me(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",25),l["\u0275\u0275template"](1,de,2,0,"div",22),l["\u0275\u0275template"](2,pe,2,0,"div",22),l["\u0275\u0275template"](3,ue,2,0,"div",22),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.formbuildersForm.get("name").errors.required),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.formbuildersForm.get("name").errors.minlength),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.formbuildersForm.get("name").errors.maxlength)}}function he(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",29),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275elementStart"](2,"div",13),l["\u0275\u0275element"](3,"input",30),l["\u0275\u0275elementStart"](4,"label",31),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=l["\u0275\u0275nextContext"](3);l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate"]("value",n.campaignFormData[e].name),l["\u0275\u0275propertyInterpolate"]("id",n.campaignFormData[e].name),l["\u0275\u0275property"]("formControlName",e),l["\u0275\u0275advance"](1),l["\u0275\u0275propertyInterpolate"]("for",n.campaignFormData[e].name),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.campaignFormData[e].label)}}function fe(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",26),l["\u0275\u0275elementStart"](2,"div",27),l["\u0275\u0275elementStart"](3,"p"),l["\u0275\u0275text"](4,"Campaign Form Master "),l["\u0275\u0275elementStart"](5,"span",16),l["\u0275\u0275text"](6,"*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](7,he,6,5,"div",28),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",e.formbuildersForm.controls.fields.controls)}}function ge(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",6),l["\u0275\u0275elementStart"](2,"div",7),l["\u0275\u0275elementStart"](3,"div",8),l["\u0275\u0275elementStart"](4,"form",9),l["\u0275\u0275listener"]("ngSubmit",(function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().onSubmit(t)})),l["\u0275\u0275elementStart"](5,"div",10),l["\u0275\u0275elementStart"](6,"h4",11),l["\u0275\u0275element"](7,"i",12),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",13),l["\u0275\u0275elementStart"](10,"div",14),l["\u0275\u0275elementStart"](11,"label",15),l["\u0275\u0275text"](12," Formbuilder Name "),l["\u0275\u0275elementStart"](13,"span",16),l["\u0275\u0275text"](14,"*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",17),l["\u0275\u0275element"](16,"input",18),l["\u0275\u0275template"](17,me,4,3,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"div",20),l["\u0275\u0275elementStart"](19,"div",21),l["\u0275\u0275template"](20,fe,8,1,"ng-container",22),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"div",23),l["\u0275\u0275elementStart"](22,"h2"),l["\u0275\u0275text"](23,"Build Form"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](24,"div",24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("formGroup",e.formbuildersForm),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",e.title," "),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngIf",e.formbuildersForm.get("name").errors&&e.formbuildersForm.get("name").touched),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.campaignFormData)}}function be(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"Data Loading..."),l["\u0275\u0275elementEnd"]())}let ve=(()=>{class e{constructor(e,t,n,a,s,o){this.fb=e,this.router=t,this.activeRoute=n,this.toasterService=a,this.formbuildersMasterService=s,this.cs=o,this.title="Doctor Formbuilder",this.editFlag=!0,this.errors=[],this.submitted=!1}ngOnInit(){!function(e){e.fn.formBuilder=function(t){t||(t={});const n=this,a=e.extend({},j,t,!0),{i18n:s}=a,o=Object(A.b)(a,["i18n"]);D.opts=o;const l=e.extend({},M,s,!0),r={actions:{getData:null,setData:null,save:null,showData:null,setLang:null,addField:null,removeField:null,clearFields:null},get formData(){return r.actions.getData("json")},promise:new Promise((function(t,a){(new Q).init(l).then(()=>{n.each(t=>{const a=(new le).getFormBuilder(o,n[t]);e(n[t]).data("formBuilder",a),a&&(r.actions=a.actions)}),delete r.promise,t(r)}).catch(console.error)}))};return r}}(jQuery);const e=this;this.campaign_id=this.getCurrentCampaign(),this.activeRoute.queryParams.subscribe(e=>{this.module_id=e.module_id}),this.change_in_params=this.activeRoute.params.flatMap(e=>e.id?(this.formbuildersfbId=e.id,this.formbuildersMasterService.getAll({id:e.id})):this.activeRoute.params).subscribe(t=>{e.defaultFields=[],t.data?(this.formbuildersForm=this.create_form(t.data[0]),e.defaultFields=t.data[0].form):this.formbuildersForm=this.create_form(),Object(ce.a)(this.formbuildersMasterService.getCampaignData(this.campaign_id)).subscribe(([n])=>{let a;e.campaignFormData=n.data[0].form.form,e.campaignFormId=n.data[0].form.id,e.campaignFormData.map((e,n)=>{if(t.data){const n=t.data[0].fields;n&&(a=n.indexOf(e.name)>-1)}const s=new m.f(a);this.formbuildersForm.controls.fields.push(s)});const s={onSave:function(t,n){e.onSubmit(n)},defaultFields:e.defaultFields,disabledActionButtons:["data","clear"],disableFields:["button","autocomplete","hidden","paragraph","checkbox-group","header"],inputSets:[],typeUserAttrs:{text:{pattern:{label:"Pattern",options:{"^[a-zA-Z ]{3,50}$":"Only Alphabets","^[2-9]{2}[0-9]{8}$":"Only Numbers","/[a-zA-Z0-9]{3,150}$/":"Email","^[a-zA-Z0-9 ]{3,255}$":"Alpha Numeric"}},more:{label:"More",description:"Enter a RegExp passwords must match"},unique:{type:"checkbox",label:"Unique?"},is_viewable:{type:"checkbox",label:"View in App?",checked:""},minlength:{label:"Min length",description:"Minimum Length"},exactlength:{label:"Exact length",description:"Exact Length"},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},date:{minDate:{label:"Min Date",type:"date",maxlength:"10",description:"Minimum"},maxDate:{label:"Max Date",type:"date",maxlength:"10",placeholder:"Maximum"},is_viewable:{type:"checkbox",label:"Viewable on App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},number:{is_viewable:{type:"checkbox",label:"Viewable on App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},textarea:{is_viewable:{type:"checkbox",label:"Viewable on App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},select:{is_viewable:{type:"checkbox",label:"Viewable on App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},file:{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},"radio-group":{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}}}};this.formBuilder=jQuery(".build-wrap").formBuilder(s)}),this.buildForm=!0}),this.dropdownSettings=ie.a.dropDownSettings(!0)}getCurrentCampaign(){return this.cs.getCampaignId()}create_form(e){return this.fb.group({name:[e?e.name:"",[m.B.required,m.B.minLength(3),m.B.maxLength(250)]],is_active:[e?e.is_active:"true"],formbuildersfBid:[e?e.id:""],fields:this.fb.array([])})}get formObj(){return this.formbuildersForm.controls}onSubmit(e){if(this.submitted=!0,this.formbuildersForm.invalid)return;this.formbuildersForm.value.form=e.toString();const t=this.formbuildersForm.value,n=this.formbuildersForm.value.formbuildersfBid;this.formbuildersForm.value.campaign_id=this.campaign_id,this.formbuildersForm.value.form_master_id=this.campaignFormId,t.module_id=this.module_id;const a=[];if(this.campaignFormData.map((e,n)=>{t.fields[n]&&(t.fields[n]=this.campaignFormData[n].name,a.push(this.campaignFormData[n].name))}),t.fields=a,n){const e=new FormData;for(const n in t)t[n]&&("object"==typeof t[n]?t[n].forEach((t,n)=>{t&&e.set("fields["+n+"]",t)}):e.append(n,t[n]));this.formbuildersMasterService.update(e,n).subscribe(e=>this.addUpdate("/module-formbuilder","Records Updated Successfully!"),e=>this.controlError(e))}else this.formbuildersMasterService.save(t).subscribe(e=>this.addUpdate("/module-formbuilder","Records Added Successfully!"),e=>this.controlError(e))}addUpdate(e,t){this.router.navigate([e],{queryParams:{campaign_id:this.campaign_id,module_id:this.module_id}}).then(()=>{this.toasterService.success(t,"Success!",{positionClass:"toast-top-right"})})}controlError(e){if(400===e.status)for(const t of Object.keys(e.error.error))this.errors.push(e.error.error[t])}changeCampaign(e){this.cs.setCampaignId(e.id)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](m.e),l["\u0275\u0275directiveInject"](o.c),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](p.b),l["\u0275\u0275directiveInject"](d),l["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-formbuilders-master"]],decls:7,vars:2,consts:[[3,"changeCampaign"],["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12","p-0"],[4,"ngIf","ngIfElse"],["norecord",""],[1,"card"],[1,"card-body"],[1,"px-3"],[1,"form","form-horizontal","striped-rows",3,"formGroup","ngSubmit"],[1,"form-body"],[1,"form-section"],[1,"ft-user"],[1,"form-group"],[1,"row"],["for","name",1,"col-md-3","pt-1"],[2,"color","red"],[1,"col-md-9"],["type","text","formControlName","name","maxlength","250","id","fb_name","autocomplete","off",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["id","checkbox-1",1,"form-group"],["formArrayName","fields"],[4,"ngIf"],[1,"text-center","p-3"],["id","stage1",1,"build-wrap"],[1,"invalid-feedback"],[1,"row","display-flex"],[1,"col-12"],["class","col-lg-3 col-md-3 col-sm-6 col-xs-12",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-12"],["type","checkbox",3,"formControlName","value","id"],[3,"for"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"app-topbar",0),l["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](1,"section",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275template"](4,ge,25,4,"ng-container",4),l["\u0275\u0275template"](5,be,2,0,"ng-template",null,5,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275reference"](6);l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",e)}},directives:[u.a,a.n,m.D,m.r,m.j,m.b,m.q,m.h,m.m,m.d,a.m,m.a],styles:['[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){position:absolute;left:-9999px}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;padding-left:2.85em;cursor:pointer;padding-top:.2em}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:2em;height:2em;border:2px solid #f57c00;background:#fff;border-radius:4px;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after, [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{content:"\\2713\\0020";position:absolute;top:.15em;left:.18em;font-size:2em;line-height:.8;color:#f57c00;transition:all .2s;font-family:Lucida Sans Unicode,Arial Unicode MS,Arial}[type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{opacity:0;transform:scale(0)}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1;transform:scale(1)}[type=checkbox][_ngcontent-%COMP%]:disabled:checked + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:disabled:not(:checked) + label[_ngcontent-%COMP%]:before{box-shadow:none;border-color:#bbb;background-color:#ddd}[type=checkbox][_ngcontent-%COMP%]:disabled:checked + label[_ngcontent-%COMP%]:after{color:#999}[type=checkbox][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{color:#aaa}[type=checkbox][_ngcontent-%COMP%]:checked:focus + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:not(:checked):focus + label[_ngcontent-%COMP%]:before{border:2px solid #f57c00}label[_ngcontent-%COMP%]:hover:before{border:2px solid #ffa000!important}.row.display-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.row.display-flex[_ngcontent-%COMP%] > [class*=col-][_ngcontent-%COMP%]{flex-grow:1}#checkbox-1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{word-break:break-word}']}),e})();const ye=[{path:"",component:N,data:{title:"Formbuilders",permission:"list-form-secondary"}},{path:"add",component:ve,data:{title:"Formbuilders",permission:"create-form-secondary"}},{path:"edit/:id",component:ve,data:{title:"Formbuilders",permission:"modify-form-secondary"}}];let xe=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(ye)],o.g]}),e})();var we=n("l1pd"),ke=n("Egam"),qe=n("R9Cn"),Ce=n("PCNd");let Ee=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[we.a],imports:[[a.c,xe,s.j,m.l,s.i,ke.b.forRoot(),qe.b,m.y,Ce.a]]}),e})()}}]);