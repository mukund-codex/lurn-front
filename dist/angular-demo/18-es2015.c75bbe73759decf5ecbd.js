(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"6Br6":function(e,t,n){"use strict";var a=n("HDdC"),r=n("VRyK");a.a.merge=r.a},UEVY:function(e,t,n){"use strict";var a=n("HDdC"),r=n("5+tZ");function i(e,t=Number.POSITIVE_INFINITY){return Object(r.a)(e,t)(this)}a.a.prototype.mergeMap=i,a.a.prototype.flatMap=i},kyOO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("G5QB"),r=n("fXoL"),i=n("tk/3");let o=(()=>{class e extends a.a{constructor(e){super("language",e),this.http=e}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](i.b))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},l1pd:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("G5QB"),r=n("2Vo4"),i=n("fXoL"),o=n("tk/3"),l=n("kyOO");let s=(()=>{class e extends a.a{constructor(e,t){super("module",e),this.http=e,this.languageService=t,this.messageSource=new r.a(""),this.currentMessage=this.messageSource.asObservable(),this.messageSource2=new r.a(""),this.currentMessage2=this.messageSource.asObservable()}getLanguages(){return this.languageService.allRecords()}setModuleId(e){this.module_id=e,this.getAll({id:this.module_id}).subscribe(e=>{this.moduleData=e,this.module_type=e.data[0].type,this.messageSource.next(e.data[0].start_date),this.messageSource2.next(e.data[0].end_date)})}getModuleType(){return this.module_type}getModuleId(){return this.module_id}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.b),i["\u0275\u0275inject"](l.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"uu/O":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{static removeNullKeys(e){return Object.keys(e).reduce((t,n)=>{const a=t;return void 0!==e[n]&&(a[n]=e[n]),a},{})}static merge(...e){let t={};return e.forEach(e=>{t=Object.assign(t,e)}),t}static setValueCampaign(e){a.campaign_id=e}getValueCampaign(){return a.campaign_id}static dropDownSettings(e,t,n,a){return{singleSelection:e||!1,idField:n||"id",textField:a||"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:t||!0}}}},zWYm:function(e,t,n){"use strict";n.r(t),n.d(t,"CblocksModule",(function(){return Ve}));var a=n("ofXK"),r=n("1kSV"),i=n("tyNb"),o=(n("UEVY"),n("uu/O")),l=n("quSY"),s=n("zE9r"),d=(n("6Br6"),n("lJxs")),m=n("bOdf"),c=n("Kj3r"),p=n("/uUt"),u=n("eIep"),g=n("fXoL"),f=n("l1pd"),h=n("5eHb"),v=n("hHWK"),S=n("5Lta"),b=n("QJFE"),x=n("3Pt+");const y=["searchForm"];function E(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",14),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().export()})),g["\u0275\u0275element"](1,"i",15),g["\u0275\u0275elementEnd"]()}}function _(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275element"](1,"div"),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275attribute"]("colSpan",6))}function C(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",40),g["\u0275\u0275element"](1,"img",41),g["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",40),g["\u0275\u0275element"](1,"img",42),g["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",40),g["\u0275\u0275element"](1,"img",43),g["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"a",44),g["\u0275\u0275listener"]("confirm",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).delete(t.id)})),g["\u0275\u0275element"](1,"i",45),g["\u0275\u0275elementEnd"]()}if(2&e){g["\u0275\u0275nextContext"](3);const e=g["\u0275\u0275reference"](12);g["\u0275\u0275property"]("swal",e)}}function F(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",46),g["\u0275\u0275elementStart"](1,"span",47),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).listForms(t.id)})),g["\u0275\u0275text"](2,"Form Added"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](3,"img",48),g["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",49),g["\u0275\u0275elementStart"](1,"span",47),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).addForm(t.id)})),g["\u0275\u0275text"](2,"Add Form "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"div",52),g["\u0275\u0275elementStart"](2,"span",53),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).$implicit;return g["\u0275\u0275nextContext"](2).listMasterFile(t.id)})),g["\u0275\u0275text"](3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](4,"br"),g["\u0275\u0275text"](5," Master Files "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",54),g["\u0275\u0275elementStart"](7,"span",47),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).$implicit;return g["\u0275\u0275nextContext"](2).addMasterFile(t.id)})),g["\u0275\u0275element"](8,"img",55),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](9,"br"),g["\u0275\u0275text"](10," Master File "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2).$implicit;g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](e.masterfile_count)}}function k(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275elementStart"](1,"div",56),g["\u0275\u0275elementStart"](2,"span",53),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).$implicit;return g["\u0275\u0275nextContext"](2).listTemplate(t.id)})),g["\u0275\u0275text"](3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](4,"br"),g["\u0275\u0275text"](5," Templates "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",54),g["\u0275\u0275elementStart"](7,"span",47),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).$implicit;return g["\u0275\u0275nextContext"](2).addTemplate(t.id)})),g["\u0275\u0275element"](8,"img",55),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](9,"br"),g["\u0275\u0275text"](10," Template "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2).$implicit;g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](e.template_count)}}function V(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"div",50),g["\u0275\u0275template"](2,O,11,1,"div",51),g["\u0275\u0275elementStart"](3,"div",50),g["\u0275\u0275template"](4,k,11,1,"div",51),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf","video"==e.type||"gif"==e.type),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf","image"==e.type)}}const M=function(e){return[e]},P=function(e){return{campaign_id:e}};function q(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",26),g["\u0275\u0275elementStart"](1,"div",27),g["\u0275\u0275elementStart"](2,"div",28),g["\u0275\u0275elementStart"](3,"div",29),g["\u0275\u0275template"](4,C,2,0,"div",30),g["\u0275\u0275template"](5,w,2,0,"div",30),g["\u0275\u0275template"](6,I,2,0,"div",30),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",31),g["\u0275\u0275elementStart"](8,"a",32),g["\u0275\u0275element"](9,"i",33),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](10,D,2,1,"a",34),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",35),g["\u0275\u0275elementStart"](12,"h4",36),g["\u0275\u0275text"](13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",37),g["\u0275\u0275template"](15,F,4,0,"div",38),g["\u0275\u0275template"](16,j,3,0,"div",39),g["\u0275\u0275template"](17,V,5,2,"div",19),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf","gif"==e.type),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf","video"==e.type),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf","image"==e.type),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction1"](10,M,"/cblocks/edit/"+e.id))("queryParams",g["\u0275\u0275pureFunction1"](12,P,n.campaign_id)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",n.showDelete),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](e.name),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",1==e.is_form_exist),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0==e.is_form_exist),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",1==e.is_form_exist)}}function N(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"div",16),g["\u0275\u0275elementStart"](2,"div",17),g["\u0275\u0275elementStart"](3,"b",18),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](5,_,2,1,"div",19),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",20),g["\u0275\u0275elementStart"](7,"div",21),g["\u0275\u0275elementStart"](8,"div",22),g["\u0275\u0275element"](9,"img",23),g["\u0275\u0275elementStart"](10,"h5",24),g["\u0275\u0275text"](11,"Add Module"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](12,q,18,14,"div",25),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate1"]("Total Records : ",null==e.meta||null==e.meta.pagination?null:e.meta.pagination.total,""),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!e.data.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("routerLink","/cblocks/add")("queryParams",g["\u0275\u0275pureFunction1"](5,P,n.campaign_id)),g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngForOf",e.data)}}function L(e,t){1&e&&g["\u0275\u0275text"](0,"Loading Data...")}let R=(()=>{class e{constructor(e,t,n,a,r){this.cblockService=e,this.router=t,this.activeRoute=n,this.toasterService=a,this.cs=r,this.parameters={},this.searchObj={},this.subscription=new l.a,this.uploadFields=[],this.showExport=!1,this.showDelete=!1}getCurrentCampaign(){return this.cs.getCampaignId()}ngOnInit(){this.title=this.activeRoute.snapshot.data.title,this.campaign_id=this.getCurrentCampaign(),this.campaign_id&&(this.parameters.campaign_id=this.campaign_id);const e=this.cblockService.checkPermissionExist(["export-module","remove-module"]);this.showExport=e[0],this.showDelete=e[1]}ngAfterViewInit(){this.subscription=s.a.merge(this.activeRoute.queryParams.pipe(Object(d.a)(e=>(this.parameters=o.a.merge({},this.parameters,e),this.parameters)),Object(m.a)(e=>this.loadData(e))),this.search()).subscribe(e=>{this.records=e,this.uploadFields=e.fields})}loadData(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.cblockService.getAll(e)}getLanguages(e){for(let t=0,n=e.data.length;t<n;t++)e.data[t].language_names=this.multi_implode(e.data[t].languages,",");return e}multi_implode(e,t){return e.map(e=>e.name).join(t)}pageChange(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id},queryParamsHandling:"merge"})}delete(e){const t=new FormData;this.cblockService.delete(t,e).subscribe(e=>{this.toasterService.success("Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),this.search()},e=>{this.handleError(e)})}handleError(e){400===e.status?this.toasterService.error(e.error.message,"Error!",{positionClass:"toast-top-right"}):alert("Problems while deleting records!")}addTemplate(e){this.router.navigate(["template/add"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}listTemplate(e){this.router.navigate(["template/"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}addForm(e){this.router.navigate(["module-formbuilder/add"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}listForms(e){this.router.navigate(["module-formbuilder"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}addMasterFile(e){this.router.navigate(["master/add"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}listMasterFile(e){this.router.navigate(["master/"],{queryParams:{module_id:e,campaign_id:this.campaign_id}})}export(){this.searchObj.campaign_id=this.getCurrentCampaign();const e=this.cblockService.getCurrentDate();this.cblockService.exportData(this.searchObj,"Module-"+e)}search(){return this.searchObj=Object.assign(this.module_name?{name:this.module_name}:{},this.parameters),this.cblockService.getAll(this.searchObj).subscribe(e=>{this.records=this.getLanguages(e)}),this.sf.valueChanges.pipe(Object(c.a)(400),Object(p.a)(),Object(d.a)(e=>(this.searchObj=o.a.removeNullKeys(e),this.parameters=o.a.merge({},this.parameters,this.searchObj),this.parameters)),Object(u.a)(e=>this.loadData(e)))}changeCampaign(e){this.cs.setCampaignId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.campaign_id=this.campaign_id,this.sf.form.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](f.a),g["\u0275\u0275directiveInject"](i.c),g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](h.b),g["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-cblocks"]],viewQuery:function(e,t){var n;1&e&&g["\u0275\u0275viewQuery"](y,!0),2&e&&g["\u0275\u0275queryRefresh"](n=g["\u0275\u0275loadQuery"]())&&(t.sf=n.first)},decls:19,vars:5,consts:[[3,"changeCampaign"],["id","simple-table"],[1,"row"],[1,"col-sm-12",2,"margin-top","30px"],[1,"card-border-shadow-0"],[1,"card-title",2,"float","right"],["style","color:#fff !important;","class","btn btn-raised btn-orange m-2 ng-star-inserted",3,"click",4,"ngIf"],[1,""],["title","Are you sure ?","text","This cannot be undone","icon","question",3,"showCancelButton","focusCancel"],["deleteSwal",""],["name","searchForm",1,""],["searchForm","ngForm"],[4,"ngIf","ngIfElse"],["loading",""],[1,"btn","btn-raised","btn-orange","m-2","ng-star-inserted",2,"color","#fff !important",3,"click"],["_ngcontent-gde-c137","",1,"ft-download","white","warning","font-medium-1",2,"color","#fff !important"],[1,"col-lg-12","col-sm-12"],[2,"float","right"],[1,"tot-record"],[4,"ngIf"],[1,"col-lg-4","col-sm-6","col-container",3,"routerLink","queryParams"],[1,"card","col-cell","border-orange"],[1,"card-header","text-center","p-4"],["src","assets/img/logos/add-button-tp-bg.png","alt",""],[2,"color","#F7941E"],["class","col-lg-4 col-sm-6 col-container",4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6","col-container"],[1,"card","col-cell"],[1,"row","p-1"],[1,"col-6","text-left"],["class","a float-left",4,"ngIf"],[1,"col-6","text-right"],[1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"routerLink","queryParams"],[1,"ft-edit-2","info","font-medium-1","mr-2"],["class","ng2-smart-action ng2-smart-action-delete-delete",3,"swal","confirm",4,"ngIf"],[1,"card-header","p-1","flex-column","text-center",2,"flex","auto"],[1,"a"],[1,"card-block","container"],["class","p-2","style","border-top: 1px solid #f3f1f1; border-bottom: 1px solid #f3f1f1; ",4,"ngIf"],["class","p-2 text-center","style","border-top: 1px solid #f3f1f1; border-bottom: 1px solid #f3f1f1; ",4,"ngIf"],[1,"a","float-left"],["src","assets/img/logos/gif-icon.png"],["src","assets/img/logos/video-icon.png"],["src","assets/img/logos/poster-icon.png"],[1,"ng2-smart-action","ng2-smart-action-delete-delete",3,"swal","confirm"],[1,"ft-x","danger","font-medium-1","mr-2"],[1,"p-2",2,"border-top","1px solid #f3f1f1","border-bottom","1px solid #f3f1f1"],[3,"click"],["src","assets/img/logos/green-check.png",1,"float-right"],[1,"p-2","text-center",2,"border-top","1px solid #f3f1f1","border-bottom","1px solid #f3f1f1"],[1,"container"],["class","row",4,"ngIf"],[1,"col-lg-6","col-sm-6","col-6","text-center","p-1",2,"border-right","1px solid #f3f1f1","border-bottom","1px solid #f3f1f1"],[1,"file-counter-container",3,"click"],[1,"col-lg-6","col-sm-6","col-6","text-center","p-1",2,"border-bottom","1px solid #f3f1f1"],["src","assets/img/logos/add-button-tp-bg.png"],[1,"col-lg-6","col-sm-6","col-6","text-center","p-2",2,"border-right","1px solid #f3f1f1"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"app-topbar",0),g["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](1,"section",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"div",4),g["\u0275\u0275elementStart"](5,"div",5),g["\u0275\u0275template"](6,E,2,0,"button",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",7),g["\u0275\u0275elementStart"](8,"h4",7),g["\u0275\u0275text"](9,"Module"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](10,"hr"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](11,"swal",8,9),g["\u0275\u0275elementStart"](13,"form",10,11),g["\u0275\u0275elementStart"](15,"div",2),g["\u0275\u0275template"](16,N,13,7,"ng-container",12),g["\u0275\u0275template"](17,L,1,0,"ng-template",null,13,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275reference"](18);g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.showExport),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",t.records)("ngIfElse",e)}},directives:[S.a,a.n,b.a,x.D,x.r,x.s,i.d,a.m,i.f,b.b],styles:[".col-cell[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.125)}.border-orange[_ngcontent-%COMP%]{border:2px solid #f7941e}.a[_ngcontent-%COMP%]{display:inline}.file-counter-container[_ngcontent-%COMP%]{font-size:30px;font-weight:600}.card[_ngcontent-%COMP%]{padding:2px}.col-container[_ngcontent-%COMP%]{display:flex;width:100%;cursor:pointer}.border-orange[_ngcontent-%COMP%]{border:4px solid #f7941e!important}.col-cell[_ngcontent-%COMP%]{flex:1;display:flex;border-radius:10px;border:4px solid #d6d5cc;transition:background-color .5s;transition:border .5s}.col-cell[_ngcontent-%COMP%]:hover{background-color:#fffde9;border:4px solid #f7941e}"]}),e})();n("qnbw");var A=n("wd/R");class T{static dateVaidator(e){let t={};e.value&&(t=e.value.day+"-"+e.value.month+"-"+e.value.year);var n=new Date,a=n.getMonth(),r=n.getDate(),i=n.getFullYear(),o=new Date(i,a,r);return e&&e.value&&!A(t,"DD-MM-YYYY").isValid()||e&&e.value&&e.value.year&&4!=e.value.year.toString().length||e&&e.value&&e.value.year&&4==e.value.year.toString().length&&o>new Date('"'+e.value.year+"-"+e.value.month+"-"+e.value.day+'"')?{dateVaidator:!0}:null}}var B=n("VMA6"),G=n("IrUG"),$=n("Egam"),Y=n("TnO9"),Q=n("R9Cn");const U=["searchForm"];function z(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"p",18),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](e)}}function K(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Module Name is required!"),g["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Module Name must be minimum 3 characters!"),g["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Module Name must be maximum 50 characters!"),g["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Please Enter a valid Module Name!"),g["\u0275\u0275elementEnd"]())}function W(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,K,2,0,"div",22),g["\u0275\u0275template"](2,H,2,0,"div",22),g["\u0275\u0275template"](3,J,2,0,"div",22),g["\u0275\u0275template"](4,X,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.name.errors.required),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.name.errors.minlength),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.name.errors.maxlength),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.name.errors.pattern)}}function Z(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275element"](1,"input",51),g["\u0275\u0275elementEnd"]())}function ee(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.error_messages.name," ")}}function te(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span"),g["\u0275\u0275elementStart"](1,"p"),g["\u0275\u0275text"](2,"Previously Selected Logo :"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](3,"img",52),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](3),g["\u0275\u0275propertyInterpolate"]("src",e.currentLogo,g["\u0275\u0275sanitizeUrl"])}}function ne(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.error_messages.logo," ")}}function ae(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Please Select Type!"),g["\u0275\u0275elementEnd"]())}function re(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,ae,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.type.errors.required)}}function ie(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275element"](1,"ng-multiselect-dropdown",53),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("placeholder","Select Group ")("settings",n.dropdownSettingsSingleSelect)("data",e.data)}}function oe(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Group Name is required!"),g["\u0275\u0275elementEnd"]())}function le(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,oe,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.group_id.errors.required)}}function se(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Start Date is required!"),g["\u0275\u0275elementEnd"]())}function de(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1," Invalid Date! "),g["\u0275\u0275elementEnd"]())}function me(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,se,2,0,"div",22),g["\u0275\u0275template"](2,de,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.start_date.errors.required),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.start_date.errors.dateVaidator)}}function ce(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.error_messages.start_date," ")}}function pe(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"End Date is required!"),g["\u0275\u0275elementEnd"]())}function ue(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1," Invalid Date! "),g["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,pe,2,0,"div",22),g["\u0275\u0275template"](2,ue,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.end_date.errors.required),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.end_date.errors.dateVaidator)}}function fe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.error_messages.end_date," ")}}function he(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"ng-multiselect-dropdown",54),g["\u0275\u0275listener"]("onSelect",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).setDefaultLanguages(t)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("placeholder","Select Languages")("settings",n.dropdownSettings)("data",e.data)}}function ve(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Please Select atleast one language!"),g["\u0275\u0275elementEnd"]())}function Se(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,ve,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.languages.errors.required)}}function be(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1,"Please Select Default language!"),g["\u0275\u0275elementEnd"]())}function xe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",50),g["\u0275\u0275template"](1,be,2,0,"div",22),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](3);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.formObj.is_default_language.errors.required)}}function ye(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275element"](1,"ng-multiselect-dropdown",55),g["\u0275\u0275template"](2,xe,2,1,"div",21),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("placeholder","Select Default Language")("settings",e.dropdownSettingsLanguage)("data",e.default_language),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.is_default_language.errors)}}function Ee(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0,56),g["\u0275\u0275elementStart"](1,"div",15),g["\u0275\u0275elementStart"](2,"div",16),g["\u0275\u0275elementStart"](3,"label",57),g["\u0275\u0275text"](4," Color "),g["\u0275\u0275elementStart"](5,"span",18),g["\u0275\u0275text"](6,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",19),g["\u0275\u0275elementStart"](8,"input",58),g["\u0275\u0275listener"]("colorPickerChange",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).color1=t}))("colorPickerChange",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).colorChanged(t)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.index,n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("formGroupName",e),g["\u0275\u0275advance"](8),g["\u0275\u0275styleProp"]("background",n.color1,g["\u0275\u0275defaultStyleSanitizer"]),g["\u0275\u0275property"]("colorPicker",n.color1)}}const _e=function(e){return{"is-invalid":e}},Ce=function(){return["/cblocks"]},we=function(e){return{campaign_id:e}};function Ie(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"form",9),g["\u0275\u0275listener"]("ngSubmit",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().onSubmit()})),g["\u0275\u0275template"](2,z,3,1,"div",10),g["\u0275\u0275elementStart"](3,"div",11),g["\u0275\u0275elementStart"](4,"h4",12),g["\u0275\u0275element"](5,"i",13),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"span",14),g["\u0275\u0275elementStart"](8,"b"),g["\u0275\u0275text"](9,"Note : * Denotes the mandatory fields!"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",15),g["\u0275\u0275elementStart"](11,"div",16),g["\u0275\u0275elementStart"](12,"label",17),g["\u0275\u0275text"](13," Module Name "),g["\u0275\u0275elementStart"](14,"span",18),g["\u0275\u0275text"](15,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"div",19),g["\u0275\u0275element"](17,"input",20),g["\u0275\u0275template"](18,W,5,4,"div",21),g["\u0275\u0275template"](19,Z,2,0,"div",22),g["\u0275\u0275template"](20,ee,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",15),g["\u0275\u0275elementStart"](22,"div",16),g["\u0275\u0275elementStart"](23,"label",23),g["\u0275\u0275text"](24," Module Logo "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](25,"div",19),g["\u0275\u0275elementStart"](26,"input",24),g["\u0275\u0275listener"]("change",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().logoChange(t.target.files)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](27,te,4,1,"span",22),g["\u0275\u0275template"](28,ne,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"div",15),g["\u0275\u0275elementStart"](30,"div",16),g["\u0275\u0275elementStart"](31,"label",25),g["\u0275\u0275text"](32," Type "),g["\u0275\u0275elementStart"](33,"span",18),g["\u0275\u0275text"](34,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"div",19),g["\u0275\u0275element"](36,"ng-multiselect-dropdown",26),g["\u0275\u0275template"](37,re,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"div",15),g["\u0275\u0275elementStart"](39,"div",16),g["\u0275\u0275elementStart"](40,"label",27),g["\u0275\u0275text"](41," Group Name "),g["\u0275\u0275elementStart"](42,"span",18),g["\u0275\u0275text"](43,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](44,"div",19),g["\u0275\u0275template"](45,ie,2,3,"ng-container",22),g["\u0275\u0275pipe"](46,"async"),g["\u0275\u0275template"](47,le,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](48,"div",15),g["\u0275\u0275elementStart"](49,"div",16),g["\u0275\u0275elementStart"](50,"label",28),g["\u0275\u0275text"](51," Start Date "),g["\u0275\u0275elementStart"](52,"span",18),g["\u0275\u0275text"](53,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"div",29),g["\u0275\u0275element"](55,"input",30,31),g["\u0275\u0275elementStart"](57,"div",32),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275reference"](56).toggle()})),g["\u0275\u0275element"](58,"i",33),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](59,me,3,2,"div",21),g["\u0275\u0275template"](60,ce,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](61,"div",15),g["\u0275\u0275elementStart"](62,"div",16),g["\u0275\u0275elementStart"](63,"label",34),g["\u0275\u0275text"](64," End Date "),g["\u0275\u0275elementStart"](65,"span",18),g["\u0275\u0275text"](66,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](67,"div",29),g["\u0275\u0275element"](68,"input",35,36),g["\u0275\u0275elementStart"](70,"div",32),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275reference"](69).toggle()})),g["\u0275\u0275element"](71,"i",33),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](72,ge,3,2,"div",21),g["\u0275\u0275template"](73,fe,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](74,"div",15),g["\u0275\u0275elementStart"](75,"div",16),g["\u0275\u0275elementStart"](76,"label",37),g["\u0275\u0275text"](77," Language Name "),g["\u0275\u0275elementStart"](78,"span",18),g["\u0275\u0275text"](79,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](80,"div",19),g["\u0275\u0275template"](81,he,2,3,"ng-container",22),g["\u0275\u0275pipe"](82,"async"),g["\u0275\u0275template"](83,Se,2,1,"div",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](84,"div",15),g["\u0275\u0275elementStart"](85,"div",16),g["\u0275\u0275elementStart"](86,"label",38),g["\u0275\u0275text"](87," Default Language "),g["\u0275\u0275elementStart"](88,"span",18),g["\u0275\u0275text"](89,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](90,"div",19),g["\u0275\u0275template"](91,ye,3,4,"ng-container",22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerStart"](92,39),g["\u0275\u0275template"](93,Ee,9,4,"ng-container",40),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementStart"](94,"div",15),g["\u0275\u0275elementStart"](95,"div",16),g["\u0275\u0275elementStart"](96,"label",41),g["\u0275\u0275text"](97," Is Active ? "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](98,"div",19),g["\u0275\u0275elementStart"](99,"div",42),g["\u0275\u0275element"](100,"ui-switch",43),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](101,"div",44),g["\u0275\u0275element"](102,"div",45),g["\u0275\u0275elementStart"](103,"div",19),g["\u0275\u0275elementStart"](104,"button",46),g["\u0275\u0275element"](105,"i",47),g["\u0275\u0275text"](106," Cancel "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](107,"button",48),g["\u0275\u0275element"](108,"i",49),g["\u0275\u0275text"](109," Save "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("formGroup",e.moduleForm),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",e.errors),g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate1"](" ",e.title," "),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction1"](34,_e,e.submitted&&e.formObj.name.errors)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.name.errors),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",1==e.editFlag),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.error_messages.name),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",e.module_id&&e.currentLogo),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.error_messages.logo),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("placeholder","Select Type")("settings",e.dropdownSettingsType)("disabled",e.isDropdownDisabled)("data",e.types),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.type.errors),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",g["\u0275\u0275pipeBind1"](46,30,e.groupData)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.group_id.errors),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction1"](36,_e,e.submitted&&e.formObj.start_date.errors))("minDate",e.minDate),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.start_date.errors),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.error_messages.start_date),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("minDate",e.minDate)("ngClass",g["\u0275\u0275pureFunction1"](38,_e,e.submitted&&e.formObj.end_date.errors)),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.end_date.errors),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.error_messages.end_date),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",g["\u0275\u0275pipeBind1"](82,32,e.languages)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.submitted&&e.formObj.languages.errors),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",e.default_language),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",e.settings.controls),g["\u0275\u0275advance"](11),g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](40,Ce))("queryParams",g["\u0275\u0275pureFunction1"](41,we,e.campaign_id))}}function De(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"p"),g["\u0275\u0275text"](1,"Data Loading..."),g["\u0275\u0275elementEnd"]())}let Fe=(()=>{class e{constructor(e,t,n,a,r,i,o,s){this.campService=e,this.cblocksService=t,this.fb=n,this.router=a,this.activeRoute=r,this.toasterService=i,this.geoService=o,this.cs=s,this.submitted=!1,this.editFlag=!1,this.default_language=[],this.formData=new FormData,this.errors=[],this.uploadFields=[],this.color1="#ffffff",this.error_messages=[],this.minDate={},this.isDropdownDisabled=!1,this.logo=null,this.subscription=new l.a,this.types=[{id:"image",name:"image"},{id:"gif",name:"gif"},{id:"video",name:"video"}],this.parameters={},this.searchObj={}}getCurrentCampaign(){return this.cs.getCampaignId()}ngOnInit(){this.campaign_id=this.getCurrentCampaign(),this.dropdownSettings=o.a.dropDownSettings(),this.dropdownSettingsType=o.a.dropDownSettings(!0),this.dropdownSettingsCompany=o.a.dropDownSettings(!0),this.dropdownSettingsLanguage=o.a.dropDownSettings(!0);const e=new Date;this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.default_language=[],this.campaign_id&&(this.parameters.campaign_id=this.campaign_id),this.title=this.activeRoute.snapshot.data.title,this.buildForm=!1,this.languages=this.cblocksService.getLanguages(),this.change_in_params=this.activeRoute.params.flatMap(e=>e.id?(this.camp_id=e.id,this.campService.getAll({id:e.id})):this.activeRoute.params),this.change_in_params=this.activeRoute.params.flatMap(e=>e.id?(this.module_id=e.id,this.cblocksService.getAll({id:e.id})):this.activeRoute.params).subscribe(e=>{e.data?(this.editFlag=!0,this.default_language=e.data[0].languages,this.moduleForm=this.create_form(e.data[0]),this.currentLogo=e.data[0].logo,e.data[0].languages.forEach((e,t)=>{e.pivot.is_default&&(this.isDropdownDisabled=!0,this.moduleForm.controls.is_default_language.setValue([e]),this.moduleForm.controls.type.disable())})):this.moduleForm=this.create_form(),this.buildForm=!0})}getCampaign(e){"object"==typeof e&&(e=e.id),e?(this.campaignData=this.campService.getCampaignFromCompany(e),this.modulesData=this.campService.getModules()):(this.campaignData=this.campService.getCampaignFromCompany(this.moduleForm.value.company_id),this.modulesData=this.campService.getModules())}getGroup(e){"object"==typeof e&&(e=e.id),this.groupData=this.campService.getGroupFromcampaign(e)}create_form(e){const t=e?[{id:e.type,name:e.type}]:"";let n=[],a=[];return this.dropdownSettingsSingleSelect=o.a.dropDownSettings(!0,!0),this.getGroup(this.campaign_id),e&&(this.isDropdownDisabled=!0,this.selected_type=t,n=e.start_date.split("-"),a=e.end_date.split("-")),this.fb.group({start_date:[e?{day:+n[2],month:+n[1],year:+n[0]}:"",[x.B.required,T.dateVaidator]],end_date:[e?{day:+a[2],month:+a[1],year:+a[0]}:"",[x.B.required,T.dateVaidator]],name:[e?e.name:"",[x.B.required,x.B.maxLength(50),x.B.minLength(3),x.B.pattern("^([a-zA-Z0-9 .])+$")]],id:[e?e.id:""],logo:[],is_active:[e?String(e.is_active):"true"],group_id:[e?[e.group]:"",[x.B.required]],settings:this.fb.array([this.setting_arr(e)]),is_default_language:[e?e.default:"",[x.B.required]],languages:[e?e.languages:"",[x.B.required]],type:[e?t:"",[x.B.required]]})}setting_arr(e){return this.fb.group({color:[e&&e.settings?e.settings.color:""],limit_per_user:[e&&e.settings?e.settings.limit_per_user:"",[x.B.pattern("^[0-9]*$")]],is_doctor_editable:[!e||!e.settings||e.settings.is_doctor_editable],is_doctor_add:[!e||!e.settings||e.settings.is_doctor_add]})}colorChanged(e){this.settings.controls[0].get("color").patchValue(e)}get settings(){return this.moduleForm.get("settings")}get formObj(){return this.moduleForm.controls}setDefaultLanguages(e){this.default_language=this.moduleForm.value.languages}onSubmit(){this.submitted=!0,this.moduleForm.invalid||(this.moduleForm.value.languages.length&&(this.moduleForm.value.languages=this.moduleForm.value.languages.map(e=>e.id)),"object"==typeof this.moduleForm.value.group_id&&(this.moduleForm.value.group_id=this.moduleForm.value.group_id[0].id),this.moduleForm.value.type=this.module_id?this.selected_type[0].id:this.moduleForm.value.type[0].id,this.moduleForm.value.is_default_language=this.moduleForm.value.is_default_language[0].id,this.formData=this.cblocksService.convertToFormData(this.moduleForm.value),this.logo?this.formData.set("logo",this.logo,this.logo.name):this.formData.delete("logo"),this.formData.set("campaign_id",this.campaign_id),this.module_id?this.update():this.save())}save(){this.cblocksService.save(this.formData).subscribe(e=>{this.router.navigate(["/cblocks"],{queryParams:{campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Added Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.moduleForm)})}changeCampaign(e){this.cs.setCampaignId(e.id),this.campaign_id=this.cs.getCampaignId(),this.parameters.campaign=this.campaign_id,this.sf.form.updateValueAndValidity()}upload(e){const t=new FormData;t.set("upload_file",e,e.name),this.geoService.upload(t).subscribe(e=>this.closePopup(e),e=>this.controlError(e))}logoChange(e){this.logo=e.length?e.item(0):null}update(){this.cblocksService.update(this.formData,this.module_id).subscribe(e=>{this.router.navigate(["/cblocks"],{queryParams:{campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Updated Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.moduleForm)})}controlError(e){if(400===e.status){for(const t of Object.keys(e.error.error))this.errors.push(e.error.error[t]);alert(e.error.error.upload_file)}}closePopup(e){this.toasterService.success(e.data.count+" Records Uploaded Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()}handleError(e,t){400===e.status?this.error_messages=e.error.error:alert("Problems while saving data")}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](B.a),g["\u0275\u0275directiveInject"](f.a),g["\u0275\u0275directiveInject"](x.e),g["\u0275\u0275directiveInject"](i.c),g["\u0275\u0275directiveInject"](i.a),g["\u0275\u0275directiveInject"](h.b),g["\u0275\u0275directiveInject"](G.a),g["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form"]],viewQuery:function(e,t){var n;1&e&&g["\u0275\u0275viewQuery"](U,!0),2&e&&g["\u0275\u0275queryRefresh"](n=g["\u0275\u0275loadQuery"]())&&(t.sf=n.first)},decls:10,vars:2,consts:[[3,"changeCampaign"],["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"px-3"],[4,"ngIf","ngIfElse"],["norecord",""],[1,"form","form-horizontal","striped-rows",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"form-body"],[1,"form-section"],[1,"ft-user"],[2,"text-align","center","color","red"],[1,"form-group"],[1,"row"],["for","module_name",1,"col-md-3","pt-1"],[2,"color","red"],[1,"col-md-9"],["type","text","id","module_name","formControlName","name","maxlength","50",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf"],["for","logo",1,"col-md-3","pt-1"],["type","file","formControlName","logo","accept","image/x-png,image/gif,image/jpeg,image/jpg","id","logo",1,"form-control",3,"change"],["for","type",1,"col-md-3","pt-1"],["formControlName","type",3,"placeholder","settings","disabled","data"],["for","group_id",1,"col-md-3","pt-1"],["for","start_date",1,"col-md-3","pt-1"],[1,"col-md-9","input-group"],["placeholder","dd-mm-yyyy","formControlName","start_date","ngbDatepicker","",1,"form-control",3,"ngClass","minDate"],["start_date","ngbDatepicker"],[1,"input-group-addon",3,"click"],[1,"fa","fa-calendar",2,"cursor","pointer"],["for","end_date",1,"col-md-3","pt-1"],["placeholder","dd-mm-yyyy","formControlName","end_date","ngbDatepicker","",1,"form-control",3,"minDate","ngClass"],["end_date","ngbDatepicker"],["for","languages",1,"col-md-3","pt-1"],["for","is_default_language",1,"col-md-3","pt-1"],["formArrayName","settings"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-3","label-control"],[1,"input-group"],["defaultBgColor","#ff4d4d","labelOn","Yes","labelOff","No","formControlName","is_active"],[1,"form-actions","center"],[1,"col-md-3"],["type","button",1,"btn","btn-raised","btn-orange","mr-1",3,"routerLink","queryParams"],[1,"ft-x"],["type","submit",1,"btn","btn-raised","btn-primary"],[1,"fa","fa-check-square-o"],[1,"invalid-feedback"],["type","hidden","formControlName","id"],[2,"width","150px",3,"src"],["formControlName","group_id",3,"placeholder","settings","data"],["formControlName","languages",3,"placeholder","settings","data","onSelect"],["formControlName","is_default_language",3,"placeholder","settings","data"],[3,"formGroupName"],["for","color",1,"col-md-3","pt-1"],["formControlName","color","id","color","autocomplete","off",1,"form-control",3,"colorPicker","colorPickerChange"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"app-topbar",0),g["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](1,"section",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"div",4),g["\u0275\u0275elementStart"](5,"div",5),g["\u0275\u0275elementStart"](6,"div",6),g["\u0275\u0275template"](7,Ie,110,43,"ng-container",7),g["\u0275\u0275template"](8,De,2,0,"ng-template",null,8,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275reference"](9);g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",e)}},directives:[S.a,a.n,x.D,x.r,x.j,a.m,x.b,x.q,x.h,x.m,a.l,$.a,r.g,x.d,Y.a,i.d,x.k,Q.a],pipes:[a.b],styles:[""]}),e})();const je=[{path:"",component:R,data:{title:"Module",permission:"list-module"}},{path:"add",component:Fe,data:{title:"Add Module",permission:"create-module"}},{path:"edit/:id",component:Fe,data:{title:"Edit Module",permission:"modify-module"}}];let Oe=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(je)],i.g]}),e})();var ke=n("PCNd");let Ve=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[f.a],imports:[[a.c,Oe,r.j,x.l,r.i,$.b.forRoot(),Q.b,x.y,ke.a,b.c.forRoot()]]}),e})()}}]);