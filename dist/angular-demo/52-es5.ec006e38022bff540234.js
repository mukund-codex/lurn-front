function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=_superPropBase(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){r=!0,i=s}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw r}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var a=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{HX5X:function(e,t,n){"use strict";n.r(t),n.d(t,"FormbuildersModule",(function(){return De}));var a,r=n("ofXK"),i=n("1kSV"),o=n("tyNb"),l=n("fXoL"),s=n("G5QB"),c=n("tk/3"),u=n("hHWK"),d=n("kyOO"),p=((a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,r){var i;return _classCallCheck(this,n),(i=t.call(this,"form_master",e)).http=e,i.campaignService=a,i.languageService=r,i}return _createClass(n,[{key:"getCompanies",value:function(){return this.campaignService.getCompanies()}},{key:"getLanguages",value:function(){return this.languageService.allRecords()}},{key:"getCampaignFromCompany",value:function(e){return this.campaignService.getAll({company_id:e})}},{key:"getObjectFromCamp",value:function(e){return this.getAll({camp_id:e})}},{key:"getCampaignData",value:function(e){return this.campaignService.getAll({id:e})}}]),n}(s.a)).\u0275fac=function(e){return new(e||a)(l["\u0275\u0275inject"](c.b),l["\u0275\u0275inject"](u.a),l["\u0275\u0275inject"](d.a))},a.\u0275prov=l["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac,providedIn:"root"}),a),f=n("5eHb"),m=n("5Lta"),v=n("3Pt+"),h=n("utbL"),g=["searchForm"];function b(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275element"](1,"app-actionbtns",20),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("addRedirect","/formbuilders/add")("showExport",!1)("showImport",!1))}function y(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275template"](1,b,2,3,"div",7),l["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.data.length)}}function k(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.message.text)}}function w(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2,"No Records Found!"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275attribute"]("colSpan",7))}function x(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1,","),l["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1),l["\u0275\u0275template"](2,x,2,0,"span",7),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=t.index,r=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.label," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",a!=r.form.length-1)}}var q=function(e){return[e]},S=function(e){return{campaign_id:e}};function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275elementStart"](2,"a",22),l["\u0275\u0275element"](3,"i",23),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"th",24),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"td"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"td"),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"td"),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"td"),l["\u0275\u0275template"](13,C,3,2,"ng-container",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,r=l["\u0275\u0275nextContext"]().ngIf,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](7,q,"/formbuilders/edit/"+n.id))("queryParams",l["\u0275\u0275pureFunction1"](9,S,i.campaign_id)),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",(r.meta.pagination.current_page-1)*r.meta.pagination.per_page+a+1," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.company.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.campaign.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",n.form)}}function O(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,w,3,1,"tr",7),l["\u0275\u0275template"](2,E,14,11,"tr",21),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.data.length),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.data)}}function _(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"ngb-pagination",25),l["\u0275\u0275listener"]("pageChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().pageChange(e)}))("pageChange",(function(e){return l["\u0275\u0275restoreView"](n),t.ngIf.meta.pagination.current_page=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var a=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",a.meta.pagination.total)("pageSize",a.meta.pagination.per_page)("page",a.meta.pagination.current_page)}}function A(e,t){1&e&&l["\u0275\u0275text"](0,"Loading Data...")}var N,I=((N=function(){function e(t,n,a,r,i){_classCallCheck(this,e),this.formbuildersMasterService=t,this.router=n,this.activeRoute=a,this.toasterService=r,this.cs=i,this.searchObj={},this.parameters={},this.isCollapsed=!0}return _createClass(e,[{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"ngOnInit",value:function(){var e=this;this.campaign_id=this.getCurrentCampaign(),this.campaign_id&&(this.parameters.campaign=this.campaign_id,this.searchObj.campaign_id=this.campaign_id),this.activeRoute.queryParams.subscribe((function(t){var n=Object.assign(e.searchObj,t);e.formbuildersData=e.formbuildersMasterService.getAll(n),e.parameters=t}))}},{key:"add",value:function(){this.router.navigate(["formbuilders/add"])}},{key:"pageChange",value:function(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id},queryParamsHandling:"merge"})}},{key:"delete",value:function(e){var t=this;if(confirm("Are you sure you want to delete Formbuilder?")){var n=new FormData;this.formbuildersMasterService.delete(n,e).subscribe((function(e){t.toasterService.success("Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),t.search()}))}}},{key:"search",value:function(){this.searchObj=Object.assign(this.name?{name:this.name}:{},this.campaign_name?{campaign_name:this.campaign_name}:{},this.company_name?{company_name:this.company_name}:{},this.parameters),this.formbuildersData=this.formbuildersMasterService.getAll(this.searchObj)}},{key:"changeCampaign",value:function(e){this.cs.setCampaignId(e.id),this.parameters.campaign_id=this.campaign_id,this.sf.form.updateValueAndValidity()}}]),e}()).\u0275fac=function(e){return new(e||N)(l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](o.c),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](f.b),l["\u0275\u0275directiveInject"](u.a))},N.\u0275cmp=l["\u0275\u0275defineComponent"]({type:N,selectors:[["app-formbuilders-master"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275viewQuery"](g,!0),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.sf=n.first)},decls:49,vars:14,consts:[[3,"changeCampaign"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[4,"ngIf"],[1,"clearfix"],[1,"card-body",2,"margin-top","60px"],[1,"card-block"],[1,"table-responsive"],["name","searchForm",1,"table-responsive"],["searchForm","ngForm"],[1,"table","table-bordered","table-condensed"],["type","text","name","company_name","placeholder","Company Name",1,"form-control",3,"ngModel","keyup","ngModelChange"],["type","text","name","campaign_name","placeholder","Campaign Name",1,"form-control",3,"ngModel","keyup","ngModelChange"],["type","text","name","name","placeholder","Name",1,"form-control",3,"ngModel","keyup","ngModelChange"],[4,"ngIf","ngIfElse"],["loading",""],[3,"addRedirect","showExport","showImport"],[4,"ngFor","ngForOf"],[1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"routerLink","queryParams"],[1,"ft-edit-2","info","font-medium-1","mr-2"],["scope","row"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"app-topbar",0),l["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](1,"section",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"h4",6),l["\u0275\u0275text"](7,"Form Builder"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,y,2,1,"div",7),l["\u0275\u0275pipe"](9,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](10,"div",8),l["\u0275\u0275elementStart"](11,"div",9),l["\u0275\u0275template"](12,k,2,1,"p",7),l["\u0275\u0275elementStart"](13,"div",10),l["\u0275\u0275elementStart"](14,"div",11),l["\u0275\u0275elementStart"](15,"form",12,13),l["\u0275\u0275elementStart"](17,"table",14),l["\u0275\u0275elementStart"](18,"thead"),l["\u0275\u0275elementStart"](19,"tr"),l["\u0275\u0275elementStart"](20,"th"),l["\u0275\u0275text"](21,"Action"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"th"),l["\u0275\u0275text"](23,"Sr. No"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"th"),l["\u0275\u0275text"](25,"Company Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"th"),l["\u0275\u0275text"](27,"Campaign Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"th"),l["\u0275\u0275text"](29,"Form Builder Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"th"),l["\u0275\u0275text"](31,"Form Data"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"tbody"),l["\u0275\u0275elementStart"](33,"tr"),l["\u0275\u0275element"](34,"td"),l["\u0275\u0275element"](35,"td"),l["\u0275\u0275elementStart"](36,"td"),l["\u0275\u0275elementStart"](37,"input",15),l["\u0275\u0275listener"]("keyup",(function(){return t.search()}))("ngModelChange",(function(e){return t.company_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"td"),l["\u0275\u0275elementStart"](39,"input",16),l["\u0275\u0275listener"]("keyup",(function(){return t.search()}))("ngModelChange",(function(e){return t.campaign_name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"td"),l["\u0275\u0275elementStart"](41,"input",17),l["\u0275\u0275listener"]("keyup",(function(){return t.search()}))("ngModelChange",(function(e){return t.name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](42,"td"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](43,O,3,2,"ng-container",18),l["\u0275\u0275pipe"](44,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](45,_,2,5,"div",7),l["\u0275\u0275pipe"](46,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](47,A,1,0,"ng-template",null,19,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](48);l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](9,8,t.formbuildersData)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.message),l["\u0275\u0275advance"](25),l["\u0275\u0275property"]("ngModel",t.company_name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",t.campaign_name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",t.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](44,10,t.formbuildersData))("ngIfElse",n),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](46,12,t.formbuildersData))}},directives:[m.a,r.n,v.D,v.r,v.s,v.b,v.q,v.t,h.a,r.m,o.f,i.l],pipes:[r.b],styles:[""]}),N),j=n("mrSG"),L={controlPosition:"right",append:!1,actionButtons:[],controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","number","radio-group","select","text","textarea"],dataType:"json",disableFields:[],disabledAttrs:[],disabledActionButtons:[],editOnAdd:!1,defaultFields:[],fields:[],fieldRemoveWarn:!1,inputSets:[],roles:{1:"Administrator"},notify:{error:function(e){return console.error(e)},success:function(e){return console.log(e)},warning:function(e){return console.warn(e)}},onSave:function(e,t){return null},onClearAll:function(){return null},prepend:!1,sortableControls:!1,stickyControls:{enable:!0,offset:{top:5,bottom:"auto",right:"auto"}},templates:{},showActionButtons:!0,typeUserDisabledAttrs:{},typeUserAttrs:{},typeUserEvents:{},prefix:"form-builder-"},D={btn:["default","danger","info","primary","success","warning"]},T={location:"https://formbuilder.online/assets/lang/",langs:["en-US"],preloaded:{"en-US":{addOption:"Add Option +",allFieldsRemoved:"All fields were removed.",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clear:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",copyButton:"&#43;",copyButtonTooltip:"Copy",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",inline:"Inline",inlineDesc:"Display {type} inline",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",minSelectionRequired:"Minimum {min} selections required",multipleFiles:"Multiple Files",name:"Name",no:"No",noFieldsToClear:"There are no fields to clear",number:"Number",off:"Off",on:"On",option:"Option",options:"Options",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder","placeholder.value":"Value","placeholder.label":"Label","placeholder.text":"","placeholder.textarea":"","placeholder.email":"Enter you email","placeholder.placeholder":"","placeholder.className":"space separated classes","placeholder.password":"Enter your password",preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",removeOption:"Remove Option",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",rows:"Rows",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size","size.xs":"Extra Small","size.sm":"Small","size.m":"Default","size.lg":"Large",style:"Style","styles.btn.default":"Default","styles.btn.danger":"Danger","styles.btn.info":"Info","styles.btn.primary":"Primary","styles.btn.success":"Success","styles.btn.warning":"Warning",subtype:"Type",text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:"Yes"}}},F={};n("c/YC");var R={},M={text:["text","password","email","color","tel"],header:["h1","h2","h3"],button:["button","submit","reset"],paragraph:["p","address","blockquote","canvas","output"],textarea:["textarea","quill"]},P=function(e){e.parentNode&&e.parentNode.removeChild(e)},B=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e},H=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],r=["none","block"];n&&(r=r.reverse());for(var i=e.length-1;i>=0;i--)-1!==e[i].textContent.toLowerCase().indexOf(t.toLowerCase())?(e[i].style.display=r[0],a.push(e[i])):e[i].style.display=r[1];return a},U=["select","checkbox-group","checkbox","radio-group","autocomplete"],z=new RegExp("(".concat(U.join("|"),")")),V=function e(t){return _classCallCheck(this,e),this.optionFields=U,this.optionFieldsRegEx=z,this.subtypes=M,this.empty=B,this.filter=H,R[t]=this,R[t]},W={},X=function e(t){_classCallCheck(this,e),this.formData={},this.formID=t,this.layout="",W[t]=this};window.fbLoaded={js:[],css:[]},window.fbEditors={quill:{},tinymce:{}};var J={inArray:function(e,t){return-1!==t.indexOf(e)},trimObj:function(e){var t=[null,void 0,"",!1,"false"];for(var n in e)J.inArray(e[n],t)?delete e[n]:Array.isArray(e[n])&&(e[n].length||delete e[n]);return e},validAttr:function(e){return!J.inArray(e,["values","enableOther","other","label","subtype"])},attrString:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)&&J.validAttr(n)){var a=J.safeAttr(n,e[n]);t.push(a.name+a.value)}return t.join(" ")},safeAttr:function(e,t){var n;return e=J.safeAttrName(e),t&&(Array.isArray(t)?n=J.escapeAttr(t.join(" ")):("boolean"==typeof t&&(t=t.toString()),n=J.escapeAttr(t.replace(","," ").trim()))),{name:e,value:t=t?'="'.concat(n,'"'):""}},safeAttrName:function(e){return{className:"class"}[e]||J.hyphenCase(e)},hyphenCase:function(e){return(e=(e=e.replace(/[^\w\s\-]/gi,"")).replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))).replace(/\s/g,"-").replace(/^-+/g,"")},camelCase:function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},contentType:function(e){var t=typeof e;return e instanceof Node||e instanceof HTMLElement?t="node":Array.isArray(e)&&(t="array"),t},bindEvents:function(e,t){if(t){var n=function(n){t.hasOwnProperty(n)&&e.addEventListener(n,(function(e){return t[n](e)}))};for(var a in t)n(a)}},nameAttr:function(e){var t=(new Date).getTime();return(e.type||J.hyphenCase(e.label))+"-"+t},markup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var r=J.contentType(t),i=n.events,o=a(n,["events"]),l=document.createElement(e),s={string:function(e){l.innerHTML+=e},object:function(e){var t=e.tag,n=e.content,r=a(e,["tag","content"]);return l.appendChild(J.markup(t,n,r))},node:function(e){return l.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)r=J.contentType(e[t]),s[r](e[t])},function:function(e){e=e(),r=J.contentType(e),s[r](e)},undefined:function(){}};for(var c in o)if(o.hasOwnProperty(c)){var u=J.safeAttrName(c);l.setAttribute(u,o[c])}return t&&s[r].call(this,t),J.bindEvents(l,i),l},parseAttrs:function(e){var t=e.attributes,n={};return this.forEach(t,(function(e){var a=t[e].value||"";a.match(/false|true/g)?a="true"===a:a.match(/undefined/g)&&(a=void 0),a&&(n[t[e].name]=a)})),n},parseOptions:function(e){for(var t={},n=[],a=0;a<e.length;a++)(t=J.parseAttrs(e[a])).label=e[a].textContent,n.push(t);return n},parseXML:function(e){var t=(new window.DOMParser).parseFromString(e,"text/xml"),n=[];if(t)for(var a=t.getElementsByTagName("field"),r=0;r<a.length;r++){var i=J.parseAttrs(a[r]),o=a[r].getElementsByTagName("option");o&&o.length&&(i.values=J.parseOptions(o)),n.push(i)}return n},parsedHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.textContent},escapeHtml:function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},escapeAttr:function(e){var t={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof e?e.replace(/["&<>]/g,(function(e){return t[e]||e})):e},escapeAttrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=J.escapeAttr(e[t]));return e},forEach:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0;a<e.length;a++)t.call(n,a,e[a])},unique:function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))},remove:function(e,t){var n=t.indexOf(e);n>-1&&t.splice(n,1)},getScripts:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];return Array.isArray(e)||(e=[e]),this.isCached(e)||(a=$.map(e,(function(e){return $.ajax({dataType:"script",cache:!0,url:(n||"")+e}).done((function(){return window.fbLoaded.js.push(e)}))}))),a.push($.Deferred((function(e){return $(e.resolve)}))),(t=$).when.apply(t,_toConsumableArray(a))},isCached:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js",n=!1,a=window.fbLoaded[t];return n=Array.isArray(e)?e.every((function(e){return J.inArray(e,a)})):J.inArray(e,a),n},getStyles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Array.isArray(e)||(e=[e]),e.forEach((function(e){var n="href",a=e,r="";if("object"==typeof e&&(n=e.type||(e.style?"inline":"href"),r=e.id,e="inline"===n?e.style:e.href,a=r||e.href||e.style),!J.isCached(a,"css")){if("href"===n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=(t||"")+e,document.head.appendChild(i)}else $('<style type="text/css">'.concat(e,"</style>")).attr("id",r).appendTo($(document.head));window.fbLoaded.css.push(a)}}))},capitalize:function(e){return e.replace(/\b\w/g,(function(e){return e.toUpperCase()}))},merge:function(e,t){var n=Object.assign({},e,t);for(var a in t)n.hasOwnProperty(a)&&(n[a]=Array.isArray(t[a])?Array.isArray(e[a])?J.unique(e[a].concat(t[a])):t[a]:"object"==typeof t[a]?J.merge(e[a],t[a]):t[a]);return n},addEventListeners:function(e,t,n){return t.split(" ").forEach((function(t){return e.addEventListener(t,n,!1)}))},closest:function(e,t){for(var n=t.replace(".","");(e=e.parentElement)&&!e.classList.contains(n););return e},noop:function(){return null},debounce:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var l=this,s=a&&!t;clearTimeout(t),t=setTimeout((function(){t=null,a||e.apply(l,i)}),n),s&&e.apply(l,i)}},mobileClass:function(){var e,t="";return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=" fb-mobile"),t},makeClassName:function(e){return J.hyphenCase(e.replace(/[^\w\s\-]/gi,""))},safename:function(e){return e.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\[\]\_-]/g,"").toLowerCase()},forceNumber:function(e){return e.replace(/[^0-9]/g,"")}},Y=J;function Q(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t}var G,Z,K={loaded:Q("loaded"),viewData:Q("viewData"),userDeclined:Q("userDeclined"),modalClosed:Q("modalClosed"),modalOpened:Q("modalOpened"),formSaved:Q("formSaved"),fieldAdded:Q("fieldAdded"),fieldRemoved:Q("fieldRemoved"),fieldRendered:Q("fieldRendered")},ee=function(){function e(t,n){var a=this;_classCallCheck(this,e),this.preview=n,this.templates={label:null,help:null,default:function(e,t,n,r){return n&&t.appendChild(n),a.markup("div",[t,e],{className:r.id?"fb-".concat(r.type," form-group field-").concat(r.id):""})},noLabel:function(e,t,n,r){return a.markup("div",e,{className:r.id?"fb-".concat(r.type," form-group field-").concat(r.id):""})},hidden:function(e,t,n,a){return e}},t&&(this.templates=$.extend(this.templates,t)),this.configure()}return _createClass(e,[{key:"configure",value:function(){}},{key:"build",value:function(e,t,n){this.preview&&(t.name=t.name?t.name+"-preview":Y.nameAttr(t)+"-preview"),t.id=t.name,this.data=$.extend({},t);var a=new e(t,this.preview),r=a.build();"object"==typeof r&&r.field||(r={field:r});var i,o=this.label(),l=this.help();i=n&&this.isTemplate(n)?n:this.isTemplate(r.layout)?r.layout:"default";var s=this.processTemplate(i,r.field,o,l);return a.on("prerender")(s),s.addEventListener("fieldRendered",a.on("render")),s}},{key:"label",value:function(){var e=[Y.parsedHtml(this.data.label||"")];return this.data.required&&e.push(this.markup("span","*",{className:"fb-required"})),this.isTemplate("label")?this.processTemplate("label",e):this.markup("label",e,{for:this.data.id,className:"fb-".concat(this.data.type,"-label")})}},{key:"help",value:function(){return this.data.description?this.isTemplate("help")?this.processTemplate("help",this.data.description):this.markup("span","?",{className:"tooltip-element",tooltip:this.data.description}):null}},{key:"isTemplate",value:function(e){return"function"==typeof this.templates[e]}},{key:"processTemplate",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var i=(t=this.templates)[e].apply(t,a.concat([this.data]));return i.jquery&&(i=i[0]),i}},{key:"markup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Y.markup(e,t,n)}}]),e}(),te=function(){function e(t){var n=this;_classCallCheck(this,e),this.defaultConfig={extension:".lang",location:"assets/lang/",langs:["en-US"],locale:"en-US",preloaded:{}},this.init=function(t){return e.config=Object.assign({},n.defaultConfig,t),e.langs=Object.assign({},e.config.preloaded),e.locale=e.config.locale||e.config.langs[0],e.setCurrent(e.locale)}}return _createClass(e,[{key:"getLangs",get:function(){return e.config.langs}}],[{key:"getValue",value:function(t){return e.current&&e.current[t]||t}},{key:"makeSafe",value:function(e){var t={"{":"\\{","}":"\\}","|":"\\|"};return e=e.replace(/\{|\}|\|/g,(function(e){return t[e]})),new RegExp(e,"g")}},{key:"put",value:function(t,n){return e.current[t]=n}},{key:"get",value:function(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.getValue(t),i=r.match(/\{[^\}]+?\}/g);if(a&&i)if("object"==typeof a)for(var o=0;o<i.length;o++)n=i[o].substring(1,i[o].length-1),r=r.replace(e.makeSafe(i[o]),a[n]||"");else r=r.replace(/\{[^\}]+?\}/g,a);return r}},{key:"fromFile",value:function(e){for(var t,n=e.split("\n"),a={},r=0;r<n.length;r++)if(t=n[r].match(/^(.+?) *?= *?([^\n]+)/)){var i=t[2].replace(/^\s+|\s+$/,"");a[t[1]]=i}return a}},{key:"processFile",value:function(e){var t=e.replace(/\n\n/g,"\n");return this.fromFile(t)}},{key:"loadLang",value:function(t){var n=this;return new Promise((function(a,r){if(e.langs[t])a(e.langs[t]);else{var i=new XMLHttpRequest;i.open("GET",this.config.location+t+e.config.extension,!0),i.onload=function(){if(this.status<=304){var o=n.processFile(i.responseText);e.langs[t]=o,a(o)}else r({status:this.status,statusText:i.statusText})},i.onerror=function(){r({status:this.status,statusText:i.statusText})},i.send()}}))}},{key:"setCurrent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US";return Object(j.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadLang(t);case 2:return e.locale=t,e.current=e.langs[t],n.abrupt("return",e.current);case 5:case"end":return n.stop()}}),n)})))}}]),e}(),ne=((G=function(){function e(t,n){_classCallCheck(this,e),this.rawConfig=$.extend({},t),t=$.extend({},t),this.preview=n,delete t.isPreview,this.preview&&delete t.required;for(var a=0,r=["label","description","subtype","required"];a<r.length;a++){var i=r[a];this[i]=t[i],delete t[i]}t.id||(t.id=t.name?t.name:"control-"+Math.floor(1e7*Math.random()+1)),this.id=t.id,this.type=t.type,this.description&&(t.title=this.description),e.controlConfig||(e.controlConfig={}),this.classConfig=$.extend({},e.controlConfig[this.subtype?this.type+"."+this.subtype:this.type]||{}),this.subtype&&(t.type=this.subtype),this.required&&(t.required="required",t["aria-required"]="true"),this.config=t,this.configure()}return _createClass(e,[{key:"configure",value:function(){}},{key:"build",value:function(){var e=this.config,t=e.label,n=e.type,a=Object(j.b)(e,["label","type"]);return this.markup(n,Y.parsedHtml(t),a)}},{key:"on",value:function(e){var t=this,n={prerender:function(e){},render:function(e){var n=function(){t.onRender&&t.onRender()};t.css&&Y.getStyles(t.css),t.js&&!Y.isCached(t.js)?Y.getScripts(t.js).done(n):n()}};return e?n[e]:n}},{key:"markup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.element=Y.markup(e,t,n),this.element}},{key:"parsedHtml",value:function(e){return Y.parsedHtml(e)}}],[{key:"register",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=a?a+".":"";e.classRegister||(e.classRegister={}),Array.isArray(t)||(t=[t]);var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.indexOf(".")>-1?e.error("Ignoring type ".concat(l,". Cannot use the character '.' in a type name.")):e.classRegister[r+l]=n}}catch(s){o.e(s)}finally{o.f()}}},{key:"getRegistered",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object.keys(e.classRegister);return n.length?n.filter((function(e){return t?e.indexOf(t+".")>-1:-1==e.indexOf(".")})):n}},{key:"getRegisteredSubtypes",value:function(){var t={};for(var n in e.classRegister)if(e.classRegister.hasOwnProperty(n)){var a=_slicedToArray(n.split("."),2),r=a[0],i=a[1];if(!i)continue;t[r]||(t[r]=[]),t[r].push(i)}return t}},{key:"getClass",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.classRegister[n?t+"."+n:t]||e.classRegister[t]||e.error("Invalid control type. (Type: "+t+", Subtype: "+n+"). Please ensure you have registered it, and imported it correctly.")}},{key:"loadCustom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];if(t&&(n=n.concat(t)),window.fbControls&&(n=n.concat(window.fbControls)),!window.fbControlsLoaded){var a,r=_createForOfIteratorHelper(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;i(e,e.classRegister)}}catch(o){r.e(o)}finally{r.f()}window.fbControlsLoaded=!0}}},{key:"mi18n",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.definition,a=n.i18n||{};a=a[te.locale]||a.default||a;var r=this.camelCase(e),i="object"==typeof a?a[r]||a[e]:a;if(i)return i;var o=n.mi18n;return"object"==typeof o&&(o=o[r]||o[e]),o||(o=r),te.get(o,t)}},{key:"active",value:function(e){return!Array.isArray(this.definition.inactive)||-1==this.definition.inactive.indexOf(e)}},{key:"label",value:function(e){return this.mi18n(e)}},{key:"icon",value:function(e){var t=this.definition;return t&&"object"==typeof t.icon?t.icon[e]:t.icon}},{key:"error",value:function(e){throw new Error(e)}},{key:"camelCase",value:function(e){return Y.camelCase(e)}},{key:"definition",get:function(){return{}}}]),e}()).classRegister={},G),ae=((Z=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){var e=n.templates[this.type];if(!e)return ne.error("Invalid custom control type. Please ensure you have registered it correctly as a template option.");for(var t=Object.assign(this.config),a=0,r=["label","description","subtype","id","isPreview","required","title","aria-required","type"];a<r.length;a++){var i=r[a];t[i]=this.config[i]||this[i]}return(e=(e=e.bind(this))(t)).js&&(this.js=e.js),e.css&&(this.css=e.css),this.onRender=e.onRender,{field:e.field,layout:e.layout}}}],[{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.def||(n.def={icon:{},i18n:{}}),n.templates=e;var a=te.locale;n.def.i18n[a]||(n.def.i18n[a]={}),ne.register(Object.keys(e),n);var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,l=o.type;if(o.attrs=o.attrs||{},!l){if(!o.attrs.type){this.error("Ignoring invalid custom field definition. Please specify a type property.");continue}l=o.attrs.type}var s=o.subtype||l;if(!e[l]){var c=ne.getClass(l,o.subtype);if(!c){this.error("Error while registering custom field: "+l+(o.subtype?":"+o.subtype:"")+". Unable to find any existing defined control or template for rendering.");continue}s="".concat(l,"-").concat(Math.floor(9e3*Math.random()+1e3)),n.customRegister[s]=$.extend(o,{type:l,class:c})}n.def.i18n[a][s]=o.label,n.def.icon[s]=o.icon}}catch(u){i.e(u)}finally{i.f()}}},{key:"getRegistered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?ne.getRegistered(e):Object.keys(n.customRegister)}},{key:"lookup",value:function(e){return n.customRegister[e]}},{key:"definition",get:function(){return n.def}}]),n}(ne)).customRegister={},Z),re=Y.markup,ie=function(){function e(t,n){_classCallCheck(this,e),this.data=W[t],this.d=R[t],this.doCancel=!1,this.layout=n}return _createClass(e,[{key:"startMoving",value:function(e,t){t.item.show().addClass("moving"),this.doCancel=!0,this.from=t.item.parent()}},{key:"stopMoving",value:function(e,t){t.item.removeClass("moving"),this.doCancel&&(t.sender&&$(t.sender).sortable("cancel"),this.from.sortable("cancel")),this.save(),this.doCancel=!1}},{key:"beforeStop",value:function(e,t){var n=F.opts,a=this.d.stage.childNodes.length-1,r=[];this.stopIndex=t.placeholder.index()-1,!n.sortableControls&&t.item.parent().hasClass("frmb-control")&&r.push(!0),n.prepend&&r.push(0===this.stopIndex),n.append&&r.push(this.stopIndex+1===a),this.doCancel=r.some((function(e){return!0===e}))}},{key:"getTypes",value:function(e){var t={type:e.attr("type")},n=$(".fld-subtype",e).val();return n!==t.type&&(t.subtype=n),t}},{key:"fieldOptionData",value:function(e){var t=[],n=$(".sortable-options li",e);return n.each((function(e){var a=$(n[e]),r=$(".option-selected",a).is(":checked"),i={label:$(".option-label",a).val(),value:$(".option-value",a).val()};r&&(i.selected=r),t.push(i)})),t}},{key:"xmlSave",value:function(e){var t=this.prepData(e),n=["<form-template>\n\t<fields>"];return Y.forEach(t,(function(e,t){var a=null;if(t.type.match(z)){for(var r=t.values,i=[],o=0;o<r.length;o++){var l=r[o],s=re("option",l.label,l).outerHTML;i.push("\n\t\t\t"+s)}i.push("\n\t\t"),a=i.join(""),delete t.values}var c=re("field",a,t);n.push("\n\t\t"+c.outerHTML)})),n.push("\n\t</fields>\n</form-template>"),n.join("")}},{key:"prepData",value:function(e){var t=[],n=this.d,a=this;return 0!==e.childNodes.length&&Y.forEach(e.childNodes,(function(e,r){var i=$(r);if(!i.hasClass("disabled-field")){var o=a.getTypes(i),l=$(".roles-field:checked",r),s=l.map((function(e){return l[e].value})).get();if(a.setAttrVals(r,o),o.subtype)if("quill"===o.subtype){var c="".concat(o.name,"-preview");if(window.fbEditors.quill[c]){var u=window.fbEditors.quill[c].instance.getContents();o.value=window.JSON.stringify(u.ops)}}else if("tinymce"===o.subtype&&window.tinymce){var d="".concat(o.name,"-preview");if(window.tinymce.editors[d]){var p=window.tinymce.editors[d];o.value=p.getContent()}}if(s.length&&(o.role=s.join(",")),o.className=o.className||o.class,o.className){var f=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(o.className);f&&(o.style=f[1])}(o=Y.trimObj(o)).type.match(n.optionFieldsRegEx)&&(o.values=a.fieldOptionData(i)),t.push(o)}})),t}},{key:"getData",value:function(e){var t=this.data;return e||(e=F.opts.formData),!!e&&(t.formData={xml:function(e){return Y.parseXML(e)},json:function(e){return window.JSON.parse(e)}}[F.opts.dataType](e)||[],t.formData)}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=this.data;return e||(e=this.d.stage),n.formData={xml:function(){return t.xmlSave(e)},json:function(){return window.JSON.stringify(t.prepData(e),null,"\t")}}[F.opts.dataType](e),document.dispatchEvent(K.formSaved),n.formData}},{key:"incrementId",value:function(e){var t=e.lastIndexOf("-"),n=parseInt(e.substring(t+1))+1;return"".concat(e.substring(0,t),"-").concat(n)}},{key:"setAttrVals",value:function(e,t){var n=e.querySelectorAll('[class*="fld-"]');Y.forEach(n,(function(e){var a,r=n[e],i=Y.camelCase(r.getAttribute("name"));a=r.attributes.contenteditable?r.innerHTML:"checkbox"===r.type?r.checked:r.value,t[i]=a}))}},{key:"updatePreview",value:function(e){var t=this.d,n=e.attr("class"),a=e[0];if(-1===n.indexOf("input-control")){var r,i=e.attr("type"),o=$(".prev-holder",a),l={type:i};this.setAttrVals(a,l);var s=$(".btn-style",a).val();s&&(l.style=s),i.match(t.optionFieldsRegEx)&&(l.values=[],l.multiple=$('[name="multiple"]',a).is(":checked"),$(".sortable-options li",a).each((function(e,t){var n={};n.selected=$(".option-selected",t).is(":checked"),n.value=$(".option-value",t).val(),n.label=$(".option-label",t).val(),l.values.push(n)}))),(l=Y.trimObj(l)).className=this.classNames(a,l),$(".fld-className",a).val(l.className),e.data("fieldData",l);var c=ae.lookup(l.type),u=c?c.class:ne.getClass(l.type,l.subtype);r=this.layout.build(u,l),B(o[0]),o[0].appendChild(r),r.dispatchEvent(K.fieldRendered)}}},{key:"disabledTT",value:function(e){var t=e.querySelectorAll(".disabled-field");Y.forEach(t,(function(e){var n=t[e],a=te.get("fieldNonEditable");if(a){var r=Y.markup("p",a,{className:"frmb-tt"});n.appendChild(r),n.addEventListener("mousemove",(function(e){return function(e,t){var n=t.field.getBoundingClientRect();t.tt.style.transform="translate(".concat(e.clientX-n.left-21,"px, ").concat(e.clientY-n.top-t.tt.offsetHeight-12,"px)")}(e,{tt:r,field:n})}))}}))}},{key:"classNames",value:function(e,t){var n=e.querySelector(".fld-className");if(n){var a,r=t.type,i=t.style,o=n.value.split(" "),l={button:"btn",submit:"btn"}[r];if(l){if(i){for(a=0;a<o.length;a++){var s=new RegExp("(?:^|s)".concat(l,"-(.*?)(?:s|$)+"),"g");o[a].match(s)&&o.splice(a,1)}o.push(l+"-"+i)}o.push(l)}return Y.unique(o).join(" ").trim()}}},{key:"closeConfirm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||(e=document.getElementsByClassName("form-builder-overlay")[0]),t||(t=document.getElementsByClassName("form-builder-dialog")[0]),e.classList.remove("visible"),P(t),P(e),document.dispatchEvent(K.modalClosed)}},{key:"editorLayout",value:function(e){return{left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}}[e]||""}},{key:"showOverlay",value:function(){var e=this,t=Y.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(t),t.classList.add("visible"),t.onclick=function(){e.closeConfirm(t)},t}},{key:"confirm",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=this,i=te.current,o=r.showOverlay(),l=re("button",i.yes,{className:"yes btn btn-success btn-sm"}),s=re("button",i.no,{className:"no btn btn-danger btn-sm"});s.onclick=function(){r.closeConfirm(o)},l.onclick=function(){t(),r.closeConfirm(o)};var c=re("div",[s,l],{className:"button-wrap"}),u=re("div",[e,c],{className:a="form-builder-dialog "+a});if(n)u.classList.add("positioned");else{var d=document.documentElement;n={pageX:Math.max(d.clientWidth,window.innerWidth||0)/2,pageY:Math.max(d.clientHeight,window.innerHeight||0)/2},u.style.position="fixed"}return u.style.left=n.pageX+"px",u.style.top=n.pageY+"px",document.body.appendChild(u),l.focus(),u}},{key:"dialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=document.documentElement.clientWidth,r=document.documentElement.clientHeight;this.showOverlay();var i=Y.markup("div",e,{className:n="form-builder-dialog "+n});return t?i.classList.add("positioned"):(t={pageX:Math.max(a,window.innerWidth||0)/2,pageY:Math.max(r,window.innerHeight||0)/2},i.style.position="fixed"),i.style.left=t.pageX+"px",i.style.top=t.pageY+"px",document.body.appendChild(i),document.dispatchEvent(K.modalOpened),-1!==n.indexOf("data-dialog")&&document.dispatchEvent(K.viewData),i}},{key:"confirmRemoveAll",value:function(e){var t=this,n=e.target.id.match(/frmb-\d{13}/)[0],a=document.getElementById(n),r=te.current,i=$("li.form-field",a),o=e.target.getBoundingClientRect(),l=document.body.getBoundingClientRect(),s={pageX:o.left+o.width/2,pageY:o.top-l.top-12};i.length?t.confirm(r.clearAllMessage,(function(){t.removeAllFields.call(t,a),F.opts.notify.success(r.allFieldsRemoved),F.opts.onClearAll()}),s):t.dialog(r.noFieldsToClear,s)}},{key:"removeAllFields",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=te.current,r=F.opts,i=e.querySelectorAll("li.form-field"),o=[];if(!i.length)return!1;if(r.prepend&&o.push(!0),r.append&&o.push(!0),o.some((function(e){return!0===e}))||(e.parentElement.classList.add("empty"),e.parentElement.dataset.content=a.getStarted),n){e.classList.add("removing");var l=0;Y.forEach(i,(function(e){return l+=i[e].offsetHeight+3})),i[0].style.marginTop="".concat(-l,"px"),setTimeout((function(){B(e).classList.remove("removing"),t.save()}),400)}else B(e),this.save()}},{key:"setFieldOrder",value:function(e){if(!F.opts.sortableControls)return!1;var t=window,n=t.sessionStorage,a=t.JSON,r=[];return e.children().each((function(e,t){var n=$(t).data("type");n&&r.push(n)})),n&&n.setItem("fieldOrder",a.stringify(r)),r}},{key:"orderFields",value:function(e){var t,n=F.opts,a=n.controlOrder.concat(e);return window.sessionStorage&&(n.sortableControls?t=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),t?(t=window.JSON.parse(t),t=Y.unique(t.concat(e)),t=Object.keys(t).map((function(e){return t[e]}))):t=Y.unique(a),t.forEach((function(e){var n=new RegExp("-[\\d]{4}$");if(e.match(n)){var a=t.indexOf(e.replace(n,""));-1!==a&&(t.splice(t.indexOf(e),1),t.splice(a+1,t.indexOf(e),e))}})),n.disableFields.length&&(t=t.filter((function(e){return-1==n.disableFields.indexOf(e)}))),t.filter(Boolean)}},{key:"closeAllEdit",value:function(){var e=$("> li.editing",this.d.stage),t=$(".toggle-form",this.d.stage),n=$(".frm-holder",e);t.removeClass("open"),e.removeClass("editing"),$(".prev-holder",e).show(),n.hide()}},{key:"toggleEdit",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=document.getElementById(e),a=$(".toggle-form",n);if(a.length){var r=$(".frm-holder",n);n.classList.toggle("editing"),a.toggleClass("open"),t?($(".prev-holder",n).slideToggle(250),r.slideToggle(250)):($(".prev-holder",n).toggle(),r.toggle()),this.updatePreview($(n))}}},{key:"stickyControls",value:function(){var e=this.d,t=$(e.controls).parent(),n=$(e.stage).parent(),a=t.width(),r=e.controls.getBoundingClientRect();$(window).scroll((function(i){var o=$(i.target).scrollTop(),l=Object.assign({},{top:5,bottom:"auto",right:"auto",left:r.left},F.opts.stickyControls.offset);if(o>n.offset().top){var s=Object.assign({position:"fixed",width:a},l),c=t.offset(),u=n.offset(),d=c.top+t.height(),p=u.top+n.height(),f=d===p&&c.top>o;d>p&&c.top!==u.top&&t.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(d<p||f)&&t.css(s)}else e.controls.parentElement.removeAttribute("style")}))}},{key:"showData",value:function(){var e=Y.escapeHtml(this.data.formData),t=re("code",e,{className:"formData-".concat(F.opts.dataType)});this.dialog(re("pre",t),null,"data-dialog")}},{key:"removeField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=!1,a=this,r=this.d.stage,i=r.getElementsByClassName("form-field");if(!i.length)return console.warn("No fields to remove"),!1;if(!e){var o=[].slice.call(i).map((function(e){return e.id}));console.warn("fieldID required to remove specific fields."),console.warn("Removing last field since no ID was supplied."),console.warn("Available IDs: "+o.join(", ")),e=r.lastChild.id}var l=document.getElementById(e),s=$(l);return l?(s.slideUp(t,(function(){if(s.removeClass("deleting"),s.remove(),n=!0,a.save(),!r.childNodes.length){var e=r.parentElement;e.classList.add("empty"),e.dataset.content=te.current.getStarted}})),document.dispatchEvent(K.fieldRemoved),n):(console.warn("Field not found"),!1)}},{key:"processActionButtons",value:function(e){var t=e.label,n=e.events,a=Object(j.b)(e,["label","events"]),r=this.data;t=t?te.current[t]||t:a.id?te.current[a.id]||Y.capitalize(a.id):"",a.id=a.id?"".concat(r.formID,"-").concat(a.id,"-action"):"".concat(r.formID,"-action-").concat(Math.round(1e3*Math.random()));var i=re("button",t,a);if(n){var o=function(e){n.hasOwnProperty(e)&&i.addEventListener(e,(function(t){return n[e](t)}))};for(var l in n)o(l)}return i}},{key:"processSubtypes",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=ne.getClass(t);ne.register(e[t],n,t)}var a=ne.getRegisteredSubtypes(),r={};for(var i in a)if(a.hasOwnProperty(i)){var o,l=[],s=_createForOfIteratorHelper(a[i]);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=ne.getClass(i,c);l.push({label:u.mi18n(c),value:c})}}catch(d){s.e(d)}finally{s.f()}r[i]=l}return r}},{key:"editorUI",value:function(e){var t=this.d,n=this.data;t.stage=re("ul",null,{id:n.formID,className:"frmb"}),t.controls=re("ul",null,{id:"".concat(n.formID,"-control-box"),className:"frmb-control"})}},{key:"processOptions",value:function(e){var t=this,n=e.actionButtons,a=e.replaceFields,r=Object(j.b)(e,["actionButtons","replaceFields"]);return n=[{type:"button",id:"clear",className:"clear-all btn btn-danger",events:{click:t.confirmRemoveAll.bind(t)}},{type:"button",label:"viewJSON",id:"data",className:"btn btn-default get-data",events:{click:t.showData.bind(t)}},{type:"button",id:"save",className:"btn btn-primary btn-raised save-template",events:{click:function(e){t.save(),F.opts.onSave(e,t.data.formData)}}}].concat(e.actionButtons),F.opts=Object.assign({},{actionButtons:n},r),void 0!==a&&(r.disableFields=r.disableFields.concat(a.map((function(e){var t=e.type;return t&&t})))),F.opts=Object.assign({},{actionButtons:n},r),F.opts}},{key:"input",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return re("input",null,e)}},{key:"getFormData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"js",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return{js:function(){return n.prepData(n.d.stage)},xml:function(){return n.xmlSave(n.d.stage)},json:function(e){return e?window.JSON.stringify(n.prepData(n.d.stage),null,"\t"):window.JSON.stringify(n.prepData(n.d.stage))}}[e](t)}}]),e}();ne.register("autocomplete",function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){var e=this,t=this.config,a=t.values,r=t.type,i=Object(j.b)(t,["values","type"]),o=function(t){var n=t.target.nextSibling.nextSibling,a=t.target.nextSibling,r=e.getActiveOption(n),i=new Map([[38,function(){var t=e.getPreviousOption(r);t&&e.selectOption(n,t)}],[40,function(){var t=e.getNextOption(r);t&&e.selectOption(n,t)}],[13,function(){r&&(t.target.value=r.innerHTML,a.value=r.getAttribute("value"),"none"===n.style.display?e.showList(n,r):e.hideList(n)),t.preventDefault()}],[27,function(){e.hideList(n)}]]).get(t.keyCode);return i||(i=function(){return!1}),i()},l=Object.assign({},i,{id:"".concat(i.id,"-input"),autocomplete:"off",events:{focus:function(t){var n=t.target.nextSibling.nextSibling,a=H(n.querySelectorAll("li"),t.target.value);t.target.addEventListener("keydown",o),t.target.value.length>0&&e.showList(n,a.length>0?a[a.length-1]:null)},blur:function(e){e.target.removeEventListener("keydown",o),setTimeout((function(){e.target.nextSibling.nextSibling.style.display="none"}),200)},input:function(t){var n=t.target.nextSibling.nextSibling;t.target.nextSibling.value=t.target.value;var a=H(n.querySelectorAll("li"),t.target.value);if(0==a.length)e.hideList(n);else{var r=e.getActiveOption(n);r||(r=a[a.length-1]),e.showList(n,r)}}}}),s=Object.assign({},i,{type:"hidden"});delete l.name;var c=[_get(_getPrototypeOf(n.prototype),"markup",this).call(this,"input",null,l),_get(_getPrototypeOf(n.prototype),"markup",this).call(this,"input",null,s)],u=a.map((function(t){return _get(_getPrototypeOf(n.prototype),"markup",e).call(e,"li",t.label,{events:{click:function(n){var a=n.target.parentElement,r=a.previousSibling.previousSibling;r.value=t.label,r.nextSibling.value=t.value,e.hideList(a)}},value:t.value})}));return c.push(_get(_getPrototypeOf(n.prototype),"markup",this).call(this,"ul",u,{id:"".concat(i.id,"-list"),className:"fb-".concat(r,"-list")})),c}},{key:"hideList",value:function(e){this.selectOption(e,null),e.style.display="none"}},{key:"showList",value:function(e,t){this.selectOption(e,t),e.style.display="block",e.style.width=e.parentElement.offsetWidth+"px"}},{key:"getActiveOption",value:function(e){var t=e.getElementsByClassName("active-option")[0];return t&&"none"!==t.style.display?t:null}},{key:"getPreviousOption",value:function(e){var t=e;do{t=t?t.previousSibling:null}while(null!=t&&"none"===t.style.display);return t}},{key:"getNextOption",value:function(e){var t=e;do{t=t?t.nextSibling:null}while(null!=t&&"none"===t.style.display);return t}},{key:"selectOption",value:function(e,t){e.querySelectorAll("li").forEach((function(e){e.classList.remove("active-option")})),t&&t.classList.add("active-option")}}]),n}(ne));var oe=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){return{field:_get(_getPrototypeOf(n.prototype),"markup",this).call(this,"button",this.label,this.config),layout:"noLabel"}}}]),n}(ne);ne.register("button",oe),ne.register(["button","submit","reset"],oe,"button"),ne.register("hidden",function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){return{field:this.markup("input",null,this.config),layout:"hidden"}}}]),n}(ne));var le=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){var e=this.config,t=e.type,n=Object(j.b)(e,["type"]),a={paragraph:"p",header:this.subtype};return a[t]&&(t=a[t]),{field:this.markup(t,Y.parsedHtml(this.label),n),layout:"noLabel"}}}]),n}(ne);ne.register(["paragraph","header"],le),ne.register(["p","address","blockquote","canvas","output"],le,"paragraph"),ne.register(["h1","h2","h3"],le,"header"),ne.register(["select","checkbox-group","radio-group","checkbox"],function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){var e=this,t=[],n=this.config,a=n.values,r=n.value,i=n.placeholder,o=n.type,l=n.inline,s=n.other,c=n.toggle,u=Object(j.b)(n,["values","value","placeholder","type","inline","other","toggle"]),d=o.replace("-group",""),p="select"===o;if((u.multiple||"checkbox-group"===o)&&(u.name=u.name+"[]"),"checkbox-group"===o&&u.required&&(this.onRender=this.groupRequired),delete u.title,a){i&&p&&t.push(this.markup("option",i,{disabled:null,selected:null}));for(var f=0;f<a.length;f++){var m=a[f];"string"==typeof m&&(m={label:m,value:m});var v=m.label,h=void 0===v?"":v,g=Object(j.b)(m,["label"]);if(g.id="".concat(u.id,"-").concat(f),g.selected&&!i||delete g.selected,void 0!==r&&g.value===r&&(g.selected=!0),p){var b=this.markup("option",document.createTextNode(h),g);t.push(b)}else{var y=d,k=[h];l&&(y+="-inline"),g.type=d,g.selected&&(g.checked="checked",delete g.selected);var w=this.markup("input",null,Object.assign({},u,g)),x={for:g.id},C=[w,h=this.markup("label",k,x)];c&&(x.className="kc-toggle",k.unshift(w,this.markup("span")),C=this.markup("label",k,x));var q=this.markup("div",C,{className:y});t.push(q)}}if(!p&&s){var S={id:"".concat(u.id,"-other"),className:"".concat(u.className," other-option"),value:"",events:{click:function(){return e.otherOptionCB(S.id)}}},E=d;l&&(E+="-inline");var O=Object.assign({},u,S);O.type=d;var _={type:"text",events:{input:function(e){var t=e.target;t.previousElementSibling.value=t.value}},id:"".concat(S.id,"-value"),className:"other-val"},A=this.markup("input",null,O),N=[document.createTextNode("Other"),this.markup("input",null,_)],I=this.markup("label",N,{for:O.id}),L=this.markup("div",[A,I],{className:E});t.push(L)}}return"select"==o?this.markup(d,t,u):this.markup("div",t,{className:o})}},{key:"groupRequired",value:function(){for(var e=this.element.getElementsByTagName("input"),t=function(){var t=[].some.call(e,(function(e){return e.checked}));!function(e,t){[].forEach.call(e,(function(e){t?e.removeAttribute("required"):e.setAttribute("required","required"),function(e,t){var n=ne.mi18n("minSelectionRequired",1);e.setCustomValidity(t?"":n)}(e,t)}))}(e,t)},n=e.length-1;n>=0;n--)e[n].addEventListener("change",t);t()}},{key:"otherOptionCB",value:function(e){var t=document.getElementById(e);document.getElementById("".concat(e,"-value")).style.display=t.checked?"inline-block":"none"}}],[{key:"definition",get:function(){return{inactive:["checkbox"],mi18n:{minSelectionRequired:"minSelectionRequired"}}}}]),n}(ne));var se=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){return this.markup("input",null,this.config)}}],[{key:"definition",get:function(){return{mi18n:{date:"dateField",file:"fileUpload"}}}}]),n}(ne);ne.register(["text","file","date","number"],se),ne.register(["text","password","email","color","tel"],se,"text"),se.register("file",se,"file"),se.register("fineuploader",function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"configure",value:function(){var e=this;this.js=this.classConfig.js||"//cdnjs.cloudflare.com/ajax/libs/file-uploader/5.14.2/jquery.fine-uploader/jquery.fine-uploader.min.js",this.css=[this.classConfig.css||"//cdnjs.cloudflare.com/ajax/libs/file-uploader/5.14.2/jquery.fine-uploader/fine-uploader-gallery.min.css",{type:"inline",id:"fineuploader-inline",style:"\n          .qq-uploader .qq-error-message {\n            position: absolute;\n            left: 20%;\n            top: 20px;\n            width: 60%;\n            color: #a94442;\n            background: #f2dede;\n            border: solid 1px #ebccd1;\n            padding: 15px;\n            line-height: 1.5em;\n            text-align: center;\n            z-index: 99999;\n          }\n          .qq-uploader .qq-error-message span {\n            display: inline-block;\n            text-align: left;\n          }"}],this.handler=this.classConfig.handler||"/upload",["js","css","handler"].forEach((function(t){return delete e.classConfig[t]}));var t=this.classConfig.template||'\n      <div class="qq-uploader-selector qq-uploader qq-gallery" qq-drop-area-text="Drop files here">\n        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">\n          <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>\n        </div>\n        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>\n          <span class="qq-upload-drop-area-text-selector"></span>\n        </div>\n        <div class="qq-upload-button-selector qq-upload-button">\n          <div>Upload a file</div>\n        </div>\n        <span class="qq-drop-processing-selector qq-drop-processing">\n          <span>Processing dropped files...</span>\n          <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>\n        </span>\n        <ul class="qq-upload-list-selector qq-upload-list" role="region" aria-live="polite" aria-relevant="additions removals">\n          <li>\n            <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>\n            <div class="qq-progress-bar-container-selector qq-progress-bar-container">\n              <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>\n            </div>\n            <span class="qq-upload-spinner-selector qq-upload-spinner"></span>\n            <div class="qq-thumbnail-wrapper">\n              <img class="qq-thumbnail-selector" qq-max-size="120" qq-server-scale>\n            </div>\n            <button type="button" class="qq-upload-cancel-selector qq-upload-cancel">X</button>\n            <button type="button" class="qq-upload-retry-selector qq-upload-retry">\n              <span class="qq-btn qq-retry-icon" aria-label="Retry"></span>\n              Retry\n            </button>\n            <div class="qq-file-info">\n              <div class="qq-file-name">\n                <span class="qq-upload-file-selector qq-upload-file"></span>\n                <span class="qq-edit-filename-icon-selector qq-btn qq-edit-filename-icon" aria-label="Edit filename"></span>\n              </div>\n              <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">\n              <span class="qq-upload-size-selector qq-upload-size"></span>\n              <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">\n                <span class="qq-btn qq-delete-icon" aria-label="Delete"></span>\n              </button>\n              <button type="button" class="qq-btn qq-upload-pause-selector qq-upload-pause">\n                <span class="qq-btn qq-pause-icon" aria-label="Pause"></span>\n              </button>\n              <button type="button" class="qq-btn qq-upload-continue-selector qq-upload-continue">\n                <span class="qq-btn qq-continue-icon" aria-label="Continue"></span>\n              </button>\n            </div>\n          </li>\n        </ul>\n        <dialog class="qq-alert-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">Close</button>\n          </div>\n        </dialog>\n        <dialog class="qq-confirm-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">No</button>\n            <button type="button" class="qq-ok-button-selector">Yes</button>\n          </div>\n        </dialog>\n        <dialog class="qq-prompt-dialog-selector">\n          <div class="qq-dialog-message-selector"></div>\n          <input type="text">\n          <div class="qq-dialog-buttons">\n            <button type="button" class="qq-cancel-button-selector">Cancel</button>\n            <button type="button" class="qq-ok-button-selector">Ok</button>\n          </div>\n        </dialog>\n      </div>';this.fineTemplate=$("<div/>").attr("id","qq-template").html(t)}},{key:"build",value:function(){return this.input=this.markup("input",null,{type:"hidden",name:this.config.name,id:this.config.name}),this.wrapper=this.markup("div","",{id:this.config.name+"-wrapper"}),[this.input,this.wrapper]}},{key:"onRender",value:function(){var e=$(this.wrapper),t=$(this.input),n=$.extend(!0,{request:{endpoint:this.handler},deleteFile:{enabled:!0,endpoint:this.handler},chunking:{enabled:!0,concurrent:{enabled:!0},success:{endpoint:this.handler+(-1==this.handler.indexOf("?")?"?":"&")+"done"}},resume:{enabled:!0},retry:{enableAuto:!0,showButton:!0},callbacks:{onError:function(t,n,a,r){"."!=a.slice(-1)&&(a+=".");var i=$("<div />").addClass("qq-error-message").html("<span>Error processing upload: <b>".concat(n,"</b>.<br />Reason: ").concat(a,"</span>")).prependTo(e.find(".qq-uploader"));setTimeout((function(){i.fadeOut((function(){i.remove()}))}),6e3)},onStatusChange:function(n,a,r){var i,o=[],l=_createForOfIteratorHelper(e.fineUploader("getUploads"));try{for(l.s();!(i=l.n()).done;){var s=i.value;"upload successful"==s.status&&o.push(s.name)}}catch(c){l.e(c)}finally{l.f()}t.val(o.join(", "))}},template:this.fineTemplate},this.classConfig);e.fineUploader(n)}}],[{key:"definition",get:function(){return{i18n:{default:"Fine Uploader"}}}}]),n}(se),"file");var ce=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"build",value:function(){var e=this.config,t=e.value,n=void 0===t?"":t,a=Object(j.b)(e,["value"]);return this.field=this.markup("textarea",this.parsedHtml(n),a),this.field}},{key:"on",value:function(e){var t=this;return"prerender"==e&&this.preview?function(e){t.field&&(e=t.field),$(e).on("mousedown",(function(e){e.stopPropagation()}))}:_get(_getPrototypeOf(n.prototype),"on",this).call(this,e)}}],[{key:"definition",get:function(){return{mi18n:{textarea:"textArea"}}}}]),n}(ne);ne.register("textarea",ce),ne.register("textarea",ce,"textarea"),n("EVdn");var ue=(new Date).getTime(),de=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getFormBuilder",value:function(e,t){return pe(e,t)}}]),e}(),pe=function(e,t){var n=jQuery,a=te.current,r="frmb-"+ue++,i=new X(r),o=new V(r);e.layout||(e.layout=ee);var l=new e.layout(e.layoutTemplates,!0);ne.controlConfig=e.controlConfig||{};var s=new ie(r,l),c=Y.markup;e=s.processOptions(e),Object.keys(e.fields).length&&ae.register(e.templates,e.fields);var u=F.subtypes=s.processSubtypes(e.subtypes);s.editorUI(r);var d=n(o.stage);i.layout=s.editorLayout(e.controlPosition),i.formID=r,i.lastID="".concat(i.formID,"-fld-1");var p=ne.getRegistered(),f=ae.getRegistered();f&&n.merge(p,f),e.sortableControls&&o.controls.classList.add("sort-enabled");for(var m=n(o.controls),v=[],h={},g=0;g<p.length;g++){var b=p[g],y=void 0,k=ae.lookup(b);if(k)y=k.class;else if(k={},!(y=ne.getClass(b))||!y.active(b))continue;var w=k.icon||y.icon(b),x=k.label||y.label(b),C=w?"":k.iconClassName||"icon-".concat(b.replace(/-[\d]{4}$/,""));w&&(x='<span class="control-icon">'.concat(w,"</span>").concat(x));var q=c("li",c("span",x),{className:"".concat(C," input-control input-control-").concat(g)});q.dataset.type=b,v.push(b),h[b]=q}e.inputSets.length&&e.inputSets.forEach((function(e,t){e.name=e.name||Y.makeClassName(e.label);var n=c("li",e.label,{className:"input-set-control input-set-".concat(t)});n.dataset.type=e.name,v.push(e.name),h[e.name]=n})),s.orderFields(v).forEach((function(e){h[e]&&o.controls.appendChild(h[e])})),d.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:function(e,t){return s.beforeStop.call(s,e,t)},start:function(e,t){return s.startMoving.call(s,e,t)},stop:function(e,t){return s.stopMoving.call(s,e,t)},cancel:["input","select","textarea",".disabled-field",".form-elements",".btn","button"].join(", "),placeholder:"frmb-placeholder"}),m.sortable({helper:"clone",opacity:.9,connectWith:d,cancel:".fb-separator",cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:function(e,t){return s.startMoving.call(s,e,t)},stop:function(e,t){return s.stopMoving.call(s,e,t)},revert:150,beforeStop:function(e,t){return s.beforeStop.call(s,e,t)},distance:3,update:function(t,n){if(s.doCancel)return!1;n.item.parent()[0]===o.stage?(s.doCancel=!0,S(n.item)):(s.setFieldOrder(m),s.doCancel=!e.sortableControls)}});var S=function(t){if(t[0].classList.contains("input-set-control")){var n=[],a=e.inputSets.find((function(e){return e.name===t[0].dataset.type}));a&&a.showHeader&&n.push({type:"header",subtype:"h2",id:a.name,label:a.label}),n.push.apply(n,_toConsumableArray(a.fields)),n.forEach((function(e){L(e,!0),(s.stopIndex||0===s.stopIndex)&&s.stopIndex++}))}else L(t,!0)};o.editorWrap=c("div",null,{id:"".concat(i.formID,"-form-wrap"),className:"form-wrap form-builder"+Y.mobileClass()});var E=n(o.editorWrap),O=c("div",o.controls,{id:"".concat(i.formID,"-cb-wrap"),className:"cb-wrap "+i.layout.controls});if(e.showActionButtons){var _=e.actionButtons.map((function(t){if(t.id&&-1===e.disabledActionButtons.indexOf(t.id))return s.processActionButtons(t)})),A=o.formActions=c("div",_,{className:"form-actions btn-group"});O.appendChild(A)}var N=c("div",[o.stage,O],{id:"".concat(i.formID,"-stage-wrap"),className:"stage-wrap "+i.layout.stage});E.append(N,O),"textarea"!==t.type?n(t).append(E):n(t).replaceWith(E);var I=Y.debounce((function(e){if(e){if("keyup"===e.type&&"className"===e.target.name)return!1;var t=n(e.target).closest(".form-field");s.updatePreview(t),s.save.call(s)}})),j=[".form-elements input",".form-elements select",".form-elements textarea"].join(", ");d.on("change blur keyup",j,I),n("li",o.controls).click((function(e){var t=n(e.target).closest("li");s.stopIndex=void 0,S(t),s.save.call(s)}));var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};if(e instanceof jQuery)if(a.type=e[0].dataset.type,a.type){var r=ae.lookup(a.type);if(r)a=Object.assign({},r);else{var i=ne.getClass(a.type);a.label=i.label(a.type)}}else{var o=e[0].attributes;t||(a.values=a.children().map((function(e,t){return{label:n(t).text(),value:n(t).attr("value"),selected:Boolean(n(t).attr("selected"))}})));for(var l=o.length-1;l>=0;l--)a[o[l].name]=o[l].value}else a=Object.assign({},e);a.name||(a.name=Y.nameAttr(a)),t&&Y.inArray(a.type,["text","number","file","date","select","textarea","autocomplete"])&&(a.className=a.className||"form-control");var s=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(a.className);s&&(a.style=s[1]),J(a,t),t&&document.dispatchEvent(K.fieldAdded),N.classList.remove("empty")},T=function(t){var n,r=t.type,l=[],d=function(e){var t=["required","label","description","placeholder","className","name","access","value"],n=["header","paragraph","file","autocomplete"].concat(o.optionFields),a=!Y.inArray(e,n),r={autocomplete:t.concat(["options"]),button:["label","subtype","style","className","name","value","access"],checkbox:["required","label","description","toggle","inline","className","name","access","other","options"],text:t.concat(["subtype","maxlength"]),date:t,file:t.concat(["subtype","multiple"]),header:["label","subtype","className","access"],hidden:["name","value","access"],paragraph:["label","subtype","className","access"],number:t.concat(["min","max","step"]),select:t.concat(["multiple","options"]),textarea:t.concat(["subtype","maxlength","rows"])};r["checkbox-group"]=r.checkbox,r["radio-group"]=r.checkbox;var i=r[e];return"radio-group"===e&&Y.remove("toggle",i),Y.inArray(e,["header","paragraph","button"])&&Y.remove("description",i),a||Y.remove("value",i),i||t}(r),p={required:function(){return W(t)},toggle:function(){return B("toggle",t,{first:a.toggle})},inline:function(){var e={first:a.inline,second:te.get("inlineDesc",r.replace("-group",""))};return B("inline",t,e)},label:function(){return z("label",t)},description:function(){return z("description",t)},subtype:function(){return U("subtype",t,u[r])},style:function(){return $(t.style)},placeholder:function(){return z("placeholder",t)},rows:function(){return H("rows",t)},className:function(){return z("className",t)},name:function(){return z("name",t)},value:function(){return z("value",t)},maxlength:function(){return H("maxlength",t)},access:function(){var r=['<div class="available-roles" '.concat(t.role?'style="display:block"':"",">")];for(n in e.roles)if(e.roles.hasOwnProperty(n)){var o="fld-".concat(i.lastID,"-roles-").concat(n),l={type:"checkbox",name:"roles[]",value:n,id:o,className:"roles-field"};Y.inArray(n,f)&&(l.checked="checked"),r.push('<label for="'.concat(o,'">')),r.push(s.input(l).outerHTML),r.push(" ".concat(e.roles[n],"</label>"))}r.push("</div>");var c={first:a.roles,second:a.limitRole,content:r.join("")};return B("access",t,c)},other:function(){return B("other",t,{first:a.enableOther,second:a.enableOtherMsg})},options:function(){return function(e){var t=e.type,n=e.values,r=e.name,i=[c("a",a.addOption,{className:"add add-opt"})],o=[c("label",a.selectOptions,{className:"false-label"})],l=e.multiple||"checkbox-group"===t;if(n&&n.length)n.forEach((function(e){return Object.assign({},{selected:!1},e)}));else{var s=[1,2,3];Y.inArray(t,["checkbox-group","checkbox"])&&(s=[1]);var u=(n=s.map((function(e){return function(e){var n={label:e,value:Y.hyphenCase(e)};return"autocomplete"!==t&&(n.selected=!1),n}("".concat(a.option," ").concat(e))})))[0];u.hasOwnProperty("selected")&&(u.selected=!0)}var d=c("div",i,{className:"option-actions"}),p=c("ol",n.map((function(e){return Q(r,e,l)})),{className:"sortable-options"}),f=c("div",[p,d],{className:"sortable-options-wrap"});return o.push(f),c("div",o,{className:"form-group field-options"}).outerHTML}(t)}},f=void 0!==t.role?t.role.split(","):[];if("number"===r&&["min","max","step"].forEach((function(e){p[e]=function(){return H(e,t)}})),"file"===r&&(p.multiple=function(){return B("multiple",t,{first:a.multipleFiles,second:a.allowMultipleFiles})}),"select"===r&&(p.multiple=function(){return B("multiple",t,{first:" ",second:a.selectionsMessage})}),Object.keys(d).forEach((function(t){var n=d[t],a=[!0];if(e.typeUserDisabledAttrs[r]&&a.push(!Y.inArray(n,e.typeUserDisabledAttrs[r])),e.typeUserAttrs[r]){var i=Object.keys(e.typeUserAttrs[r]);a.push(!Y.inArray(n,i))}Y.inArray(n,e.disabledAttrs)&&a.push(!1),a.every((function(e){return!0===e}))&&l.push(p[n]())})),e.typeUserAttrs[r]){var m=function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=a[r],o=e[r],l=o.value;o.value=t[r]||o.value||"",o.label&&(a[r]=o.label),n.push(o.options?M(r,o):R(r,o)),a[r]=i,o.value=l}return n.join("")}(e.typeUserAttrs[r],t);l.push(m)}return l.join("")};function R(e,t){var n={id:e+"-"+i.lastID,title:t.description||t.label||e.toUpperCase(),name:e,type:t.type||"text",className:["fld-".concat(e)]},r='<label for="'.concat(n.id,'">').concat(a[e],"</label>");return Y.inArray(n.type,["checkbox","checkbox-group","radio-group"])||n.className.push("form-control"),n=Object.assign({},t,n),'<div class="form-group '.concat(e,'-wrap">').concat(r,'<div class="input-wrap">'.concat("<input ".concat(Y.attrString(n),">"),"</div>"),"</div>")}function M(e,t){var n=Object.keys(t.options).map((function(e){var n={value:e};return e===t.value&&(n.selected=null),c("option",t.options[e],n).outerHTML})),r={id:e+"-"+i.lastID,title:t.description||t.label||e.toUpperCase(),name:e,className:"fld-".concat(e," form-control")},o='<label for="'.concat(r.id,'">').concat(a[e],"</label>");return Object.keys(t).filter((function(e){return!Y.inArray(e,["value","options","label"])})).forEach((function(e){r[e]=t[e]})),'<div class="form-group '.concat(e,'-wrap">').concat(o,'<div class="input-wrap">'.concat(c("select",n,r).outerHTML,"</div>"),"</div>")}var B=function(e,t,n){var a=function(t){return c("label",t,{for:"".concat(e,"-").concat(i.lastID)}).outerHTML},r={type:"checkbox",className:"fld-".concat(e),name:e,id:"".concat(e,"-").concat(i.lastID)};t[e]&&(r.checked=!0);var o=[],l=[c("input",null,r).outerHTML];return n.first&&o.push(a(n.first)),n.second&&l.push(" ",a(n.second)),n.content&&l.push(n.content),l=c("div",l,{className:"input-wrap"}).outerHTML,c("div",o.concat(l),{className:"form-group ".concat(e,"-wrap")}).outerHTML},$=function(e){var t="";"undefined"===e&&(e="default");var n="<label>".concat(a.style,"</label>");return t+=s.input({value:e||"default",type:"hidden",className:"btn-style"}).outerHTML,t+='<div class="btn-group" role="group">',D.btn.forEach((function(n){var a=["btn-xs","btn","btn-".concat(n)];e===n&&a.push("selected");var r=c("button",te.get("styles.btn.".concat(n)),{value:n,type:"button",className:a.join(" ")}).outerHTML;t+=r})),(t=c("div",[n,t+="</div>"],{className:"form-group style-wrap"})).outerHTML},H=function(e,t){var n=a[e]||e,r={type:"number",value:t[e],name:e,min:"0",placeholder:a["placeholder.".concat(e)],className:"fld-".concat(e," form-control"),id:"".concat(e,"-").concat(i.lastID)},o=s.input(Y.trimObj(r)).outerHTML;return c("div",['<label for="'.concat(r.id,'">').concat(n,"</label>"),'<div class="input-wrap">'.concat(o,"</div>")],{className:"form-group ".concat(e,"-wrap")}).outerHTML},U=function(e,t,n){var r=n.map((function(n,r){var i=Object.assign({label:"".concat(a.option," ").concat(r),value:void 0},n);return n.value===t[e]&&(i.selected=!0),i=Y.trimObj(i),c("option",i.label,i)})),o={id:e+"-"+i.lastID,name:e,className:"fld-".concat(e," form-control")},l=a[e]||Y.capitalize(e),s=c("label",l,{for:o.id}),u=c("select",r,o),d=c("div",u,{className:"input-wrap"});return c("div",[s,d],{className:"form-group ".concat(o.name,"-wrap")}).outerHTML},z=function(e,t){var n=t[e]||"",r=a[e];"label"===e&&(Y.inArray(t.type,["paragraph"])?r=a.content:n=Y.parsedHtml(t[e]));var o=a["placeholder.".concat(e)]||"",l="";if(![].some((function(e){return!0===e}))){var s={name:e,placeholder:o,className:"fld-".concat(e," form-control"),id:"".concat(e,"-").concat(i.lastID)},u=c("label",r,{for:s.id}).outerHTML;"label"===e?(s.contenteditable=!0,l+=c("div",n,s).outerHTML):(s.value=n,s.type="text",l+="<input ".concat(Y.attrString(s),">"));var d='<div class="input-wrap">'.concat(l,"</div>"),p="block";"value"===e&&(p=t.subtype&&"quill"===t.subtype&&"none"),l=c("div",[u,d],{className:"form-group ".concat(e,"-wrap"),style:"display: ".concat(p)})}return l.outerHTML},W=function(e){var t=e.type,n=[],r="";return Y.inArray(t,["header","paragraph","button"])&&n.push(!0),n.some((function(e){return!0===e}))||(r=B("required",e,{first:a.required})),r},J=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=t.type||"text",u=t.label||a[l]||a.label;void 0===e.disabledFieldButtons&&(e.disabledFieldButtons=[]);var p=e.disabledFieldButtons[l]||t.disabledFieldButtons,f=[c("a",null,{type:"remove",id:"del_"+i.lastID,className:"del-button btn icon-cancel delete-confirm",title:a.removeMessage}),c("a",null,{type:"edit",id:i.lastID+"-edit",className:"toggle-form btn icon-pencil",title:a.hide}),c("a",null,{type:"copy",id:i.lastID+"-copy",className:"copy-button btn icon-copy",title:a.copyButtonTooltip})];p&&Array.isArray(p)&&(f=f.filter((function(e){return!Y.inArray(e.type,p)})));var m=[c("div",f,{className:"field-actions"})];m.push(c("label",Y.parsedHtml(u),{className:"field-label"})),m.push(c("span"," *",{className:"required-asterisk",style:t.required?"display:inline":""})),m.push(c("span","?",{className:"tooltip-element",tooltip:t.description,style:t.description?"display:inline-block":"display:none"})),m.push(c("div","",{className:"prev-holder"}));var v=c("div",[T(t),c("a",a.close,{className:"close-field"})],{className:"form-elements"});m.push(c("div",v,{id:"".concat(i.lastID,"-holder"),className:"frm-holder"}));var h=c("li",m,{class:l+"-field form-field",type:l,id:i.lastID}),g=n(h);g.data("fieldData",{attrs:t}),void 0!==s.stopIndex?n("> li",o.stage).eq(s.stopIndex).before(g):d.append(g),jQuery(".sortable-options",g).sortable({update:function(){return s.updatePreview(g)}}),s.updatePreview(g),e.typeUserEvents[l]&&e.typeUserEvents[l].onadd&&e.typeUserEvents[l].onadd(h),e.editOnAdd&&r&&(s.closeAllEdit(),s.toggleEdit(i.lastID,!1)),i.lastID=s.incrementId(i.lastID)},Q=function(e,t,n){var r={selected:n?"checkbox":"radio"},i=["value","label","selected"],o=[];t=Object.assign({selected:!1,label:"",value:""},t);for(var l=i.length-1;l>=0;l--){var s=i[l];if(t.hasOwnProperty(s)){var u={type:r[s]||"text",className:"option-"+s,value:t[s],name:e+"-option"};u.placeholder=a["placeholder.".concat(s)]||"","selected"===s&&!0===t.selected&&(u.checked=t.selected),o.push(c("input",null,u))}}return o.push(Y.markup("a",a.remove,{className:"remove btn",title:a.removeMessage})),Y.markup("li",o).outerHTML};if(d.on("click touchstart",".remove",(function(t){var r=jQuery(t.target).parents(".form-field:eq(0)"),i=r[0],o=i.getAttribute("type"),l=n(t.target.parentElement);t.preventDefault(),i.querySelector(".sortable-options").childNodes.length<=2&&!o.includes("checkbox")?e.notify.error("Error: "+a.minOptionMessage):l.slideUp("250",(function(){l.remove(),s.updatePreview(r),s.save.call(s)}))})),d.on("touchstart","input",(function(e){var t=n(void 0);if(!0===e.handled)return!1;if("checkbox"===t.attr("type"))t.trigger("click");else{t.focus();var a=t.val();t.val(a)}})),d.on("click touchstart",".toggle-form, .close-field",(function(e){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;var t=n(e.target).parents(".form-field:eq(0)").attr("id");s.toggleEdit(t),e.handled=!0})),d.on("dblclick","li.form-field, .field-label",(function(e){if("input"!==e.target.tagName.toLowerCase()&&!e.target.contentEditable&&(e.stopPropagation(),e.preventDefault(),!0!==e.handled)){var t="li"==e.target.tagName?n(e.target).attr("id"):n(e.target).closest("li.form-field").attr("id");s.toggleEdit(t),e.handled=!0}})),d.on("change",'[name="subtype"]',(function(e){var t=n(e.target).closest("li.form-field");n(".value-wrap",t).toggle("quill"!==e.target.value)})),d.on("change",[".prev-holder input",".prev-holder select",".prev-holder textarea"].join(", "),(function(e){var t,n=e;if(!n.target.classList.contains("other-option")){var a=Y.closest(n.target,".form-field");if(Y.inArray(a.type,["select","checkbox-group","radio-group"])){var r=a.getElementsByClassName("option-value");"select"===a.type?Y.forEach(r,(function(e){r[e].parentElement.childNodes[0].checked=n.target.value===r[e].value})):(t=document.getElementsByName(n.target.name),Y.forEach(t,(function(e){r[e].parentElement.childNodes[0].checked=t[e].checked})))}else{var i=document.getElementById("value-"+a.id);i&&(i.value=n.target.value)}s.save.call(s)}})),Y.addEventListeners(o.stage,"keyup change",(function(e){if(e.target.classList.contains("fld-label")){var t=e.target.value||e.target.innerHTML;Y.closest(e.target,".form-field").querySelector(".field-label").innerHTML=Y.parsedHtml(t)}})),d.on("keyup","input.error",(function(e){n(e.target).removeClass("error")})),d.on("keyup",'input[name="description"]',(function(e){var t=n(e.target).parents(".form-field:eq(0)"),a=n(".tooltip-element",t),r=n(e.target).val();if(""!==r)if(a.length)a.attr("tooltip",r).css("display","inline-block");else{var i='<span class="tooltip-element" tooltip="'.concat(r,'">?</span>');n(".field-label",t).after(i)}else a.length&&a.css("display","none")})),d.on("change",".fld-multiple",(function(e){var t=e.target.checked?"checkbox":"radio",a=n(".option-selected",n(e.target).closest(".form-elements"));return a.each((function(e){return a[e].type=t})),t})),d.on("blur","input.fld-name",(function(e){e.target.value=Y.safename(e.target.value),""===e.target.value?n(e.target).addClass("field-error").attr("placeholder",a.cannotBeEmpty):n(e.target).removeClass("field-error")})),d.on("blur","input.fld-maxlength",(function(e){e.target.value=Y.forceNumber(e.target.value)})),d.on("click touchstart",".icon-copy",(function(t){t.preventDefault();var a=n(t.target).parent().parent("li"),r=function(t){var a=t.attr("id"),r=t.attr("type"),o=r+"-"+(new Date).getTime(),l=t.clone();return n(".fld-name",l).val(o),l.find("[id]").each((function(e,t){t.id=t.id.replace(a,i.lastID)})),l.find("[for]").each((function(e,t){var n=t.getAttribute("for").replace(a,i.lastID);t.setAttribute("for",n)})),l.attr("id",i.lastID),l.attr("name",o),l.addClass("cloned"),n(".sortable-options",l).sortable(),e.typeUserEvents[r]&&e.typeUserEvents[r].onclone&&e.typeUserEvents[r].onclone(l[0]),i.lastID=s.incrementId(i.lastID),l}(a);r.insertAfter(a),s.updatePreview(r),s.save.call(s)})),d.on("click touchstart",".delete-confirm",(function(t){t.preventDefault();var r=t.target.getBoundingClientRect(),i=document.body.getBoundingClientRect(),o={pageX:r.left+r.width/2,pageY:r.top-i.top-12},l=n(t.target).parents(".form-field:eq(0)").attr("id"),c=n(document.getElementById(l));if(document.addEventListener("modalClosed",(function(){c.removeClass("deleting")}),!1),e.fieldRemoveWarn){var u=Y.markup("h3",a.warning),d=Y.markup("p",a.fieldRemoveWarning);s.confirm([u,d],(function(){return s.removeField(l)}),o),c.addClass("deleting")}else s.removeField(l)})),d.on("click",".style-wrap button",(function(e){var t=n(e.target),a=t.val(),r=t.parent().prev(".btn-style");r.val(a),t.siblings(".btn").removeClass("selected"),t.addClass("selected"),s.updatePreview(r.closest(".form-field")),s.save.call(s)})),d.on("click",".fld-required",(function(e){n(e.target).closest(".form-field").find(".required-asterisk").toggle()})),d.on("click","input.fld-access",(function(e){var t=n(e.target).closest(".form-field").find(".available-roles"),a=n(e.target);t.slideToggle(250,(function(){a.is(":checked")||n("input[type=checkbox]",t).removeAttr("checked")}))})),d.on("click",".add-opt",(function(e){e.preventDefault();var t,a=n(e.target).closest(".field-options"),r=n('[name="multiple"]',a),i=n(".option-selected:eq(0)",a);t=r.length?r.prop("checked"):"checkbox"===i.attr("type");var o=i.attr("name");n(".sortable-options",a).append(Q(o,!1,t))})),d.on("mouseover mouseout",".remove, .del-button",(function(e){return n(e.target).closest("li").toggleClass("delete")})),function(){var t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((i=s.getData(i))&&i.length){for(var l=0;l<i.length;l++){var c=Y.trimObj(i[l]);L(c)}N.classList.remove("empty")}else e.defaultFields&&e.defaultFields.length?(e.defaultFields.forEach((function(e){return L(e)})),N.classList.remove("empty")):e.prepend||e.append||(N.classList.add("empty"),N.dataset.content=a.getStarted);t=[],r=function(t){return Y.markup("li",e[t],{className:"disabled-field form-".concat(t)})},e.prepend&&!n(".disabled-field.form-prepend",o.stage).length&&(t.push(!0),d.prepend(r("prepend"))),e.append&&!n(".disabled-field.form-.append",o.stage).length&&(t.push(!0),d.append(r("append"))),s.disabledTT(o.stage),t.some((function(e){return!0===e}))&&N.classList.remove("empty"),s.save()}(),d.css("min-height",m.height()),e.stickyControls.enable&&s.stickyControls(d),e.disableInjectedStyle){var G=document.getElementsByClassName("formBuilder-injected-style");Y.forEach(G,(function(e){return P(G[e])}))}document.dispatchEvent(K.loaded)},fe=n("uu/O"),me=(n("UEVY"),n("cp0P"));function ve(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Formbuilder Name is required! "),l["\u0275\u0275elementEnd"]())}function he(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Please Enter atleast 3 Characters! "),l["\u0275\u0275elementEnd"]())}function ge(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Form Builder Name too long! "),l["\u0275\u0275elementEnd"]())}function be(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1," Name format is invalid! "),l["\u0275\u0275elementEnd"]())}function ye(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",22),l["\u0275\u0275template"](1,ve,2,0,"div",23),l["\u0275\u0275template"](2,he,2,0,"div",23),l["\u0275\u0275template"](3,ge,2,0,"div",23),l["\u0275\u0275template"](4,be,2,0,"div",23),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.formbuildersForm.get("name").errors.required),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.formbuildersForm.get("name").errors.minlength),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.formbuildersForm.get("name").errors.maxlength),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.formbuildersForm.get("name").errors.pattern)}}function ke(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",22),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.error_messages.name," ")}}function we(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",22),l["\u0275\u0275text"](1,"Please Select atleast one field!"),l["\u0275\u0275elementEnd"]())}function xe(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",6),l["\u0275\u0275elementStart"](2,"div",7),l["\u0275\u0275elementStart"](3,"div",8),l["\u0275\u0275elementStart"](4,"form",9),l["\u0275\u0275listener"]("submit",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onSubmit(e)})),l["\u0275\u0275elementStart"](5,"div",10),l["\u0275\u0275elementStart"](6,"h4",11),l["\u0275\u0275element"](7,"i",12),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",13),l["\u0275\u0275elementStart"](10,"div",14),l["\u0275\u0275elementStart"](11,"label",15),l["\u0275\u0275text"](12," Formbuilder Name "),l["\u0275\u0275elementStart"](13,"span",16),l["\u0275\u0275text"](14,"*"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",17),l["\u0275\u0275element"](16,"input",18),l["\u0275\u0275template"](17,ye,5,4,"div",19),l["\u0275\u0275template"](18,ke,2,1,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",20),l["\u0275\u0275elementStart"](20,"h2"),l["\u0275\u0275text"](21,"Build Form"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](22,"div",21),l["\u0275\u0275template"](23,we,2,0,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()}if(2&e){var a=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("formGroup",a.formbuildersForm),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",a.title," "),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngIf",a.formbuildersForm.get("name").errors&&a.submitted),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",a.error_messages.name),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",a.formDataError)}}function Ce(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"Loading Data..."),l["\u0275\u0275elementEnd"]())}var qe,Se,Ee,Oe=((qe=function(){function e(t,n,a,r,i,o){_classCallCheck(this,e),this.fb=t,this.router=n,this.activeRoute=a,this.toasterService=r,this.formbuildersMasterService=i,this.cs=o,this.title="Formbuilder",this.editFlag=!0,this.errors=[],this.submitted=!1,this.error_messages=[],this.formDataError=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;!function(e){e.fn.formBuilder=function(t){t||(t={});var n=this,a=e.extend({},L,t,!0),r=a.i18n,i=Object(j.b)(a,["i18n"]);F.opts=i;var o=e.extend({},T,r,!0),l={actions:{getData:null,setData:null,save:null,showData:null,setLang:null,addField:null,removeField:null,clearFields:null},get formData(){return l.actions.getData("json")},promise:new Promise((function(t,a){(new te).init(o).then((function(){n.each((function(t){var a=(new de).getFormBuilder(i,n[t]);e(n[t]).data("formBuilder",a),a&&(l.actions=a.actions)})),delete l.promise,t(l)})).catch(console.error)}))};return l}}(jQuery);var t=this;this.campaign_id=this.getCurrentCampaign(),this.change_in_params=this.activeRoute.params.flatMap((function(t){return t.id?(e.formbuildersfbId=t.id,e.formbuildersMasterService.getAll({id:t.id})):e.activeRoute.params})).subscribe((function(n){e.formbuildersForm=n.data?e.create_form(n.data[0]):e.create_form(),Object(me.a)(e.formbuildersMasterService.getLanguages()).subscribe((function(a){_slicedToArray(a,1)[0],t.defaultFields=[],n.data&&(t.defaultFields=n.data[0].form,t.defaultFields.forEach((function(e,t){})));var r={onSave:function(e,n){t.onSubmit(n)},defaultFields:t.defaultFields,disabledActionButtons:["data","clear"],disableFields:["button","autocomplete","hidden","paragraph","checkbox-group","header","number"],inputSets:[],typeUserAttrs:{text:{pattern:{label:"Pattern",options:{"^([a-zA-Z .])+$":"Only Alphabets","^([0-9])+$":"Only Numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$":"Email","^[a-zA-Z0-9 .]$":"Alpha Numeric"}},more:{label:"More",description:"Enter a RegExp passwords must match"},unique:{type:"checkbox",label:"Unique?",checked:!1},is_viewable:{type:"checkbox",label:"View in App?",checked:""},minlength:{label:"Min length",description:"Minimum Length"},exactlength:{label:"Exact length",description:"Exact Length"},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},date:{minDate:{label:"Min Date",type:"date",maxlength:"10",description:"Minimum"},maxDate:{label:"Max Date",type:"date",maxlength:"10",placeholder:"Maximum"},is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},number:{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},textarea:{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},select:{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},file:{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}},"radio-group":{is_viewable:{type:"checkbox",label:"View in App?",checked:""},sort_order:{label:"Sort Order",description:"Sort Order"},is_editable:{type:"checkbox",label:"Is editable?",checked:""}}}};e.formBuilder=jQuery(".build-wrap").formBuilder(r)})),e.buildForm=!0})),this.dropdownSettings=fe.a.dropDownSettings(!0),this.companies=this.formbuildersMasterService.getCompanies()}},{key:"fixCheckedProps",value:function(e){}},{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"getCampaign",value:function(e){"object"==typeof e&&(e=e.id),e&&(this.campaignData=this.formbuildersMasterService.getCampaignFromCompany(e))}},{key:"create_form",value:function(e){return this.fb.group({name:[e?e.name:"",[v.B.required,v.B.pattern("^([a-zA-Z0-9 .])+$"),v.B.minLength(3),v.B.maxLength(50)]],is_active:[e?e.is_active:"true"],formbuildersfBid:[e?e.id:""]})}},{key:"onSubmit",value:function(e){var t=this;if(this.submitted=!0,!this.formbuildersForm.invalid)if(JSON.parse(e).length){this.formbuildersForm.value.form=e.toString();var n=this.formbuildersForm.value,a=this.formbuildersForm.value.formbuildersfBid;if(this.formbuildersForm.value.campaign_id=this.campaign_id,a){var r=new FormData;for(var i in n)n[i]&&r.append(i,n[i]);this.formbuildersMasterService.update(r,a).subscribe((function(e){return t.addUpdate("/formbuilders","Records Updated Successfully!")}),(function(e){return t.controlError(e)}))}else this.formbuildersMasterService.save(n).subscribe((function(e){return t.addUpdate("/formbuilders","Records Added Successfully!")}),(function(e){return t.controlError(e)}))}else this.formDataError=!0}},{key:"addUpdate",value:function(e,t){var n=this;this.router.navigate([e],{queryParams:{campaign_id:this.campaign_id}}).then((function(){n.toasterService.success(t,"Success!",{positionClass:"toast-top-right"})}))}},{key:"controlError",value:function(e){400===e.status?this.error_messages=e.error.error:alert("Problems while saving data")}},{key:"changeCampaign",value:function(e){this.cs.setCampaignId(e.id)}},{key:"formObj",get:function(){return this.formbuildersForm.controls}}]),e}()).\u0275fac=function(e){return new(e||qe)(l["\u0275\u0275directiveInject"](v.e),l["\u0275\u0275directiveInject"](o.c),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](f.b),l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](u.a))},qe.\u0275cmp=l["\u0275\u0275defineComponent"]({type:qe,selectors:[["app-formbuilders-master"]],decls:7,vars:2,consts:[[3,"changeCampaign"],["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12","p-0"],[4,"ngIf","ngIfElse"],["norecord",""],[1,"card"],[1,"card-body"],[1,"px-3"],[1,"form","form-horizontal","striped-rows",3,"formGroup","submit"],[1,"form-body"],[1,"form-section"],[1,"ft-user"],[1,"form-group"],[1,"row"],["for","name",1,"col-md-3","pt-1"],[2,"color","red"],[1,"col-md-9"],["type","text","formControlName","name","maxlength","50","id","name","autocomplete","off",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"text-center","p-3"],["id","stage1",1,"build-wrap"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"app-topbar",0),l["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](1,"section",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275template"](4,xe,24,5,"ng-container",4),l["\u0275\u0275template"](5,Ce,2,0,"ng-template",null,5,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6);l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",n)}},directives:[m.a,r.n,v.D,v.r,v.j,v.b,v.q,v.h,v.m],styles:[""]}),qe),_e=[{path:"",component:I,data:{title:"Formbuilders",permission:"list-form-master"}},{path:"add",component:Oe,data:{title:"Formbuilders",permission:"create-form-master"}},{path:"edit/:id",component:Oe,data:{title:"Formbuilders",permission:"modify-form-master"}}],Ae=((Se=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:Se}),Se.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Se)},imports:[[o.g.forChild(_e)],o.g]}),Se),Ne=n("l1pd"),Ie=n("Egam"),je=n("R9Cn"),Le=n("PCNd"),De=((Ee=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:Ee}),Ee.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Ee)},providers:[Ne.a],imports:[[r.c,Ae,i.j,v.l,i.i,Ie.b.forRoot(),je.b,v.y,Le.a]]}),Ee)}}]);