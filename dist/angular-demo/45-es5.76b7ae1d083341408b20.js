function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{S4wv:function(e,t,n){"use strict";n.r(t),n.d(t,"CourseModule",(function(){return qe}));var r=n("ofXK"),a=n("1kSV"),i=n("tyNb"),o=n("zE9r"),d=n("quSY"),s=n("lJxs"),l=n("bOdf"),c=(n("6Br6"),n("uu/O")),m=n("fXoL"),u=n("IAlr"),p=n("5eHb"),g=n("hHWK"),f=n("5Lta"),v=n("utbL"),h=n("3Pt+"),y=n("QJFE");function x(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div"),m["\u0275\u0275text"](2,"No Records Found!"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275attribute"]("colSpan",6))}var S=function(e){return[e]},b=function(e){return{campaign_id:e}};function E(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"a",45),m["\u0275\u0275element"](1,"i",46),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]().$implicit,r=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("routerLink",m["\u0275\u0275pureFunction1"](2,S,"/course/edit/"+n.id))("queryParams",m["\u0275\u0275pureFunction1"](4,b,r.campaign_id))}}function C(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"a",47),m["\u0275\u0275listener"]("confirm",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"](2).delete(e.id)})),m["\u0275\u0275element"](1,"i",48),m["\u0275\u0275elementEnd"]()}if(2&e){m["\u0275\u0275nextContext"](3);var r=m["\u0275\u0275reference"](14);m["\u0275\u0275property"]("swal",r)}}var _=function(){return["/section"]},w=function(e,t){return{campaign_id:e,course_id:t}},I=function(){return["/section/add"]};function F(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",28),m["\u0275\u0275elementStart"](1,"div",29),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).courseDashboard(e.id)})),m["\u0275\u0275elementStart"](2,"div",3),m["\u0275\u0275elementStart"](3,"div",30),m["\u0275\u0275template"](4,E,2,6,"a",31),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",32),m["\u0275\u0275elementStart"](6,"div",33),m["\u0275\u0275template"](7,C,2,1,"a",34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",3),m["\u0275\u0275elementStart"](9,"table",35),m["\u0275\u0275elementStart"](10,"tbody"),m["\u0275\u0275elementStart"](11,"tr"),m["\u0275\u0275elementStart"](12,"td",36),m["\u0275\u0275element"](13,"img",37),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"td",38),m["\u0275\u0275elementStart"](15,"h4",39),m["\u0275\u0275elementStart"](16,"a"),m["\u0275\u0275text"](17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",3),m["\u0275\u0275elementStart"](19,"div",40),m["\u0275\u0275elementStart"](20,"span",41),m["\u0275\u0275text"](21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](22,"br"),m["\u0275\u0275elementStart"](23,"span",42),m["\u0275\u0275text"](24,"Section"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",43),m["\u0275\u0275elementStart"](26,"span"),m["\u0275\u0275element"](27,"img",44),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](28,"br"),m["\u0275\u0275elementStart"](29,"span",42),m["\u0275\u0275text"](30,"Add Section"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",a.showEdit),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",a.showDelete),m["\u0275\u0275advance"](10),m["\u0275\u0275textInterpolate1"]("",r.name," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("routerLink",m["\u0275\u0275pureFunction0"](8,_))("queryParams",m["\u0275\u0275pureFunction2"](9,w,a.campaign_id,r.id)),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](r.section),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("routerLink",m["\u0275\u0275pureFunction0"](12,I))("queryParams",m["\u0275\u0275pureFunction2"](13,w,a.campaign_id,r.id))}}function k(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"div",17),m["\u0275\u0275elementStart"](2,"div",18),m["\u0275\u0275elementStart"](3,"b",19),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](5,x,3,1,"div",16),m["\u0275\u0275elementStart"](6,"div",20),m["\u0275\u0275elementStart"](7,"div",21),m["\u0275\u0275elementStart"](8,"div",22),m["\u0275\u0275elementStart"](9,"div",3),m["\u0275\u0275elementStart"](10,"div",23),m["\u0275\u0275elementStart"](11,"h5",24),m["\u0275\u0275text"](12,"Add Course"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",25),m["\u0275\u0275element"](14,"img",26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](15,F,31,16,"div",27),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf,r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"]("Total Records : ",null==n.meta||null==n.meta.pagination?null:n.meta.pagination.total,""),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!n.data.length),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("routerLink","/course/add")("queryParams",m["\u0275\u0275pureFunction1"](5,b,r.campaign_id)),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngForOf",n.data)}}function D(e,t){1&e&&m["\u0275\u0275text"](0,"Loading Data...")}function P(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"ngb-pagination",49),m["\u0275\u0275listener"]("pageChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().pageChange(e)}))("pageChange",(function(e){return m["\u0275\u0275restoreView"](n),t.ngIf.meta.pagination.current_page=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var r=t.ngIf;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",r.meta.pagination.total)("pageSize",r.meta.pagination.per_page)("page",r.meta.pagination.current_page)}}var O,q=((O=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.activeRoute=t,this.router=n,this.courseService=r,this.toasterService=a,this.cs=i,this.isCollapsed=!0,this.subscription=new d.a,this.searchObj={},this.showExport=!1,this.showDelete=!1,this.showEdit=!1,this.showCompanyFilter=!0,this.showCampaignFilter=!0,this.errors=[],this.uploadFields=[],this.uploadedFile=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activeRoute.queryParams.subscribe((function(t){var n=Object.assign(e.searchObj,t);e.courseData=e.courseService.getAll(n),e.parameters=t})),this.dropdownSettingsCompany=c.a.dropDownSettings(!0);var t=this.courseService.checkPermissionExist(["export-course","remove-course","create-course","upload-course","modify-course"]);this.showExport=t[0],this.showDelete=t[1],this.showCompanyFilter=t[2],this.showCampaignFilter=t[3],this.showEdit=t[4],this.showCompanyFilter&&(this.companyData=this.courseService.getCompanies()),this.showCampaignFilter&&(this.campaignData=this.courseService.getCampaigns(this.company_id)),this.campaign_id=this.getCurrentCampaign()}},{key:"ngAfterViewInit",value:function(){var e=this;this.subscription=o.a.merge(this.activeRoute.queryParams.pipe(Object(s.a)((function(t){return e.parameters=c.a.merge({},e.parameters,t),e.parameters})),Object(l.a)((function(t){return e.loadData(t)})))).subscribe((function(t){e.uploadFields=t.fields}))}},{key:"loadData",value:function(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.courseService.getAll(e)}},{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"search",value:function(){this.searchObj=Object.assign(this.course_id&&this.course_id[0]?{course_id:this.course_id[0].id}:{},this.course_name?{course_name:this.course_name}:{},this.parameters),this.courseData=this.courseService.getAll(this.searchObj)}},{key:"add",value:function(){this.router.navigate(["course/add"])}},{key:"copyInputMessage",value:function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"pageChange",value:function(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e},queryParamsHandling:"merge"})}},{key:"edit",value:function(e){this.router.navigate(["course/edit/"+e])}},{key:"section",value:function(e){this.router.navigate(["section?course_id="+e+"&campaign_id="+this.campaign_id])}},{key:"delete",value:function(e){var t=this,n=new FormData;this.courseService.delete(n,e).subscribe((function(e){e.success?t.toasterService.success("Record Deleted!","Success!",{positionClass:"toast-top-right"}):t.toasterService.error(e.message,"Failed!",{positionClass:"toast-top-right"}),t.search()}),(function(e){t.handleError(e)}))}},{key:"handleError",value:function(e){400===e.status?this.toasterService.error(e.error.message,"Error!",{positionClass:"toast-top-right"}):alert("Problems while deleting records!")}},{key:"export",value:function(){var e=this.courseService.getCurrentDate();this.courseService.exportData(this.searchObj,"Course-"+e)}},{key:"courseDashboard",value:function(e){this.router.navigate(["/course-dashboard"],{queryParams:{campaign_id:this.campaign_id,course_id:e}})}},{key:"fileChange",value:function(e){this.uploadedFile=e}},{key:"upload",value:function(e){var t=this,n=new FormData;n.set("upload_file",e,e.name),this.courseService.upload(n).subscribe((function(e){return t.closePopup(e)}),(function(e){return t.controlError(e)}))}},{key:"controlError",value:function(e){if(400===e.status){for(var t=0,n=Object.keys(e.error.error);t<n.length;t++){var r=n[t];this.errors.push(e.error.error[r])}alert(e.error.error.upload_file)}}},{key:"closePopup",value:function(e){this.toasterService.success(e.data.count+" Records Uploaded Successfully!","Success!",{positionClass:"toast-top-right"}),this.search()}},{key:"changeCampaign",value:function(e){this.cs.setCampaignId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.campaign_id=e.id,this.router.navigate(["geography"],{queryParams:{campaign_id:e.id}}),this.search()}}]),e}()).\u0275fac=function(e){return new(e||O)(m["\u0275\u0275directiveInject"](i.a),m["\u0275\u0275directiveInject"](i.c),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](p.b),m["\u0275\u0275directiveInject"](g.a))},O.\u0275cmp=m["\u0275\u0275defineComponent"]({type:O,selectors:[["app-course"]],decls:22,vars:13,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCampaign"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[3,"showAdd","showExport","uploadFields","uploadFile","uploaded","download"],[1,"row","pt-1"],[1,"col-md-4","pt-2"],["type","text","placeholder","Search By Name",1,"form-control",3,"ngModel","keyup","ngModelChange"],["title","Are you sure ?","text","This cannot be undone","icon","question",3,"showCancelButton","focusCancel"],["deleteSwal",""],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"col-lg-12","mt-2"],[1,"pull-right"],[1,"tot-record"],[1,"col-lg-4","col-sm-6","col-container",3,"routerLink","queryParams"],[1,"card","col-cell-add"],[1,"text-center","p-4"],[1,"col-md-7"],[2,"color","#505050","font-size","25px"],[1,"col-md-5"],["src","assets/img/logos/add-button-tp-bg.png","alt",""],["class","col-lg-4 col-sm-6 col-container",4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6","col-container"],[1,"card","col-cell",3,"click"],[1,"col-8"],["class","ml-2 ng2-smart-action ng2-smart-action-edit-edit",3,"routerLink","queryParams",4,"ngIf"],[1,"col-4"],[1,"text-right"],["class","ng2-smart-action ng2-smart-action-delete-delete",3,"swal","confirm",4,"ngIf"],[2,"border","none !important","width","100%"],[2,"width","35%","text-align","center"],["src","assets/img/course-vector.png",2,"margin","5px"],[2,"width","65%"],[1,"camp-title"],[1,"col-lg-6","col-sm-6","col-6","text-center","p-1",2,"border-right","1px solid #f3f1f1",3,"routerLink","queryParams"],[1,"file-counter-container"],[1,"camp-code"],[1,"col-lg-6","col-sm-6","col-6","text-center",2,"border-bottom","1px solid #f3f1f1",3,"routerLink","queryParams"],["src","assets/img/logos/add-button-tp-bg.png",2,"width","30px"],[1,"ml-2","ng2-smart-action","ng2-smart-action-edit-edit",3,"routerLink","queryParams"],[1,"ft-edit-2","info","font-medium-1","mr-2"],[1,"ng2-smart-action","ng2-smart-action-delete-delete",3,"swal","confirm"],[1,"ft-trash-2","danger","font-medium-1","mr-2"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"app-topbar",1),m["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](2,"section",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"div",5),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275elementStart"](7,"h4",7),m["\u0275\u0275text"](8,"Course"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"app-actionbtns",8),m["\u0275\u0275listener"]("uploadFile",(function(e){return t.upload(e)}))("uploaded",(function(e){return t.fileChange(e)}))("download",(function(){return t.export()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",9),m["\u0275\u0275elementStart"](11,"div",10),m["\u0275\u0275elementStart"](12,"input",11),m["\u0275\u0275listener"]("keyup",(function(){return t.search()}))("ngModelChange",(function(e){return t.course_name=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](13,"swal",12,13),m["\u0275\u0275elementStart"](15,"div",3),m["\u0275\u0275template"](16,k,16,7,"ng-container",14),m["\u0275\u0275pipe"](17,"async"),m["\u0275\u0275template"](18,D,1,0,"ng-template",null,15,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](20,P,2,5,"div",16),m["\u0275\u0275pipe"](21,"async"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](19);m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("showAdd",!1)("showExport",t.showExport)("uploadFields",t.uploadFields),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngModel",t.course_name),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](17,9,t.courseData))("ngIfElse",n),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](21,11,t.courseData))}},directives:[f.a,v.a,h.b,h.q,h.t,y.a,r.n,i.d,r.m,i.f,y.b,a.l],pipes:[r.b],styles:[".col-container[_ngcontent-%COMP%]{display:flex;width:100%;cursor:pointer}.col-cell-add[_ngcontent-%COMP%]{flex:1;display:flex;border-radius:10px;border:1px solid #efdb7e;background:linear-gradient(179.73deg,#fffbed .24%,#fce492 146.48%),#f1f1f1;transition:background-color .5s;transition:border .5s;box-shadow:0 4px 14px rgba(0,0,0,.16)}.col-cell[_ngcontent-%COMP%]{flex:1;display:flex;border-radius:10px;padding:3px;border:1px solid #ece7ff;background:linear-gradient(180deg,#fcf3fa 22.79%,#ffe6fa 129.93%),#fcf2fa;transition:.3s ease-in-out;box-shadow:0 4px 20px rgb(0 0 0/8%)}.col-cell[_ngcontent-%COMP%]:hover{background-color:#fffde9;transform:translateY(-8px);box-shadow:0 8px 9px 0 rgb(0 0 0/22%)}.border-orange[_ngcontent-%COMP%]{border:4px solid #f7941e}.delete-right[_ngcontent-%COMP%]{position:relative;top:-10px;right:-16px}.delete-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:background-color .5s!important}.delete-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{font-weight:700;transform:rotate(180deg)!important;background-color:red;color:#fff!important}.camp-code[_ngcontent-%COMP%]{font-weight:600;margin:0 5px;color:#54339e}h4.camp-title[_ngcontent-%COMP%]{font-size:18px;text-decoration:none}"]}),O);n("qnbw");var A=n("+z1p"),j=n("IrUG"),V=n("m86e"),M=n("zioG"),R=n("Egam");function N(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Name is required! "),m["\u0275\u0275elementEnd"]())}function z(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Name must be atleast 3 characters! "),m["\u0275\u0275elementEnd"]())}function L(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Name can have maximum 50 characters! "),m["\u0275\u0275elementEnd"]())}function B(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Name must be letters, numbers or dashes! "),m["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,N,2,0,"div",22),m["\u0275\u0275template"](2,z,2,0,"div",22),m["\u0275\u0275template"](3,L,2,0,"div",22),m["\u0275\u0275template"](4,B,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("name").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("name").errors.minlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("name").errors.maxlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("name").errors.pattern)}}function T(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.name," ")}}function K(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275element"](1,"ng-multiselect-dropdown",45),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf,r=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("placeholder","Select group")("settings",r.dropdownSettings)("data",n.data)("disabled",r.isDisabled)}}function G(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Group is required! "),m["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,G,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("group_id").errors.required)}}function H(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.group_id," ")}}function $(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Course Description is required! "),m["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Course Description must be atleast 3 characters! "),m["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Course Description can have maximum 50 characters! "),m["\u0275\u0275elementEnd"]())}function Q(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Course Description must be letters, numbers or dashes! "),m["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,$,2,0,"div",22),m["\u0275\u0275template"](2,X,2,0,"div",22),m["\u0275\u0275template"](3,J,2,0,"div",22),m["\u0275\u0275template"](4,Q,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("description").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("description").errors.minlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("description").errors.maxlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("description").errors.pattern)}}function W(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.description," ")}}function ee(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275elementStart"](1,"p"),m["\u0275\u0275text"](2,"Previously Selected Media : "),m["\u0275\u0275elementStart"](3,"a",46),m["\u0275\u0275text"](4,"Click here"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](3),m["\u0275\u0275propertyInterpolate"]("href",n.image_url,m["\u0275\u0275sanitizeUrl"])}}function te(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.image," ")}}function ne(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Sort Order is required! "),m["\u0275\u0275elementEnd"]())}function re(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Sort Order must be atleast 3 characters! "),m["\u0275\u0275elementEnd"]())}function ae(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Sort Order can have maximum 50 characters! "),m["\u0275\u0275elementEnd"]())}function ie(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Sort Order must be numbers "),m["\u0275\u0275elementEnd"]())}function oe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,ne,2,0,"div",22),m["\u0275\u0275template"](2,re,2,0,"div",22),m["\u0275\u0275template"](3,ae,2,0,"div",22),m["\u0275\u0275template"](4,ie,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("sort_order").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("sort_order").errors.minlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("sort_order").errors.maxlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("sort_order").errors.pattern)}}function de(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.sort_order," ")}}function se(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Start Date is required! "),m["\u0275\u0275elementEnd"]())}function le(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Start Date must be atleast 3 characters! "),m["\u0275\u0275elementEnd"]())}function ce(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Start Date can have maximum 50 characters! "),m["\u0275\u0275elementEnd"]())}function me(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," Start Date must be letters, numbers or dashes! "),m["\u0275\u0275elementEnd"]())}function ue(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,se,2,0,"div",22),m["\u0275\u0275template"](2,le,2,0,"div",22),m["\u0275\u0275template"](3,ce,2,0,"div",22),m["\u0275\u0275template"](4,me,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("start_date").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("start_date").errors.minlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("start_date").errors.maxlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("start_date").errors.pattern)}}function pe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.start_date," ")}}function ge(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," End Date is required! "),m["\u0275\u0275elementEnd"]())}function fe(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," End Date must be atleast 3 characters! "),m["\u0275\u0275elementEnd"]())}function ve(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," End Date can have maximum 50 characters! "),m["\u0275\u0275elementEnd"]())}function he(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275text"](1," End Date must be letters, numbers or dashes! "),m["\u0275\u0275elementEnd"]())}function ye(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275template"](1,ge,2,0,"div",22),m["\u0275\u0275template"](2,fe,2,0,"div",22),m["\u0275\u0275template"](3,ve,2,0,"div",22),m["\u0275\u0275template"](4,he,2,0,"div",22),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("end_date").errors.required),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("end_date").errors.minlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("end_date").errors.maxlength),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.courseForm.get("end_date").errors.pattern)}}function xe(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",44),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.error_messages.end_date," ")}}var Se=function(){return["/course"]},be=function(e){return{campaign_id:e}};function Ee(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"form",10),m["\u0275\u0275listener"]("submit",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().onSubmit()})),m["\u0275\u0275elementStart"](2,"div",11),m["\u0275\u0275elementStart"](3,"h4",12),m["\u0275\u0275element"](4,"i",13),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",14),m["\u0275\u0275elementStart"](7,"div",15),m["\u0275\u0275elementStart"](8,"label",16),m["\u0275\u0275text"](9," Course Name "),m["\u0275\u0275elementStart"](10,"span",17),m["\u0275\u0275text"](11,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"div",18),m["\u0275\u0275element"](13,"input",19),m["\u0275\u0275template"](14,Z,5,4,"div",20),m["\u0275\u0275template"](15,T,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",14),m["\u0275\u0275elementStart"](17,"div",15),m["\u0275\u0275elementStart"](18,"label",21),m["\u0275\u0275text"](19," Group "),m["\u0275\u0275elementStart"](20,"span",17),m["\u0275\u0275text"](21,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"div",18),m["\u0275\u0275template"](23,K,2,4,"ng-container",22),m["\u0275\u0275pipe"](24,"async"),m["\u0275\u0275template"](25,U,2,1,"div",20),m["\u0275\u0275template"](26,H,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"div",14),m["\u0275\u0275elementStart"](28,"div",15),m["\u0275\u0275elementStart"](29,"label",23),m["\u0275\u0275text"](30," Course Description "),m["\u0275\u0275elementStart"](31,"span",17),m["\u0275\u0275text"](32,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"div",18),m["\u0275\u0275element"](34,"ckeditor",24),m["\u0275\u0275template"](35,Y,5,4,"div",20),m["\u0275\u0275template"](36,W,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"div",14),m["\u0275\u0275elementStart"](38,"div",15),m["\u0275\u0275elementStart"](39,"label",25),m["\u0275\u0275text"](40," Course Image "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"div",18),m["\u0275\u0275elementStart"](42,"input",26),m["\u0275\u0275listener"]("change",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().imageChange(e.target.files)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](43,"br"),m["\u0275\u0275template"](44,ee,5,1,"span",22),m["\u0275\u0275template"](45,te,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](46,"div",14),m["\u0275\u0275elementStart"](47,"div",15),m["\u0275\u0275elementStart"](48,"label",27),m["\u0275\u0275text"](49," Sort Order "),m["\u0275\u0275elementStart"](50,"span",17),m["\u0275\u0275text"](51,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](52,"div",18),m["\u0275\u0275element"](53,"input",28),m["\u0275\u0275template"](54,oe,5,4,"div",20),m["\u0275\u0275template"](55,de,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](56,"div",14),m["\u0275\u0275elementStart"](57,"div",15),m["\u0275\u0275elementStart"](58,"label",29),m["\u0275\u0275text"](59," Start Date "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](60,"div",30),m["\u0275\u0275element"](61,"input",31,32),m["\u0275\u0275elementStart"](63,"div",33),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275reference"](62).toggle()})),m["\u0275\u0275element"](64,"i",34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](65,ue,5,4,"div",20),m["\u0275\u0275template"](66,pe,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"label",35),m["\u0275\u0275text"](68," End Date "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](69,"div",30),m["\u0275\u0275element"](70,"input",36,37),m["\u0275\u0275elementStart"](72,"div",33),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275reference"](71).toggle()})),m["\u0275\u0275element"](73,"i",34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](74,ye,5,4,"div",20),m["\u0275\u0275template"](75,xe,2,1,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](76,"div",38),m["\u0275\u0275element"](77,"div",39),m["\u0275\u0275elementStart"](78,"div",18),m["\u0275\u0275elementStart"](79,"a",40),m["\u0275\u0275element"](80,"i",41),m["\u0275\u0275text"](81," Cancel "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](82,"button",42),m["\u0275\u0275element"](83,"i",43),m["\u0275\u0275text"](84," Save "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",r.courseForm),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"](" ",r.title," "),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngIf",r.courseForm.get("name").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.name),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](24,22,r.groupData)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",r.courseForm.get("group_id").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.group_id),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("editor",r.Editor),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.courseForm.get("description").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.description),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",r.image_url),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.image),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngIf",r.courseForm.get("sort_order").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.sort_order),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("minDate",r.minDate),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",r.courseForm.get("start_date").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.start_date),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("minDate",r.minDate),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",r.courseForm.get("end_date").errors&&r.submitted),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",r.error_messages.end_date),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("routerLink",m["\u0275\u0275pureFunction0"](24,Se))("queryParams",m["\u0275\u0275pureFunction1"](25,be,r.campaign_id))}}function Ce(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",47),m["\u0275\u0275elementStart"](1,"div",48),m["\u0275\u0275elementStart"](2,"p"),m["\u0275\u0275text"](3,"Loading Data..."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}var _e,we,Ie,Fe=((_e=function(){function e(t,n,r,a,i,o,d,s){_classCallCheck(this,e),this.fb=t,this.router=n,this.activeRoute=r,this.geoService=a,this.toasterService=i,this.cs=o,this.courseService=d,this.groupService=s,this.campaign_id="",this.geography_id="",this.course_id="",this.isDisabled=!1,this.submitted=!1,this.minDate={},this.image_url="",this.companyData=[],this.campaignData=[],this.typesData=[],this.groupData=[],this.nationalZonesData=[],this.zonesData=[],this.regionsData=[],this.areaData=[],this.cityData=[],this.errors=[],this.error_messages=[],this.Editor=A,this.showField={"National Zone":!1,Zone:!1,Region:!1,Area:!1,City:!1},this.fields=[{keyname:"national_zone",text:"National Zone"},{keyname:"zone",text:"Zone"},{keyname:"region",text:"Region"},{keyname:"area",text:"Area"},{keyname:"city",text:"City"}],A.defaultConfig={ckfinder:{uploadUrl:"https://uat-lurn.techizertech.in/api/v1/files/upload",headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer "+localStorage.getItem("userToken")}},placeholder:"Type the content here!",toolbar:{items:["heading","|","bold","italic","|","bulletedList","numberedList","|","undo","redo"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}return _createClass(e,[{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"ngOnInit",value:function(){var e=this;this.campaign_id=this.getCurrentCampaign(),this.groupData=this.groupService.getGroupFromCampaign(this.campaign_id);var t=this.activeRoute.snapshot.data;this.title=t.title,this.urlKey=t.urlKey,this.disabled=!1,this.dropdownSettings=c.a.dropDownSettings(!0,!0);var n=new Date;"add"===this.urlKey?(this.minDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()},this.courseForm=this.create_form(),this.buildForm=!0):this.activeRoute.params.pipe(Object(l.a)((function(t){return e.courseService.getAll({id:t.id})}))).subscribe((function(t){t.data&&t.data[0]?(e.courseData=t.data[0],e.course_id=t.data[0].id,e.isDisabled=!0,e.courseForm=e.create_form(e.courseData),e.buildForm=!0):e.buildForm=!0}))}},{key:"resetHeirarchyFor",value:function(e){"All"===e&&(this.courseForm.controls.national_zone.patchValue([]),this.nationalZonesData=[]),"National Zone"!==e&&"All"!==e||(this.courseForm.controls.zone.patchValue([]),this.zonesData=[]),"National Zone"!==e&&"Zone"!==e&&"All"!==e||(this.courseForm.controls.region.patchValue([]),this.regionsData=[]),"National Zone"!==e&&"Zone"!==e&&"Region"!==e&&"All"!==e||(this.courseForm.controls.area.patchValue([]),this.areaData=[]),"National Zone"!==e&&"Zone"!==e&&"Region"!==e&&"Area"!==e&&"All"!==e||(this.courseForm.controls.city.patchValue([]),this.cityData=[])}},{key:"resetFieldsAndVAlidity",value:function(){var e=this,t=function(t){if(e.showField.hasOwnProperty(t)){e.showField[t]=!1;var n=e.fields.find((function(e){return e.text===t}));e.courseForm.controls[n.keyname].setValidators(null),e.courseForm.controls[n.keyname].updateValueAndValidity()}};for(var n in this.showField)t(n)}},{key:"requiredFields",value:function(e){var t=this;if(e.name){var n=this.typesData.findIndex((function(t){return t.name===e.name}));if(this.resetFieldsAndVAlidity(),n>-1)for(var r=function(e){var n=t.typesData[e].name;t.showField[n]=!0;var r=t.fields.find((function(e){return e.text===n}));t.courseForm.controls[r.keyname].setValidators([h.B.required]),t.courseForm.controls[r.keyname].updateValueAndValidity()},a=0;a<n;a++)r(a)}}},{key:"create_form",value:function(e){e&&e.image&&(this.image_url=e.image);var t=[],n=[];return e&&(e.start_date&&(t=e.start_date.split("-")),e.end_date&&(n=e.end_date.split("-"))),this.fb.group({name:[e?e.name:"",[h.B.required,h.B.minLength(3),h.B.maxLength(255),h.B.pattern("^([a-zA-Z0-9- ])+$")]],group_id:[e?[{id:e.group_id,name:e.group_name}]:"",[h.B.required]],description:[e?e.description:"",[h.B.required,h.B.minLength(5),h.B.maxLength(1e3)]],image:["",[]],sort_order:[e?e.sort_order:"",[h.B.required,h.B.pattern("^([0-9])+$")]],start_date:[e&&e.start_date?{day:+t[2],month:+t[1],year:+t[0]}:null,[]],end_date:[e&&e.end_date?{day:+n[2],month:+n[1],year:+n[0]}:null,[]]})}},{key:"listing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n?this.geoService.getGeography(e,t,n):this.geoService.getGeography(e,t)}},{key:"loadingFieldData",value:function(e,t){"National Zone"===e.name&&(this.nationalZonesData=t.data),"Zone"===e.name&&(this.zonesData=t.data),"Region"===e.name&&(this.regionsData=t.data),"Area"===e.name&&(this.areaData=t.data),"City"===e.name&&(this.cityData=t.data)}},{key:"getParent",value:function(e){return"National Zone"===e?this.courseForm.controls.national_zone.value:"Zone"===e?this.courseForm.controls.zone.value:"Region"===e?this.courseForm.controls.region.value:"Area"===e?this.courseForm.controls.area.value:"City"===e?this.courseForm.controls.city.value:null}},{key:"initializeFields",value:function(e){for(var t=this,n=e.length,r=null,a=function(n){if(n>0){var a=t.getParent(e[n-1].name);a.length&&a[0]&&(r=a[0].id)}t.listing(e[n].id,r,t.campaign_id).subscribe((function(r){t.loadingFieldData(e[n],r)}))},i=0;i<n;i++)a(i)}},{key:"updateValue",value:function(e,t){var n=this,r=this.typesData.findIndex((function(e){return e.name===t}));if(r>=0){var a=this.typesData[r+1];this.listing(a.id,e.id,this.campaign_id).subscribe((function(e){n.loadingFieldData(a,e)}))}}},{key:"removeValue",value:function(e,t){this.resetHeirarchyFor(t)}},{key:"imageChange",value:function(e){this.image=e.length?e.item(0):null}},{key:"onSubmit",value:function(){var e=this;if(this.submitted=!0,!this.courseForm.invalid){var t=this.courseForm.value,n=new FormData;this.geoService.getCampaignDataById(this.campaign_id).subscribe((function(r){n.set("campaign_id",e.campaign_id),n.set("name",t.name),t.description&&n.set("description",t.description),e.image&&n.set("image",e.image,e.image.name),t.start_date&&n.set("start_date",(t.start_date.day<10?"0"+t.start_date.day:t.start_date.day)+"-"+t.start_date.month+"-"+t.start_date.year),t.end_date&&n.set("end_date",(t.end_date.day<10?"0"+t.end_date.day:t.end_date.day)+"-"+t.end_date.month+"-"+t.end_date.year),e.courseForm.value.group_id&&n.set("group_id",e.courseForm.value.group_id[0].id),n.set("sort_order",t.sort_order);var a=e.typesData.findIndex((function(e){return e.name===t.type[0].name}));if(a>0){var i=e.getParent(e.typesData[a-1].name);n.set("parent_id",i[0].id)}"add"===e.urlKey?e.save(n):e.update(n)}))}}},{key:"save",value:function(e){var t=this;this.courseService.save(e).subscribe((function(e){t.router.navigate(["/course"],{queryParams:{campaign_id:t.campaign_id}}).then((function(){t.toasterService.success("Records Added Successfully!","Success!",{positionClass:"toast-top-right"})}))}),(function(e){t.handleError(e,t.courseForm)}))}},{key:"update",value:function(e){var t=this;this.courseService.update(e,this.course_id).subscribe((function(e){t.router.navigate(["/course"],{queryParams:{campaign_id:t.campaign_id}}).then((function(){t.toasterService.success("Records Updated Successfully!","Success!",{positionClass:"toast-top-right"})}))}),(function(e){t.handleError(e,t.courseForm)}))}},{key:"handleError",value:function(e,t){400===e.status?this.error_messages=e.error.error:alert("Problems while saving data")}},{key:"elementTouched",value:function(e){e.markAsTouched()}},{key:"changeCampaign",value:function(e){this.cs.setCampaignId(e.id)}},{key:"geography",get:function(){return this.courseForm}}]),e}()).\u0275fac=function(e){return new(e||_e)(m["\u0275\u0275directiveInject"](h.e),m["\u0275\u0275directiveInject"](i.c),m["\u0275\u0275directiveInject"](i.a),m["\u0275\u0275directiveInject"](j.a),m["\u0275\u0275directiveInject"](p.b),m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](V.a))},_e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:_e,selectors:[["app-form"]],decls:11,vars:2,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCampaign"],["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"px-3"],[4,"ngIf","ngIfElse"],["norecord",""],[1,"form","form-horizontal","striped-rows",3,"formGroup","submit"],[1,"form-body"],[1,"form-section"],[1,"ft-user"],[1,"form-group"],[1,"row"],["for","name",1,"col-md-3","pt-1"],[2,"color","red"],[1,"col-md-9"],["type","text","formControlName","name","id","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","group",1,"col-md-3"],[4,"ngIf"],["for","description",1,"col-md-3","pt-1"],["formControlName","description","data","",2,"height","800px",3,"editor"],["for","image",1,"col-md-3","pt-1"],["type","file","formControlName","image","accept","image/x-png,image/gif,image/jpeg,image/jpg","id","image",1,"form-control",3,"change"],["for","sort_order",1,"col-md-3","pt-1"],["type","number","formControlName","sort_order","id","sort_order","min","1",1,"form-control"],["for","start_date",1,"col-md-3","pt-1"],[1,"input-group","col-md-3"],["placeholder","dd-mm-yyyy","formControlName","start_date","ngbDatepicker","",1,"form-control",3,"minDate"],["start_date","ngbDatepicker"],[1,"input-group-addon",3,"click"],[1,"fa","fa-calendar",2,"cursor","pointer"],["for","end_date",1,"col-md-3","pt-1","text-center"],["placeholder","dd-mm-yyyy","formControlName","end_date","ngbDatepicker","",1,"form-control",3,"minDate"],["end_date","ngbDatepicker"],[1,"form-actions","center"],[1,"col-md-3"],[1,"btn","btn-raised","btn-orange","mr-1",3,"routerLink","queryParams"],[1,"ft-x"],["type","submit",1,"btn","btn-raised","btn-purple"],[1,"fa","fa-check-square-o"],[1,"invalid-feedback"],["formControlName","group_id",3,"placeholder","settings","data","disabled"],["target","_blank",3,"href"],[1,"card","col-12"],[1,"card-body","mt-3"]],template:function(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"app-topbar",1),m["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](2,"section",2),m["\u0275\u0275elementStart"](3,"div",3),m["\u0275\u0275elementStart"](4,"div",4),m["\u0275\u0275elementStart"](5,"div",5),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275elementStart"](7,"div",7),m["\u0275\u0275template"](8,Ee,85,27,"ng-container",8),m["\u0275\u0275template"](9,Ce,4,0,"ng-template",null,9,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275reference"](10);m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",n)}},directives:[f.a,r.n,h.D,h.r,h.j,h.b,h.q,h.h,M.a,h.v,a.g,i.f,R.a],pipes:[r.b],styles:[""]}),_e),ke=[{path:"",component:q,data:{title:"Course",permission:"list-campaign"}},{path:"add",component:Fe,data:{title:"Add Course",permission:"create-campaign",urlKey:"add"}},{path:"edit/:id",component:Fe,data:{title:"Edit Course",permission:"modify-campaign",urlKey:"edit"}},{path:"dashboard",component:n("g0uj").a,data:{title:"Course Dashboard",permission:"list-course-dashboard"}}],De=((we=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:we}),we.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||we)},imports:[[i.g.forChild(ke)],i.g]}),we),Pe=n("R9Cn"),Oe=n("PCNd"),qe=((Ie=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:Ie}),Ie.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Ie)},providers:[u.a],imports:[[r.c,De,a.j,h.l,h.y,Pe.b,R.b.forRoot(),Oe.a,a.i,y.c.forRoot()]]}),Ie)},utbL:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("fXoL"),a=n("tyNb"),i=n("hHWK"),o=n("82/m"),d=n("IAlr"),s=n("ofXK"),l=n("1kSV"),c=n("3Pt+"),m=["uploadForm"];function u(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().add()})),r["\u0275\u0275element"](1,"i",14),r["\u0275\u0275elementEnd"]()}}function p(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().initiateExport()})),r["\u0275\u0275element"](1,"i",15),r["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.isCollapsed=!e.isCollapsed})),r["\u0275\u0275element"](1,"i",17),r["\u0275\u0275elementEnd"]()}if(2&e){var a=r["\u0275\u0275nextContext"]();r["\u0275\u0275attribute"]("aria-expanded",!a.isCollapsed)}}var f=function(){var e=function(){function e(t,n,a,i){_classCallCheck(this,e),this.router=t,this.cs=n,this.ss=a,this.courseService=i,this.download=new r.EventEmitter,this.uploaded=new r.EventEmitter,this.uploadFile=new r.EventEmitter,this.files=[],this.isCollapsed=!0,this.section_id="",this.course_id=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.campainId=this.cs.getCampaignId(),this.section_id=this.ss.getSectionId(),this.course_id=this.courseService.getCourseId()}},{key:"add",value:function(){this.router.navigate([this.addRedirect],{queryParams:{section_id:this.section_id,campaign_id:this.campainId,course_id:this.course_id}})}},{key:"initiateExport",value:function(){this.download.emit("export_data")}},{key:"upload",value:function(){this.uploadFile.emit(this.files),this.isCollapsed=!0}},{key:"onChange",value:function(e){var t=e.srcElement.files;this.uploaded.emit(t[0]),this.files=t[0]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.c),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-actionbtns"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](m,!0),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.userFrm=n.first)},inputs:{addRedirect:"addRedirect",showAdd:"showAdd",showExport:"showExport",showImport:"showImport",uploadFields:"uploadFields",uploadAction:"uploadAction"},outputs:{download:"download",uploaded:"uploaded",uploadFile:"uploadFile"},decls:20,vars:5,consts:[[2,"float","right","margin-bottom","10px"],["class","btn btn-raised btn-purple m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-raised btn-purple m-1","aria-controls","collapseExample",3,"click",4,"ngIf"],["id","collapseExample",3,"ngbCollapse"],[2,"margin-top","60px","margin-bottom","5px",3,"ngSubmit"],["uploadForm","ngForm"],["id","upcsv",1,"form-group","fupload-main-contianer"],[1,"fupload"],["type","file","name","upload","id","upload",1,"",3,"change"],[1,"fbtn-upload"],["type","submit",1,"btn","btn-raised","btn-purple"],[2,"clear","both"],[1,"text-danger","text-csv"],[1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-plus-circle","white","warning","font-medium-1",2,"color","#fff !important"],[1,"ft-download","white","warning","font-medium-1",2,"color","#fff !important"],["type","button","aria-controls","collapseExample",1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-upload","white","warning","font-medium-1",2,"color","#fff !important"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275template"](1,u,2,0,"a",1),r["\u0275\u0275template"](2,p,2,0,"a",1),r["\u0275\u0275template"](3,g,2,1,"button",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",3),r["\u0275\u0275elementStart"](5,"form",4,5),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.upload()})),r["\u0275\u0275elementStart"](7,"div",6),r["\u0275\u0275elementStart"](8,"b"),r["\u0275\u0275text"](9,"Upload CSV"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"br"),r["\u0275\u0275elementStart"](11,"div",7),r["\u0275\u0275elementStart"](12,"input",8),r["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",9),r["\u0275\u0275elementStart"](15,"button",10),r["\u0275\u0275text"](16," Upload "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"span",12),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showAdd),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showExport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showImport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngbCollapse",t.isCollapsed),r["\u0275\u0275advance"](15),r["\u0275\u0275textInterpolate1"]("Csv Format (",t.uploadFields,")"))},directives:[s.n,l.b,c.D,c.r,c.s],styles:[".fupload-main-contianer[_ngcontent-%COMP%]{width:50%;border:2px dotted #ffc107;padding:18px;border-radius:5px;background-color:#fffcf7}.fupload[_ngcontent-%COMP%]{padding-top:5px}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:50%;float:left}.text-csv[_ngcontent-%COMP%]{font-size:13px}@media only screen and (max-width:600px){.fupload-main-contianer[_ngcontent-%COMP%]{width:100%!important}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:1024px){.fupload-main-contianer[_ngcontent-%COMP%]{width:80%!important}}"]}),e}()}}]);