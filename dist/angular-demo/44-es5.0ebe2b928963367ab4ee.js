function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"4ni2":function(e,t,n){"use strict";n.r(t),n.d(t,"CourseUserRoleModule",(function(){return ce}));var r,i=n("ofXK"),a=n("3Pt+"),o=n("Egam"),s=n("tyNb"),c=n("zE9r"),l=n("lJxs"),d=n("bOdf"),u=n("Kj3r"),p=n("/uUt"),m=n("eIep"),f=(n("6Br6"),n("quSY")),h=n("uu/O"),v=n("fXoL"),g=n("82/m"),b=n("5eHb"),S=n("hHWK"),y=n("IAlr"),C=n("jhN1"),_=n("m86e"),E=n("AytR"),x=n("G5QB"),w=n("tk/3"),I=n("ZtWP"),k=((r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,o){var s;return _classCallCheck(this,n),(s=t.call(this,"course_user_role",e)).http=e,s.campaignService=r,s.companyService=i,s.groupService=a,s.courseService=o,s.apiUrl=E.a.apiUrl,s.formData=new FormData,s}return n}(x.a)).\u0275fac=function(e){return new(e||r)(v["\u0275\u0275inject"](w.b),v["\u0275\u0275inject"](S.a),v["\u0275\u0275inject"](I.a),v["\u0275\u0275inject"](_.a),v["\u0275\u0275inject"](y.a))},r.\u0275prov=v["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"}),r),R=n("c6jh"),j=n("utbL"),F=n("QJFE"),D=n("1kSV"),O=["searchForm"],P=["isCollapsed"];function U(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",19),v["\u0275\u0275elementStart"](1,"b",20),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("Total Records : ",null==n.records.meta||null==n.records.meta.pagination?null:n.records.meta.pagination.total,"")}}function V(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275text"](2,"No Records Found!"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275attribute"]("colSpan",9))}function A(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"td"),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"td"),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"td"),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"td"),v["\u0275\u0275text"](10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"td"),v["\u0275\u0275text"](12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"td"),v["\u0275\u0275text"](14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=t.index,i=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",(i.records.meta.pagination.current_page-1)*i.records.meta.pagination.per_page+r+1," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.course_name," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.group_name," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.user_name," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.username," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.designation_name," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",n.role_name," ")}}function q(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,V,3,1,"tr",17),v["\u0275\u0275template"](2,A,15,7,"tr",22),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!n.records.data.length),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n.records.data)}}function M(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275elementStart"](1,"button",23),v["\u0275\u0275listener"]("confirm",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).deleteSelected()})),v["\u0275\u0275text"](2,"Delete"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){v["\u0275\u0275nextContext"](2);var r=v["\u0275\u0275reference"](11);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("swal",r)}}function T(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275elementStart"](1,"button",24),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).invalidSelection()})),v["\u0275\u0275text"](2,"Delete"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}function z(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"table",21),v["\u0275\u0275elementStart"](2,"thead"),v["\u0275\u0275elementStart"](3,"tr"),v["\u0275\u0275elementStart"](4,"th"),v["\u0275\u0275text"](5,"Sr. No"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"th"),v["\u0275\u0275text"](7,"Course Name"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"th"),v["\u0275\u0275text"](9,"Group Name"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"th"),v["\u0275\u0275text"](11,"Name"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"th"),v["\u0275\u0275text"](13,"Username"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"th"),v["\u0275\u0275text"](15,"Designation"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"th"),v["\u0275\u0275text"](17,"Permission"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"tbody"),v["\u0275\u0275template"](19,q,3,2,"ng-container",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](20,"br"),v["\u0275\u0275element"](21,"br"),v["\u0275\u0275template"](22,M,3,1,"div",17),v["\u0275\u0275template"](23,T,3,0,"div",17),v["\u0275\u0275element"](24,"br"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](),r=v["\u0275\u0275reference"](20);v["\u0275\u0275advance"](19),v["\u0275\u0275property"]("ngIf",n.records)("ngIfElse",r),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",n.SelectedIDs.length&&n.showMultiDelete),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!n.SelectedIDs.length&&n.showMultiDelete)}}function N(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275elementStart"](1,"ngb-pagination",25),v["\u0275\u0275listener"]("pageChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().pageChange(e)}))("pageChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().records.meta.pagination.current_page=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",r.records.meta.pagination.total)("pageSize",r.records.meta.pagination.per_page)("page",r.records.meta.pagination.current_page)}}function K(e,t){1&e&&v["\u0275\u0275text"](0,"Loading Data...")}var L,Q=((L=function(){function e(t,n,r,i,a,o,s,c,l){_classCallCheck(this,e),this.router=t,this.activeRoute=n,this.sectionService=r,this.toasterService=i,this.cs=a,this.courseService=o,this.sanitizer=s,this.groupService=c,this.courseUserRoleService=l,this.errors=[],this.subscription=new f.a,this.uploadFields=[],this.uploadedFile=[],this.showExport=!1,this.showDelete=!1,this.showMultiDelete=!1,this.showAdd=!1,this.showEdit=!1,this.sectionData=[],this.usersData=[],this.parameters={},this.searchObj={},this.SelectedIDs=[]}return _createClass(e,[{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"getCurrentCourse",value:function(){return this.courseService.getCourseId()}},{key:"ngOnInit",value:function(){var e=this;this.title=this.activeRoute.snapshot.data.title,this.campaign_id=this.getCurrentCampaign(),this.course_id=this.getCurrentCourse(),this.sectionService.getAll({},"section").subscribe((function(t){t.data&&(e.sectionData=t)})),this.campaign_id&&(this.parameters.campaign_id=this.campaign_id);var t=this.courseUserRoleService.checkPermissionExist(["export-course-user-role","remove-course-user-role","remove-course-user-role","creates-course-user-role","modifys-course-user-role"]);this.showExport=t[0],this.showDelete=t[1],this.showMultiDelete=t[2],this.showAdd=t[3],this.showEdit=t[4]}},{key:"ngAfterViewInit",value:function(){var e=this;this.subscription=c.a.merge(this.activeRoute.queryParams.pipe(Object(l.a)((function(t){return e.parameters=h.a.merge({},e.parameters,t),e.parameters})),Object(d.a)((function(t){return e.loadData(t)}))),this.search()).subscribe((function(t){t.data.forEach((function(n,r){var i=e.sanitizer.bypassSecurityTrustHtml(n.description);t.data[r].newStr=i})),e.records=t,e.uploadFields=t.fields}))}},{key:"loadData",value:function(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.courseUserRoleService.getAll(e)}},{key:"openUrl",value:function(e,t){this.router.navigate(["/"+t],{queryParams:{section_id:e,course_id:this.course_id,campaign_id:this.campaign_id}})}},{key:"fileChange",value:function(e){this.uploadedFile=e}},{key:"delete",value:function(e){var t=this,n=new FormData;this.courseUserRoleService.delete(n,e).subscribe((function(e){e.success?t.toasterService.success("Record Deleted!","Success!",{positionClass:"toast-top-right"}):t.toasterService.error(e.message,"Failed!",{positionClass:"toast-top-right"}),t.sf.form.updateValueAndValidity()}),(function(e){t.handleError(e)}))}},{key:"checkAll",value:function(e){var t=this,n=e.target.checked;this.records.data.forEach((function(e,r){e.selected=n,t.selectID(e.id,n)}))}},{key:"selectID",value:function(e,t){("boolean"==typeof t?t:t.target.checked)?this.SelectedIDs.push(e):this.SelectedIDs.pop(e)}},{key:"invalidSelection",value:function(){alert("Please Select atleast one record!")}},{key:"deleteSelected",value:function(){var e=this;this.courseUserRoleService.delete_all({id:this.SelectedIDs}).subscribe((function(t){e.toasterService.success(t.data+" Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),e.sf.form.updateValueAndValidity()}),(function(t){e.handleError(t)}))}},{key:"handleError",value:function(e){this.toasterService.error(e.error.message,400===e.status?"Error!":"Problems while deleting records!",{positionClass:"toast-top-right"})}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.sf.valueChanges.pipe(Object(u.a)(400),Object(p.a)(),Object(l.a)((function(n){return e.searchObj=h.a.removeNullKeys(n),e.parameters=h.a.merge({},e.parameters,e.searchObj,t),e.parameters})),Object(m.a)((function(t){return e.loadData(t)})))}},{key:"pageChange",value:function(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id,course_id:this.course_id}})}},{key:"upload",value:function(e){var t=this,n=new FormData;n.set("upload_file",e,e.name),this.courseUserRoleService.upload(n).subscribe((function(e){return t.closePopup(e)}),(function(e){return t.controlError(e)}))}},{key:"controlError",value:function(e){if(400===e.status){for(var t=0,n=Object.keys(e.error.error);t<n.length;t++){var r=n[t];this.errors.push(e.error.error[r])}alert(e.error.error.upload_file)}}},{key:"closePopup",value:function(e){this.toasterService.success(e.data.count+" Records Uploaded Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()}},{key:"export",value:function(){this.searchObj.campaign_id=this.getCurrentCampaign(),this.searchObj.course_id=this.course_id;var e=this.courseUserRoleService.getCurrentDate();this.courseUserRoleService.exportData(this.searchObj,"Course-User-Roles-"+e)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"changeCourse",value:function(e){this.courseService.setCourseId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.course_id=e.id,this.router.navigate(["section"],{queryParams:{course_id:e.id,campaign_id:this.campaign_id}}),this.sf.form.updateValueAndValidity()}}]),e}()).\u0275fac=function(e){return new(e||L)(v["\u0275\u0275directiveInject"](s.c),v["\u0275\u0275directiveInject"](s.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](b.b),v["\u0275\u0275directiveInject"](S.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](C.DomSanitizer),v["\u0275\u0275directiveInject"](_.a),v["\u0275\u0275directiveInject"](k))},L.\u0275cmp=v["\u0275\u0275defineComponent"]({type:L,selectors:[["app-section"]],viewQuery:function(e,t){var n;1&e&&(v["\u0275\u0275viewQuery"](O,!0),v["\u0275\u0275viewQuery"](P,!0)),2&e&&(v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.sf=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.isCollapsed=n.first))},decls:21,vars:11,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCourse"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[3,"showAdd","addRedirect","showExport","uploadFields","uploadFile","uploaded","download"],["title","Are you sure ?","text","This cannot be undone","icon","question",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"card-body"],[1,"card-block"],["style","float:right;",4,"ngIf"],["name","searchForm",1,"table-responsive"],["searchForm","ngForm"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["loading",""],[2,"float","right"],[1,"tot-record"],[1,"table","table-bordered","table-condensed","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"color","#fff !important",3,"swal","confirm"],[1,"btn","btn-danger",2,"color","#fff !important",3,"click"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"app-course-topbar",1),v["\u0275\u0275listener"]("changeCourse",(function(e){return t.changeCourse(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](2,"section",2),v["\u0275\u0275elementStart"](3,"div",3),v["\u0275\u0275elementStart"](4,"div",4),v["\u0275\u0275elementStart"](5,"div",5),v["\u0275\u0275elementStart"](6,"div",6),v["\u0275\u0275elementStart"](7,"h4",7),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"app-actionbtns",8),v["\u0275\u0275listener"]("uploadFile",(function(e){return t.upload(e)}))("uploaded",(function(e){return t.fileChange(e)}))("download",(function(){return t.export()})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](10,"swal",9,10),v["\u0275\u0275elementStart"](12,"div",11),v["\u0275\u0275elementStart"](13,"div",12),v["\u0275\u0275template"](14,U,3,1,"div",13),v["\u0275\u0275elementStart"](15,"form",14,15),v["\u0275\u0275template"](17,z,25,4,"ng-container",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](18,N,2,5,"div",17),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](19,K,1,0,"ng-template",null,18,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275reference"](20);v["\u0275\u0275advance"](8),v["\u0275\u0275textInterpolate"](t.title),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("showAdd",t.showAdd)("addRedirect","/course-user-role/add")("showExport",t.showExport)("uploadFields",t.uploadFields),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf",t.records),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",t.sectionData)("ngIfElse",n),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.records)}},directives:[R.a,j.a,F.a,i.n,a.D,a.r,a.s,i.m,F.b,D.l],styles:[""]}),L),B=n("LRne"),G=(n("qnbw"),n("+z1p"));function X(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275element"](1,"ng-multiselect-dropdown",24),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf,r=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("placeholder","Select User")("settings",r.dropdownSettingsSingle)("data",n.data[0].user)}}function H(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275text"](1," User is required! "),v["\u0275\u0275elementEnd"]())}function J(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",25),v["\u0275\u0275template"](1,H,2,0,"div",15),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.courseUserRoleForm.get("user_id").errors.required)}}function W(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",25),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",n.error_messages.user_id," ")}}var Y=function(){return["/section"]},Z=function(e,t){return{course_id:e,campaign_id:t}};function $(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"form",8),v["\u0275\u0275listener"]("submit",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onSubmit()})),v["\u0275\u0275elementStart"](2,"div",9),v["\u0275\u0275elementStart"](3,"div",10),v["\u0275\u0275elementStart"](4,"div",11),v["\u0275\u0275elementStart"](5,"label",12),v["\u0275\u0275text"](6," Users "),v["\u0275\u0275elementStart"](7,"span",13),v["\u0275\u0275text"](8,"*"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"div",14),v["\u0275\u0275template"](10,X,2,3,"ng-container",15),v["\u0275\u0275pipe"](11,"async"),v["\u0275\u0275template"](12,J,2,1,"div",16),v["\u0275\u0275template"](13,W,2,1,"div",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",17),v["\u0275\u0275element"](15,"div",18),v["\u0275\u0275elementStart"](16,"div",19),v["\u0275\u0275elementStart"](17,"a",20),v["\u0275\u0275element"](18,"i",21),v["\u0275\u0275text"](19," Cancel "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"button",22),v["\u0275\u0275element"](21,"i",23),v["\u0275\u0275text"](22," Save "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("formGroup",r.courseUserRoleForm),v["\u0275\u0275advance"](9),v["\u0275\u0275property"]("ngIf",v["\u0275\u0275pipeBind1"](11,6,r.usersData)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",r.courseUserRoleForm.get("user_id").errors&&r.submitted),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.error_messages.user_id),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction0"](8,Y))("queryParams",v["\u0275\u0275pureFunction2"](9,Z,r.course_id,r.campaign_id))}}function ee(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"p"),v["\u0275\u0275text"](1,"Loading Data..."),v["\u0275\u0275elementEnd"]())}var te,ne,re,ie=((te=function(){function e(t,n,r,i,a,o,s,c){_classCallCheck(this,e),this.sectionService=t,this.activeRoute=n,this.router=r,this.fb=i,this.toasterService=a,this.cs=o,this.courseService=s,this.groupService=c,this.campaign_id="",this.section_id="",this.description="",this.color1="#ffffff",this.Editor=G,this.formData=new FormData,this.submitted=!1,this.error_messages=[],G.defaultConfig={ckfinder:{uploadUrl:"https://uat-lurn.techizertech.in/api/v1/files/upload",headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer "+localStorage.getItem("userToken")}},placeholder:"Type the content here!",toolbar:{items:["heading","|","bold","italic","|","bulletedList","numberedList","|","undo","redo"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}return _createClass(e,[{key:"getCurrentCampaign",value:function(){return this.cs.getCampaignId()}},{key:"getCurrentCourse",value:function(){return this.courseService.getCourseId()}},{key:"ngOnInit",value:function(){var e,t=this;this.campaign_id=this.getCurrentCampaign(),this.course_id=this.getCurrentCourse(),this.courseService.getCourseById(this.course_id).subscribe((function(n){e=n.data[0].group_id,t.group_id=e,t.usersData=t.groupService.getUserFromGroup(t.group_id)})),this.buildForm=!1,this.title=this.activeRoute.snapshot.data.title,this.dropdownSettings=h.a.dropDownSettings(!0,!0),this.activeRoute.params.pipe(Object(d.a)((function(e){return e.id?t.sectionService.getAll({id:e.id}):Object(B.a)({data:[]})}))).subscribe((function(e){e.data[0]&&"edit"===t.activeRoute.snapshot.data.urlKey&&(t.section_id=e.data[0].id,t.course_id=e.data[0].course_id,t.courseUserRoleForm=t.create_form(e.data[0])),"add"===t.activeRoute.snapshot.data.urlKey&&(t.activeRoute.queryParams.subscribe((function(e){t.course_id=e.course_id})),t.courseUserRoleForm=t.create_form())}))}},{key:"create_form",value:function(e){this.dropdownSettingsSingle=h.a.dropDownSettings(!0,!0,"id","first_name"),this.dropdownSettings=h.a.dropDownSettings();var t=this.fb.group({user_id:["",[]]});return this.buildForm=!0,t}},{key:"onSubmit",value:function(){this.submitted=!0,this.courseUserRoleForm.invalid||(this.formData=this.sectionService.convertToFormData(this.courseUserRoleForm.value),this.formData.set("course_id",this.course_id),this.section_id?this.update():this.save())}},{key:"save",value:function(){var e=this;this.sectionService.save(this.formData).subscribe((function(t){e.router.navigate(["/section"],{queryParams:{course_id:e.course_id,campaign_id:e.campaign_id}}).then((function(){e.toasterService.success("Records Added Successfully!","Success!",{positionClass:"toast-top-right"})}))}),(function(t){e.handleError(t,e.courseUserRoleForm)}))}},{key:"update",value:function(){var e=this;this.sectionService.update(this.formData,this.section_id).subscribe((function(t){e.router.navigate(["/section"],{queryParams:{course_id:e.course_id,campaign_id:e.campaign_id}}).then((function(){e.toasterService.success("Records Updated Successfully!","Success!",{positionClass:"toast-top-right"})}))}),(function(t){e.handleError(t,e.courseUserRoleForm)}))}},{key:"handleError",value:function(e,t){400===e.status?(t.setErrors(e.error),this.error_messages=e.error.error):alert("Problems while saving data")}},{key:"generateUsername",value:function(){var e=Math.floor(1e7+9e7*Math.random());this.section.get("username").patchValue(e)}},{key:"colorChanged",value:function(e){this.settings.controls[0].get("color").patchValue(e)}},{key:"elementTouched",value:function(e){e.markAsTouched()}},{key:"settings",get:function(){return this.courseUserRoleForm.get("settings")}},{key:"section",get:function(){return this.courseUserRoleForm}}]),e}()).\u0275fac=function(e){return new(e||te)(v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](s.a),v["\u0275\u0275directiveInject"](s.c),v["\u0275\u0275directiveInject"](a.e),v["\u0275\u0275directiveInject"](b.b),v["\u0275\u0275directiveInject"](S.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](_.a))},te.\u0275cmp=v["\u0275\u0275defineComponent"]({type:te,selectors:[["app-form"]],decls:9,vars:2,consts:[["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"px-3"],[4,"ngIf","ngIfElse"],["norecord",""],["enctype","multipart/form-data",1,"form","form-horizontal","striped-rows",3,"formGroup","submit"],[1,"form-body"],[1,"form-group"],[1,"row"],["for","user_id",1,"col-md-3"],[2,"color","red"],[1,"col-md-9"],[4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-actions","center"],[1,"col-md-3"],[1,"col-sm-9"],[1,"btn","btn-raised","btn-orange","mr-1",3,"routerLink","queryParams"],[1,"ft-x"],["type","submit",1,"btn","btn-raised","btn-purple"],[1,"fa","fa-check-square-o"],["formControlName","user_id",3,"placeholder","settings","data"],[1,"invalid-feedback"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"section",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"div",3),v["\u0275\u0275elementStart"](4,"div",4),v["\u0275\u0275elementStart"](5,"div",5),v["\u0275\u0275template"](6,$,23,12,"ng-container",6),v["\u0275\u0275template"](7,ee,2,0,"ng-template",null,7,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275reference"](8);v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",n)}},directives:[i.n,a.D,a.r,a.j,s.f,o.a,a.q,a.h],pipes:[i.b],styles:[""]}),te),ae=[{path:"",component:Q,data:{title:"Course User Role",permission:"list-course-user-role"}},{path:"add",component:ie,data:{title:"Add User Role",urlKey:"add",permission:"create-course-user-role"}},{path:"edit/:id",component:ie,data:{title:"Edit User Role",urlKey:"edit",permission:"modify-course-user-role"}}],oe=((ne=function e(){_classCallCheck(this,e)}).\u0275mod=v["\u0275\u0275defineNgModule"]({type:ne}),ne.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ne)},imports:[[s.g.forChild(ae)],s.g]}),ne),se=n("PCNd"),ce=((re=function e(){_classCallCheck(this,e)}).\u0275mod=v["\u0275\u0275defineNgModule"]({type:re}),re.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(e){return new(e||re)},providers:[g.a],imports:[[i.c,oe,a.l,a.y,o.b.forRoot(),se.a,F.c.forRoot()]]}),re)},utbL:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("fXoL"),i=n("tyNb"),a=n("hHWK"),o=n("82/m"),s=n("IAlr"),c=n("ofXK"),l=n("1kSV"),d=n("3Pt+"),u=["uploadForm"];function p(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().add()})),r["\u0275\u0275element"](1,"i",14),r["\u0275\u0275elementEnd"]()}}function m(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().initiateExport()})),r["\u0275\u0275element"](1,"i",15),r["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.isCollapsed=!e.isCollapsed})),r["\u0275\u0275element"](1,"i",17),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275attribute"]("aria-expanded",!i.isCollapsed)}}var h=function(){var e=function(){function e(t,n,i,a){_classCallCheck(this,e),this.router=t,this.cs=n,this.ss=i,this.courseService=a,this.download=new r.EventEmitter,this.uploaded=new r.EventEmitter,this.uploadFile=new r.EventEmitter,this.files=[],this.isCollapsed=!0,this.section_id="",this.course_id=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.campainId=this.cs.getCampaignId(),this.section_id=this.ss.getSectionId(),this.course_id=this.courseService.getCourseId()}},{key:"add",value:function(){this.router.navigate([this.addRedirect],{queryParams:{section_id:this.section_id,campaign_id:this.campainId,course_id:this.course_id}})}},{key:"initiateExport",value:function(){this.download.emit("export_data")}},{key:"upload",value:function(){this.uploadFile.emit(this.files),this.isCollapsed=!0}},{key:"onChange",value:function(e){var t=e.srcElement.files;this.uploaded.emit(t[0]),this.files=t[0]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.c),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-actionbtns"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](u,!0),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.userFrm=n.first)},inputs:{addRedirect:"addRedirect",showAdd:"showAdd",showExport:"showExport",showImport:"showImport",uploadFields:"uploadFields",uploadAction:"uploadAction"},outputs:{download:"download",uploaded:"uploaded",uploadFile:"uploadFile"},decls:20,vars:5,consts:[[2,"float","right","margin-bottom","10px"],["class","btn btn-raised btn-purple m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-raised btn-purple m-1","aria-controls","collapseExample",3,"click",4,"ngIf"],["id","collapseExample",3,"ngbCollapse"],[2,"margin-top","60px","margin-bottom","5px",3,"ngSubmit"],["uploadForm","ngForm"],["id","upcsv",1,"form-group","fupload-main-contianer"],[1,"fupload"],["type","file","name","upload","id","upload",1,"",3,"change"],[1,"fbtn-upload"],["type","submit",1,"btn","btn-raised","btn-purple"],[2,"clear","both"],[1,"text-danger","text-csv"],[1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-plus-circle","white","warning","font-medium-1",2,"color","#fff !important"],[1,"ft-download","white","warning","font-medium-1",2,"color","#fff !important"],["type","button","aria-controls","collapseExample",1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-upload","white","warning","font-medium-1",2,"color","#fff !important"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275template"](1,p,2,0,"a",1),r["\u0275\u0275template"](2,m,2,0,"a",1),r["\u0275\u0275template"](3,f,2,1,"button",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",3),r["\u0275\u0275elementStart"](5,"form",4,5),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.upload()})),r["\u0275\u0275elementStart"](7,"div",6),r["\u0275\u0275elementStart"](8,"b"),r["\u0275\u0275text"](9,"Upload CSV"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"br"),r["\u0275\u0275elementStart"](11,"div",7),r["\u0275\u0275elementStart"](12,"input",8),r["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"br"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",9),r["\u0275\u0275elementStart"](15,"button",10),r["\u0275\u0275text"](16," Upload "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"div",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"span",12),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showAdd),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showExport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1!==t.showImport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngbCollapse",t.isCollapsed),r["\u0275\u0275advance"](15),r["\u0275\u0275textInterpolate1"]("Csv Format (",t.uploadFields,")"))},directives:[c.n,l.b,d.D,d.r,d.s],styles:[".fupload-main-contianer[_ngcontent-%COMP%]{width:50%;border:2px dotted #ffc107;padding:18px;border-radius:5px;background-color:#fffcf7}.fupload[_ngcontent-%COMP%]{padding-top:5px}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:50%;float:left}.text-csv[_ngcontent-%COMP%]{font-size:13px}@media only screen and (max-width:600px){.fupload-main-contianer[_ngcontent-%COMP%]{width:100%!important}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:1024px){.fupload-main-contianer[_ngcontent-%COMP%]{width:80%!important}}"]}),e}()}}]);