(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"4ni2":function(e,t,r){"use strict";r.r(t),r.d(t,"CourseUserRoleModule",(function(){return ne}));var n=r("ofXK"),i=r("3Pt+"),a=r("Egam"),o=r("tyNb"),s=r("zE9r"),d=r("lJxs"),c=r("bOdf"),l=r("Kj3r"),u=r("/uUt"),m=r("eIep"),p=(r("6Br6"),r("quSY")),h=r("uu/O"),g=r("fXoL"),f=r("82/m"),v=r("5eHb"),S=r("hHWK"),b=r("IAlr"),E=r("jhN1"),x=r("m86e"),C=r("AytR"),w=r("G5QB"),_=r("tk/3"),y=r("ZtWP");let I=(()=>{class e extends w.a{constructor(e,t,r,n,i){super("course_user_role",e),this.http=e,this.campaignService=t,this.companyService=r,this.groupService=n,this.courseService=i,this.apiUrl=C.a.apiUrl,this.formData=new FormData}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275inject"](_.b),g["\u0275\u0275inject"](S.a),g["\u0275\u0275inject"](y.a),g["\u0275\u0275inject"](x.a),g["\u0275\u0275inject"](b.a))},e.\u0275prov=g["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=r("c6jh"),F=r("utbL"),D=r("QJFE"),j=r("1kSV");const U=["searchForm"],O=["isCollapsed"];function k(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",19),g["\u0275\u0275elementStart"](1,"b",20),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"]("Total Records : ",null==e.records.meta||null==e.records.meta.pagination?null:e.records.meta.pagination.total,"")}}function P(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2,"No Records Found!"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275attribute"]("colSpan",9))}function V(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"td"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"td"),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"td"),g["\u0275\u0275text"](6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"td"),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"td"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"td"),g["\u0275\u0275text"](12),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"td"),g["\u0275\u0275text"](14),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,r=t.index,n=g["\u0275\u0275nextContext"](3);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",(n.records.meta.pagination.current_page-1)*n.records.meta.pagination.per_page+r+1," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.course_name," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.group_name," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.user_name," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.username," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.designation_name," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.role_name," ")}}function A(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275template"](1,P,3,1,"tr",17),g["\u0275\u0275template"](2,V,15,7,"tr",22),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!e.records.data.length),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",e.records.data)}}function q(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"button",23),g["\u0275\u0275listener"]("confirm",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).deleteSelected()})),g["\u0275\u0275text"](2,"Delete"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){g["\u0275\u0275nextContext"](2);const e=g["\u0275\u0275reference"](11);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("swal",e)}}function M(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"button",24),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).invalidSelection()})),g["\u0275\u0275text"](2,"Delete"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function z(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"table",21),g["\u0275\u0275elementStart"](2,"thead"),g["\u0275\u0275elementStart"](3,"tr"),g["\u0275\u0275elementStart"](4,"th"),g["\u0275\u0275text"](5,"Sr. No"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"th"),g["\u0275\u0275text"](7,"Course Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275text"](9,"Group Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"th"),g["\u0275\u0275text"](11,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"th"),g["\u0275\u0275text"](13,"Username"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"th"),g["\u0275\u0275text"](15,"Designation"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](16,"th"),g["\u0275\u0275text"](17,"Permission"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"tbody"),g["\u0275\u0275template"](19,A,3,2,"ng-container",16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](20,"br"),g["\u0275\u0275element"](21,"br"),g["\u0275\u0275template"](22,q,3,1,"div",17),g["\u0275\u0275template"](23,M,3,0,"div",17),g["\u0275\u0275element"](24,"br"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](),t=g["\u0275\u0275reference"](20);g["\u0275\u0275advance"](19),g["\u0275\u0275property"]("ngIf",e.records)("ngIfElse",t),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngIf",e.SelectedIDs.length&&e.showMultiDelete),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!e.SelectedIDs.length&&e.showMultiDelete)}}function N(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"ngb-pagination",25),g["\u0275\u0275listener"]("pageChange",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().pageChange(t)}))("pageChange",(function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().records.meta.pagination.current_page=t})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",e.records.meta.pagination.total)("pageSize",e.records.meta.pagination.per_page)("page",e.records.meta.pagination.current_page)}}function T(e,t){1&e&&g["\u0275\u0275text"](0,"Loading Data...")}let K=(()=>{class e{constructor(e,t,r,n,i,a,o,s,d){this.router=e,this.activeRoute=t,this.sectionService=r,this.toasterService=n,this.cs=i,this.courseService=a,this.sanitizer=o,this.groupService=s,this.courseUserRoleService=d,this.errors=[],this.subscription=new p.a,this.uploadFields=[],this.uploadedFile=[],this.showExport=!1,this.showDelete=!1,this.showMultiDelete=!1,this.showAdd=!1,this.showEdit=!1,this.sectionData=[],this.usersData=[],this.parameters={},this.searchObj={},this.SelectedIDs=[]}getCurrentCampaign(){return this.cs.getCampaignId()}getCurrentCourse(){return this.courseService.getCourseId()}ngOnInit(){this.title=this.activeRoute.snapshot.data.title,this.campaign_id=this.getCurrentCampaign(),this.course_id=this.getCurrentCourse(),this.sectionService.getAll({},"section").subscribe(e=>{e.data&&(this.sectionData=e)}),this.campaign_id&&(this.parameters.campaign_id=this.campaign_id);const e=this.courseUserRoleService.checkPermissionExist(["export-course-user-role","remove-course-user-role","remove-course-user-role","creates-course-user-role","modifys-course-user-role"]);this.showExport=e[0],this.showDelete=e[1],this.showMultiDelete=e[2],this.showAdd=e[3],this.showEdit=e[4]}ngAfterViewInit(){this.subscription=s.a.merge(this.activeRoute.queryParams.pipe(Object(d.a)(e=>(this.parameters=h.a.merge({},this.parameters,e),this.parameters)),Object(c.a)(e=>this.loadData(e))),this.search()).subscribe(e=>{e.data.forEach((t,r)=>{let n=this.sanitizer.bypassSecurityTrustHtml(t.description);e.data[r].newStr=n}),this.records=e,this.uploadFields=e.fields})}loadData(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.courseUserRoleService.getAll(e)}openUrl(e,t){this.router.navigate(["/"+t],{queryParams:{section_id:e,course_id:this.course_id,campaign_id:this.campaign_id}})}fileChange(e){this.uploadedFile=e}delete(e){const t=new FormData;this.courseUserRoleService.delete(t,e).subscribe(e=>{e.success?this.toasterService.success("Record Deleted!","Success!",{positionClass:"toast-top-right"}):this.toasterService.error(e.message,"Failed!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()},e=>{this.handleError(e)})}checkAll(e){const t=e.target.checked;this.records.data.forEach((e,r)=>{e.selected=t,this.selectID(e.id,t)})}selectID(e,t){let r;r="boolean"==typeof t?t:t.target.checked,r?this.SelectedIDs.push(e):this.SelectedIDs.pop(e)}invalidSelection(){alert("Please Select atleast one record!")}deleteSelected(){this.courseUserRoleService.delete_all({id:this.SelectedIDs}).subscribe(e=>{this.toasterService.success(e.data+" Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()},e=>{this.handleError(e)})}handleError(e){this.toasterService.error(e.error.message,400===e.status?"Error!":"Problems while deleting records!",{positionClass:"toast-top-right"})}search(e={}){return this.sf.valueChanges.pipe(Object(l.a)(400),Object(u.a)(),Object(d.a)(t=>(this.searchObj=h.a.removeNullKeys(t),this.parameters=h.a.merge({},this.parameters,this.searchObj,e),this.parameters)),Object(m.a)(e=>this.loadData(e)))}pageChange(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id,course_id:this.course_id}})}upload(e){const t=new FormData;t.set("upload_file",e,e.name),this.courseUserRoleService.upload(t).subscribe(e=>this.closePopup(e),e=>this.controlError(e))}controlError(e){if(400===e.status){for(const t of Object.keys(e.error.error))this.errors.push(e.error.error[t]);alert(e.error.error.upload_file)}}closePopup(e){this.toasterService.success(e.data.count+" Records Uploaded Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()}export(){this.searchObj.campaign_id=this.getCurrentCampaign(),this.searchObj.course_id=this.course_id;const e=this.courseUserRoleService.getCurrentDate();this.courseUserRoleService.exportData(this.searchObj,"Course-User-Roles-"+e)}ngOnDestroy(){this.subscription.unsubscribe()}changeCourse(e){this.courseService.setCourseId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.course_id=e.id,this.router.navigate(["section"],{queryParams:{course_id:e.id,campaign_id:this.campaign_id}}),this.sf.form.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](o.c),g["\u0275\u0275directiveInject"](o.a),g["\u0275\u0275directiveInject"](f.a),g["\u0275\u0275directiveInject"](v.b),g["\u0275\u0275directiveInject"](S.a),g["\u0275\u0275directiveInject"](b.a),g["\u0275\u0275directiveInject"](E.DomSanitizer),g["\u0275\u0275directiveInject"](x.a),g["\u0275\u0275directiveInject"](I))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-section"]],viewQuery:function(e,t){var r;1&e&&(g["\u0275\u0275viewQuery"](U,!0),g["\u0275\u0275viewQuery"](O,!0)),2&e&&(g["\u0275\u0275queryRefresh"](r=g["\u0275\u0275loadQuery"]())&&(t.sf=r.first),g["\u0275\u0275queryRefresh"](r=g["\u0275\u0275loadQuery"]())&&(t.isCollapsed=r.first))},decls:21,vars:11,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCourse"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[3,"showAdd","addRedirect","showExport","uploadFields","uploadFile","uploaded","download"],["title","Are you sure ?","text","This cannot be undone","icon","question",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"card-body"],[1,"card-block"],["style","float:right;",4,"ngIf"],["name","searchForm",1,"table-responsive"],["searchForm","ngForm"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["loading",""],[2,"float","right"],[1,"tot-record"],[1,"table","table-bordered","table-condensed","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"color","#fff !important",3,"swal","confirm"],[1,"btn","btn-danger",2,"color","#fff !important",3,"click"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"app-course-topbar",1),g["\u0275\u0275listener"]("changeCourse",(function(e){return t.changeCourse(e)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](2,"section",2),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"div",4),g["\u0275\u0275elementStart"](5,"div",5),g["\u0275\u0275elementStart"](6,"div",6),g["\u0275\u0275elementStart"](7,"h4",7),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"app-actionbtns",8),g["\u0275\u0275listener"]("uploadFile",(function(e){return t.upload(e)}))("uploaded",(function(e){return t.fileChange(e)}))("download",(function(){return t.export()})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](10,"swal",9,10),g["\u0275\u0275elementStart"](12,"div",11),g["\u0275\u0275elementStart"](13,"div",12),g["\u0275\u0275template"](14,k,3,1,"div",13),g["\u0275\u0275elementStart"](15,"form",14,15),g["\u0275\u0275template"](17,z,25,4,"ng-container",16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](18,N,2,5,"div",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](19,T,1,0,"ng-template",null,18,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275reference"](20);g["\u0275\u0275advance"](8),g["\u0275\u0275textInterpolate"](t.title),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("showAdd",t.showAdd)("addRedirect","/course-user-role/add")("showExport",t.showExport)("uploadFields",t.uploadFields),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",t.records),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngIf",t.sectionData)("ngIfElse",e),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.records)}},directives:[R.a,F.a,D.a,n.n,i.D,i.r,i.s,n.m,D.b,j.l],styles:[""]}),e})();var L=r("LRne"),Q=(r("qnbw"),r("+z1p"));function B(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275element"](1,"ng-multiselect-dropdown",24),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,r=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("placeholder","Select User")("settings",r.dropdownSettingsSingle)("data",e.data[0].user)}}function G(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275text"](1," User is required! "),g["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",25),g["\u0275\u0275template"](1,G,2,0,"div",15),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.courseUserRoleForm.get("user_id").errors.required)}}function H(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",25),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.error_messages.user_id," ")}}const J=function(){return["/section"]},W=function(e,t){return{course_id:e,campaign_id:t}};function Y(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"form",8),g["\u0275\u0275listener"]("submit",(function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().onSubmit()})),g["\u0275\u0275elementStart"](2,"div",9),g["\u0275\u0275elementStart"](3,"div",10),g["\u0275\u0275elementStart"](4,"div",11),g["\u0275\u0275elementStart"](5,"label",12),g["\u0275\u0275text"](6," Users "),g["\u0275\u0275elementStart"](7,"span",13),g["\u0275\u0275text"](8,"*"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",14),g["\u0275\u0275template"](10,B,2,3,"ng-container",15),g["\u0275\u0275pipe"](11,"async"),g["\u0275\u0275template"](12,X,2,1,"div",16),g["\u0275\u0275template"](13,H,2,1,"div",16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](14,"div",17),g["\u0275\u0275element"](15,"div",18),g["\u0275\u0275elementStart"](16,"div",19),g["\u0275\u0275elementStart"](17,"a",20),g["\u0275\u0275element"](18,"i",21),g["\u0275\u0275text"](19," Cancel "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"button",22),g["\u0275\u0275element"](21,"i",23),g["\u0275\u0275text"](22," Save "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("formGroup",e.courseUserRoleForm),g["\u0275\u0275advance"](9),g["\u0275\u0275property"]("ngIf",g["\u0275\u0275pipeBind1"](11,6,e.usersData)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.courseUserRoleForm.get("user_id").errors&&e.submitted),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.error_messages.user_id),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](8,J))("queryParams",g["\u0275\u0275pureFunction2"](9,W,e.course_id,e.campaign_id))}}function Z(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"p"),g["\u0275\u0275text"](1,"Loading Data..."),g["\u0275\u0275elementEnd"]())}let $=(()=>{class e{constructor(e,t,r,n,i,a,o,s){this.sectionService=e,this.activeRoute=t,this.router=r,this.fb=n,this.toasterService=i,this.cs=a,this.courseService=o,this.groupService=s,this.campaign_id="",this.section_id="",this.description="",this.color1="#ffffff",this.Editor=Q,this.formData=new FormData,this.submitted=!1,this.error_messages=[],Q.defaultConfig={ckfinder:{uploadUrl:"https://uat-lurn.techizertech.in/api/v1/files/upload",headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer "+localStorage.getItem("userToken")}},placeholder:"Type the content here!",toolbar:{items:["heading","|","bold","italic","|","bulletedList","numberedList","|","undo","redo"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}getCurrentCampaign(){return this.cs.getCampaignId()}getCurrentCourse(){return this.courseService.getCourseId()}ngOnInit(){let e;this.campaign_id=this.getCurrentCampaign(),this.course_id=this.getCurrentCourse(),this.courseService.getCourseById(this.course_id).subscribe(t=>{e=t.data[0].group_id,this.group_id=e,this.usersData=this.groupService.getUserFromGroup(this.group_id)}),this.buildForm=!1,this.title=this.activeRoute.snapshot.data.title,this.dropdownSettings=h.a.dropDownSettings(!0,!0),this.activeRoute.params.pipe(Object(c.a)(e=>e.id?this.sectionService.getAll({id:e.id}):Object(L.a)({data:[]}))).subscribe(e=>{e.data[0]&&"edit"===this.activeRoute.snapshot.data.urlKey&&(this.section_id=e.data[0].id,this.course_id=e.data[0].course_id,this.courseUserRoleForm=this.create_form(e.data[0])),"add"===this.activeRoute.snapshot.data.urlKey&&(this.activeRoute.queryParams.subscribe(e=>{this.course_id=e.course_id}),this.courseUserRoleForm=this.create_form())})}create_form(e){this.dropdownSettingsSingle=h.a.dropDownSettings(!0,!0,"id","first_name"),this.dropdownSettings=h.a.dropDownSettings();const t=this.fb.group({user_id:["",[]]});return this.buildForm=!0,t}onSubmit(){this.submitted=!0,this.courseUserRoleForm.invalid||(this.formData=this.sectionService.convertToFormData(this.courseUserRoleForm.value),this.formData.set("course_id",this.course_id),this.section_id?this.update():this.save())}save(){this.sectionService.save(this.formData).subscribe(e=>{this.router.navigate(["/section"],{queryParams:{course_id:this.course_id,campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Added Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.courseUserRoleForm)})}update(){this.sectionService.update(this.formData,this.section_id).subscribe(e=>{this.router.navigate(["/section"],{queryParams:{course_id:this.course_id,campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Updated Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.courseUserRoleForm)})}handleError(e,t){400===e.status?(t.setErrors(e.error),this.error_messages=e.error.error):alert("Problems while saving data")}generateUsername(){const e=Math.floor(1e7+9e7*Math.random());this.section.get("username").patchValue(e)}colorChanged(e){this.settings.controls[0].get("color").patchValue(e)}get settings(){return this.courseUserRoleForm.get("settings")}get section(){return this.courseUserRoleForm}elementTouched(e){e.markAsTouched()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](f.a),g["\u0275\u0275directiveInject"](o.a),g["\u0275\u0275directiveInject"](o.c),g["\u0275\u0275directiveInject"](i.e),g["\u0275\u0275directiveInject"](v.b),g["\u0275\u0275directiveInject"](S.a),g["\u0275\u0275directiveInject"](b.a),g["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form"]],decls:9,vars:2,consts:[["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"px-3"],[4,"ngIf","ngIfElse"],["norecord",""],["enctype","multipart/form-data",1,"form","form-horizontal","striped-rows",3,"formGroup","submit"],[1,"form-body"],[1,"form-group"],[1,"row"],["for","user_id",1,"col-md-3"],[2,"color","red"],[1,"col-md-9"],[4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-actions","center"],[1,"col-md-3"],[1,"col-sm-9"],[1,"btn","btn-raised","btn-orange","mr-1",3,"routerLink","queryParams"],[1,"ft-x"],["type","submit",1,"btn","btn-raised","btn-purple"],[1,"fa","fa-check-square-o"],["formControlName","user_id",3,"placeholder","settings","data"],[1,"invalid-feedback"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"section",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"div",4),g["\u0275\u0275elementStart"](5,"div",5),g["\u0275\u0275template"](6,Y,23,12,"ng-container",6),g["\u0275\u0275template"](7,Z,2,0,"ng-template",null,7,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275reference"](8);g["\u0275\u0275advance"](6),g["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",e)}},directives:[n.n,i.D,i.r,i.j,o.f,a.a,i.q,i.h],pipes:[n.b],styles:[""]}),e})();const ee=[{path:"",component:K,data:{title:"Course User Role",permission:"list-course-user-role"}},{path:"add",component:$,data:{title:"Add User Role",urlKey:"add",permission:"create-course-user-role"}},{path:"edit/:id",component:$,data:{title:"Edit User Role",urlKey:"edit",permission:"modify-course-user-role"}}];let te=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(ee)],o.g]}),e})();var re=r("PCNd");let ne=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[f.a],imports:[[n.c,te,i.l,i.y,a.b.forRoot(),re.a,D.c.forRoot()]]}),e})()},utbL:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r("fXoL"),i=r("tyNb"),a=r("hHWK"),o=r("82/m"),s=r("IAlr"),d=r("ofXK"),c=r("1kSV"),l=r("3Pt+");const u=["uploadForm"];function m(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",13),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().add()})),n["\u0275\u0275element"](1,"i",14),n["\u0275\u0275elementEnd"]()}}function p(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",13),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().initiateExport()})),n["\u0275\u0275element"](1,"i",15),n["\u0275\u0275elementEnd"]()}}function h(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",(function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.isCollapsed=!t.isCollapsed})),n["\u0275\u0275element"](1,"i",17),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("aria-expanded",!e.isCollapsed)}}let g=(()=>{class e{constructor(e,t,r,i){this.router=e,this.cs=t,this.ss=r,this.courseService=i,this.download=new n.EventEmitter,this.uploaded=new n.EventEmitter,this.uploadFile=new n.EventEmitter,this.files=[],this.isCollapsed=!0,this.section_id="",this.course_id=""}ngOnInit(){this.campainId=this.cs.getCampaignId(),this.section_id=this.ss.getSectionId(),this.course_id=this.courseService.getCourseId()}add(){this.router.navigate([this.addRedirect],{queryParams:{section_id:this.section_id,campaign_id:this.campainId,course_id:this.course_id}})}initiateExport(){this.download.emit("export_data")}upload(){this.uploadFile.emit(this.files),this.isCollapsed=!0}onChange(e){const t=e.srcElement.files;this.uploaded.emit(t[0]),this.files=t[0]}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](i.c),n["\u0275\u0275directiveInject"](a.a),n["\u0275\u0275directiveInject"](o.a),n["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-actionbtns"]],viewQuery:function(e,t){var r;1&e&&n["\u0275\u0275viewQuery"](u,!0),2&e&&n["\u0275\u0275queryRefresh"](r=n["\u0275\u0275loadQuery"]())&&(t.userFrm=r.first)},inputs:{addRedirect:"addRedirect",showAdd:"showAdd",showExport:"showExport",showImport:"showImport",uploadFields:"uploadFields",uploadAction:"uploadAction"},outputs:{download:"download",uploaded:"uploaded",uploadFile:"uploadFile"},decls:20,vars:5,consts:[[2,"float","right","margin-bottom","10px"],["class","btn btn-raised btn-purple m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-raised btn-purple m-1","aria-controls","collapseExample",3,"click",4,"ngIf"],["id","collapseExample",3,"ngbCollapse"],[2,"margin-top","60px","margin-bottom","5px",3,"ngSubmit"],["uploadForm","ngForm"],["id","upcsv",1,"form-group","fupload-main-contianer"],[1,"fupload"],["type","file","name","upload","id","upload",1,"",3,"change"],[1,"fbtn-upload"],["type","submit",1,"btn","btn-raised","btn-purple"],[2,"clear","both"],[1,"text-danger","text-csv"],[1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-plus-circle","white","warning","font-medium-1",2,"color","#fff !important"],[1,"ft-download","white","warning","font-medium-1",2,"color","#fff !important"],["type","button","aria-controls","collapseExample",1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-upload","white","warning","font-medium-1",2,"color","#fff !important"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,m,2,0,"a",1),n["\u0275\u0275template"](2,p,2,0,"a",1),n["\u0275\u0275template"](3,h,2,1,"button",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"form",4,5),n["\u0275\u0275listener"]("ngSubmit",(function(){return t.upload()})),n["\u0275\u0275elementStart"](7,"div",6),n["\u0275\u0275elementStart"](8,"b"),n["\u0275\u0275text"](9,"Upload CSV"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"br"),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275elementStart"](12,"input",8),n["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](13,"br"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",9),n["\u0275\u0275elementStart"](15,"button",10),n["\u0275\u0275text"](16," Upload "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](17,"div",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"span",12),n["\u0275\u0275text"](19),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!1!==t.showAdd),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!1!==t.showExport),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!1!==t.showImport),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngbCollapse",t.isCollapsed),n["\u0275\u0275advance"](15),n["\u0275\u0275textInterpolate1"]("Csv Format (",t.uploadFields,")"))},directives:[d.n,c.b,l.D,l.r,l.s],styles:[".fupload-main-contianer[_ngcontent-%COMP%]{width:50%;border:2px dotted #ffc107;padding:18px;border-radius:5px;background-color:#fffcf7}.fupload[_ngcontent-%COMP%]{padding-top:5px}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:50%;float:left}.text-csv[_ngcontent-%COMP%]{font-size:13px}@media only screen and (max-width:600px){.fupload-main-contianer[_ngcontent-%COMP%]{width:100%!important}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:1024px){.fupload-main-contianer[_ngcontent-%COMP%]{width:80%!important}}"]}),e})()}}]);