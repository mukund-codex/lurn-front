(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"6Br6":function(e,t,n){"use strict";var a=n("HDdC"),r=n("VRyK");a.a.merge=r.a},"82/m":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("G5QB"),r=n("fXoL"),o=n("tk/3"),i=n("ZtWP"),l=n("hHWK");let s=(()=>{class e extends a.a{constructor(e,t,n){super("section",e),this.http=e,this.companyService=t,this.campaignService=n}setSectionId(e){this.section_id=e}getSectionId(){return this.section_id}setCourseId(e){this.course_id=e}getCourseId(){return this.course_id}getCampaigns(e){return this.campaignService.getAll({company_id:e})}getTypesFromCampaign(e){return this.http.get(`${this.apiUrl}campaign/geography_from_campaign?campaign_id=`+e)}getSectionData(e,t){return this.http.get(`${this.apiUrl}section/section_dropdown_list?campaign_id=`+t+"&course_id="+e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.b),r["\u0275\u0275inject"](i.a),r["\u0275\u0275inject"](l.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},utbL:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("fXoL"),r=n("tyNb"),o=n("hHWK"),i=n("82/m"),l=n("IAlr"),s=n("ofXK"),c=n("1kSV"),d=n("3Pt+");const p=["uploadForm"];function m(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"a",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().add()})),a["\u0275\u0275element"](1,"i",14),a["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"a",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().initiateExport()})),a["\u0275\u0275element"](1,"i",15),a["\u0275\u0275elementEnd"]()}}function u(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const t=a["\u0275\u0275nextContext"]();return t.isCollapsed=!t.isCollapsed})),a["\u0275\u0275element"](1,"i",17),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275attribute"]("aria-expanded",!e.isCollapsed)}}let h=(()=>{class e{constructor(e,t,n,r){this.router=e,this.cs=t,this.ss=n,this.courseService=r,this.download=new a.EventEmitter,this.uploaded=new a.EventEmitter,this.uploadFile=new a.EventEmitter,this.files=[],this.isCollapsed=!0,this.section_id="",this.course_id=""}ngOnInit(){this.campainId=this.cs.getCampaignId(),this.section_id=this.ss.getSectionId(),this.course_id=this.courseService.getCourseId()}add(){this.router.navigate([this.addRedirect],{queryParams:{section_id:this.section_id,campaign_id:this.campainId,course_id:this.course_id}})}initiateExport(){this.download.emit("export_data")}upload(){this.uploadFile.emit(this.files),this.isCollapsed=!0}onChange(e){const t=e.srcElement.files;this.uploaded.emit(t[0]),this.files=t[0]}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.c),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-actionbtns"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](p,!0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.userFrm=n.first)},inputs:{addRedirect:"addRedirect",showAdd:"showAdd",showExport:"showExport",showImport:"showImport",uploadFields:"uploadFields",uploadAction:"uploadAction"},outputs:{download:"download",uploaded:"uploaded",uploadFile:"uploadFile"},decls:20,vars:5,consts:[[2,"float","right","margin-bottom","10px"],["class","btn btn-raised btn-purple m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-raised btn-purple m-1","aria-controls","collapseExample",3,"click",4,"ngIf"],["id","collapseExample",3,"ngbCollapse"],[2,"margin-top","60px","margin-bottom","5px",3,"ngSubmit"],["uploadForm","ngForm"],["id","upcsv",1,"form-group","fupload-main-contianer"],[1,"fupload"],["type","file","name","upload","id","upload",1,"",3,"change"],[1,"fbtn-upload"],["type","submit",1,"btn","btn-raised","btn-purple"],[2,"clear","both"],[1,"text-danger","text-csv"],[1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-plus-circle","white","warning","font-medium-1",2,"color","#fff !important"],[1,"ft-download","white","warning","font-medium-1",2,"color","#fff !important"],["type","button","aria-controls","collapseExample",1,"btn","btn-raised","btn-purple","m-1",3,"click"],[1,"ft-upload","white","warning","font-medium-1",2,"color","#fff !important"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,m,2,0,"a",1),a["\u0275\u0275template"](2,g,2,0,"a",1),a["\u0275\u0275template"](3,u,2,1,"button",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"form",4,5),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.upload()})),a["\u0275\u0275elementStart"](7,"div",6),a["\u0275\u0275elementStart"](8,"b"),a["\u0275\u0275text"](9,"Upload CSV"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"br"),a["\u0275\u0275elementStart"](11,"div",7),a["\u0275\u0275elementStart"](12,"input",8),a["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"br"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"button",10),a["\u0275\u0275text"](16," Upload "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"div",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"span",12),a["\u0275\u0275text"](19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!1!==t.showAdd),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!1!==t.showExport),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!1!==t.showImport),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngbCollapse",t.isCollapsed),a["\u0275\u0275advance"](15),a["\u0275\u0275textInterpolate1"]("Csv Format (",t.uploadFields,")"))},directives:[s.n,c.b,d.D,d.r,d.s],styles:[".fupload-main-contianer[_ngcontent-%COMP%]{width:50%;border:2px dotted #ffc107;padding:18px;border-radius:5px;background-color:#fffcf7}.fupload[_ngcontent-%COMP%]{padding-top:5px}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:50%;float:left}.text-csv[_ngcontent-%COMP%]{font-size:13px}@media only screen and (max-width:600px){.fupload-main-contianer[_ngcontent-%COMP%]{width:100%!important}.fbtn-upload[_ngcontent-%COMP%], .fupload[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:1024px){.fupload-main-contianer[_ngcontent-%COMP%]{width:80%!important}}"]}),e})()},"uu/O":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{static removeNullKeys(e){return Object.keys(e).reduce((t,n)=>{const a=t;return void 0!==e[n]&&(a[n]=e[n]),a},{})}static merge(...e){let t={};return e.forEach(e=>{t=Object.assign(t,e)}),t}static setValueCampaign(e){a.campaign_id=e}getValueCampaign(){return a.campaign_id}static dropDownSettings(e,t,n,a){return{singleSelection:e||!1,idField:n||"id",textField:a||"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:t||!0}}}},yIeX:function(e,t,n){"use strict";n.r(t),n.d(t,"GeographyModule",(function(){return qe}));var a=n("ofXK"),r=n("3Pt+"),o=n("Egam"),i=n("tyNb"),l=n("zE9r"),s=n("lJxs"),c=n("bOdf"),d=n("Kj3r"),p=n("/uUt"),m=n("eIep"),g=(n("6Br6"),n("quSY")),u=n("uu/O"),h=n("fXoL"),f=n("IrUG"),y=n("5eHb"),v=n("hHWK"),x=n("5Lta"),b=n("utbL"),S=n("QJFE"),C=n("1kSV");const E=["searchForm"],w=["isCollapsed"];function I(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",19),h["\u0275\u0275elementStart"](1,"b",20),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"]("Total Records : ",null==e.records.meta||null==e.records.meta.pagination?null:e.records.meta.pagination.total,"")}}function _(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"th"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function k(e,t){1&e&&h["\u0275\u0275element"](0,"input",31)}function F(e,t){1&e&&h["\u0275\u0275element"](0,"input",32)}function D(e,t){1&e&&h["\u0275\u0275element"](0,"input",33)}function V(e,t){1&e&&h["\u0275\u0275element"](0,"input",34)}function O(e,t){1&e&&h["\u0275\u0275element"](0,"input",35)}function P(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275template"](1,k,1,0,"input",26),h["\u0275\u0275template"](2,F,1,0,"input",27),h["\u0275\u0275template"](3,D,1,0,"input",28),h["\u0275\u0275template"](4,V,1,0,"input",29),h["\u0275\u0275template"](5,O,1,0,"input",30),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","National Zone"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Zone"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Region"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Area"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","City"==e.name)}}function M(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td"),h["\u0275\u0275text"](2,"No Records Found!"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](1),h["\u0275\u0275attribute"]("colSpan",9))}const A=function(e){return[e]},j=function(e){return{campaign_id:e}};function q(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"a",40),h["\u0275\u0275element"](1,"i",41),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"]().$implicit,t=h["\u0275\u0275nextContext"](3);h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction1"](2,A,"/geography/edit/"+e.id))("queryParams",h["\u0275\u0275pureFunction1"](4,j,t.campaign_id))}}function z(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"a",42),h["\u0275\u0275listener"]("confirm",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"]().$implicit;return h["\u0275\u0275nextContext"](3).delete(t.id)})),h["\u0275\u0275element"](1,"i",43),h["\u0275\u0275elementEnd"]()}if(2&e){h["\u0275\u0275nextContext"](4);const e=h["\u0275\u0275reference"](11);h["\u0275\u0275property"]("swal",e)}}function R(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](null==e.national_zone?null:e.national_zone.name)}}function Z(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](null==e.zone?null:e.zone.name)}}function N(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](null==e.region?null:e.region.name)}}function T(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](null==e.area?null:e.area.name)}}function L(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"span"),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2).$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](null==e.city?null:e.city.name)}}function B(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"td"),h["\u0275\u0275template"](1,R,2,1,"span",17),h["\u0275\u0275template"](2,Z,2,1,"span",17),h["\u0275\u0275template"](3,N,2,1,"span",17),h["\u0275\u0275template"](4,T,2,1,"span",17),h["\u0275\u0275template"](5,L,2,1,"span",17),h["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","National Zone"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Zone"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Region"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","Area"==e.name),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","City"==e.name)}}function K(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td",22),h["\u0275\u0275elementStart"](2,"input",36),h["\u0275\u0275listener"]("click",(function(n){h["\u0275\u0275restoreView"](e);const a=t.$implicit;return h["\u0275\u0275nextContext"](3).selectID(a.id,n)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"label",37),h["\u0275\u0275text"](4,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td"),h["\u0275\u0275template"](6,q,2,6,"a",38),h["\u0275\u0275template"](7,z,2,1,"a",39),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"td"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,B,6,5,"td",25),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](2),h["\u0275\u0275propertyInterpolate"]("id",e.id),h["\u0275\u0275propertyInterpolate"]("value",e.id),h["\u0275\u0275property"]("checked",e.selected),h["\u0275\u0275advance"](1),h["\u0275\u0275propertyInterpolate"]("for",e.id),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",a.showEdit),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",a.showDelete),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",(a.records.meta.pagination.current_page-1)*a.records.meta.pagination.per_page+n+1," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",null==e.type?null:e.type.name," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",a.geographyData)}}function $(e,t){if(1&e&&(h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275template"](1,M,3,1,"tr",17),h["\u0275\u0275template"](2,K,13,9,"tr",25),h["\u0275\u0275elementContainerEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!e.records.data.length),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngForOf",e.records.data)}}function G(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"button",44),h["\u0275\u0275listener"]("confirm",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).deleteSelected()})),h["\u0275\u0275text"](2,"Delete"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){h["\u0275\u0275nextContext"](2);const e=h["\u0275\u0275reference"](11);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("swal",e)}}function U(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"button",45),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).invalidSelection()})),h["\u0275\u0275text"](2,"Delete"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275elementStart"](1,"table",21),h["\u0275\u0275elementStart"](2,"thead"),h["\u0275\u0275elementStart"](3,"tr"),h["\u0275\u0275elementStart"](4,"th",22),h["\u0275\u0275elementStart"](5,"input",23),h["\u0275\u0275listener"]("change",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().checkAll(t)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"label",24),h["\u0275\u0275text"](7,"\xa0"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"th"),h["\u0275\u0275text"](9,"Action"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"th"),h["\u0275\u0275text"](11,"Sr. No"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"th"),h["\u0275\u0275text"](13,"Type"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](14,_,2,1,"th",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"tbody"),h["\u0275\u0275elementStart"](16,"tr"),h["\u0275\u0275element"](17,"td"),h["\u0275\u0275element"](18,"td"),h["\u0275\u0275element"](19,"td"),h["\u0275\u0275element"](20,"td"),h["\u0275\u0275template"](21,P,6,5,"td",25),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](22,$,3,2,"ng-container",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](23,G,3,1,"div",17),h["\u0275\u0275template"](24,U,3,0,"div",17),h["\u0275\u0275element"](25,"br"),h["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](),t=h["\u0275\u0275reference"](20);h["\u0275\u0275advance"](14),h["\u0275\u0275property"]("ngForOf",e.geographyData),h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngForOf",e.geographyData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.records)("ngIfElse",t),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.SelectedIDs.length&&e.showMultiDelete),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!e.SelectedIDs.length&&e.showMultiDelete)}}function H(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"ngb-pagination",46),h["\u0275\u0275listener"]("pageChange",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().pageChange(t)}))("pageChange",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().records.meta.pagination.current_page=t})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",e.records.meta.pagination.total)("pageSize",e.records.meta.pagination.per_page)("page",e.records.meta.pagination.current_page)}}function X(e,t){1&e&&h["\u0275\u0275text"](0,"Loading Data...")}let J=(()=>{class e{constructor(e,t,n,a,r){this.router=e,this.activeRoute=t,this.geoService=n,this.toasterService=a,this.cs=r,this.errors=[],this.subscription=new g.a,this.uploadFields=[],this.uploadedFile=[],this.showExport=!1,this.showDelete=!1,this.showMultiDelete=!1,this.showAdd=!1,this.showEdit=!1,this.geographyData=[],this.parameters={},this.searchObj={},this.SelectedIDs=[]}getCurrentCampaign(){return this.cs.getCampaignId()}ngOnInit(){this.title=this.activeRoute.snapshot.data.title,this.campaign_id=this.getCurrentCampaign(),this.geoService.getAll({id:this.campaign_id},"campaign").subscribe(e=>{e.data&&(this.geographyData=e.data[0].geo_master)}),this.campaign_id&&(this.parameters.campaign_id=this.campaign_id);const e=this.geoService.checkPermissionExist(["export-geography","remove-geography","remove-all-geography","create-geography","modify-geography"]);this.showExport=e[0],this.showDelete=e[1],this.showMultiDelete=e[2],this.showAdd=e[3],this.showEdit=e[4]}ngAfterViewInit(){this.subscription=l.a.merge(this.activeRoute.queryParams.pipe(Object(s.a)(e=>(this.parameters=u.a.merge({},this.parameters,e),this.parameters)),Object(c.a)(e=>this.loadData(e))),this.search()).subscribe(e=>{this.records=e,this.uploadFields=e.fields})}loadData(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.geoService.getAll(e)}fileChange(e){this.uploadedFile=e}delete(e){const t=new FormData;this.geoService.delete(t,e).subscribe(e=>{this.toasterService.success(e.data+" Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()},e=>{this.handleError(e)})}checkAll(e){const t=e.target.checked;this.records.data.forEach((e,n)=>{e.selected=t,this.selectID(e.id,t)})}selectID(e,t){let n;n="boolean"==typeof t?t:t.target.checked,n?this.SelectedIDs.push(e):this.SelectedIDs.pop(e)}invalidSelection(){alert("Please Select atleast one record!")}deleteSelected(){this.geoService.delete_all({id:this.SelectedIDs}).subscribe(e=>{this.toasterService.success(e.data+" Records Deleted Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()},e=>{this.handleError(e)})}handleError(e){400===e.status?this.toasterService.error(e.error.message,"Error!",{positionClass:"toast-top-right"}):alert("Problems while deleting records!")}search(e={}){return this.sf.valueChanges.pipe(Object(d.a)(400),Object(p.a)(),Object(s.a)(t=>(this.searchObj=u.a.removeNullKeys(t),this.parameters=u.a.merge({},this.parameters,this.searchObj,e),this.parameters)),Object(m.a)(e=>this.loadData(e)))}pageChange(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id}})}upload(e){const t=new FormData;t.set("upload_file",e,e.name),this.geoService.upload(t).subscribe(e=>this.closePopup(e),e=>this.controlError(e))}controlError(e){if(400===e.status){for(const t of Object.keys(e.error.error))this.errors.push(e.error.error[t]);alert(e.error.error.upload_file)}}closePopup(e){this.toasterService.success(e.data.count+" Records Uploaded Successfully!","Success!",{positionClass:"toast-top-right"}),this.sf.form.updateValueAndValidity()}export(){this.searchObj.campaign_id=this.getCurrentCampaign();const e=this.geoService.getCurrentDate();this.geoService.exportData(this.searchObj,"Geography-"+e)}ngOnDestroy(){this.subscription.unsubscribe()}changeCampaign(e){this.cs.setCampaignId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.campaign_id=e.id,this.router.navigate(["geography"],{queryParams:{campaign_id:e.id}}),this.sf.form.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](i.c),h["\u0275\u0275directiveInject"](i.a),h["\u0275\u0275directiveInject"](f.a),h["\u0275\u0275directiveInject"](y.b),h["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["app-geography"]],viewQuery:function(e,t){var n;1&e&&(h["\u0275\u0275viewQuery"](E,!0),h["\u0275\u0275viewQuery"](w,!0)),2&e&&(h["\u0275\u0275queryRefresh"](n=h["\u0275\u0275loadQuery"]())&&(t.sf=n.first),h["\u0275\u0275queryRefresh"](n=h["\u0275\u0275loadQuery"]())&&(t.isCollapsed=n.first))},decls:21,vars:11,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCampaign"],["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10"],[1,"card-title","module-title"],[3,"showAdd","addRedirect","showExport","uploadFields","uploadFile","uploaded","download"],["title","Are you sure ?","text","This cannot be undone","icon","question",3,"showCancelButton","focusCancel"],["deleteSwal",""],[1,"card-body"],[1,"card-block"],["style","float:right;",4,"ngIf"],["name","searchForm",1,"table-responsive"],["searchForm","ngForm"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["loading",""],[2,"float","right"],[1,"tot-record"],[1,"table","table-bordered","table-condensed","table-striped"],[1,"text-center"],["type","checkbox","id","checkall",3,"change"],["for","checkall"],[4,"ngFor","ngForOf"],["type","text","name","nzone","ngModel","","class","form-control","placeholder","NZ","autocomplete","off",4,"ngIf"],["type","text","name","zone","ngModel","","class","form-control","placeholder","Zone","autocomplete","off",4,"ngIf"],["type","text","name","region","ngModel","","class","form-control","placeholder","Region","autocomplete","off",4,"ngIf"],["type","text","name","area","ngModel","","class","form-control","placeholder","Area","autocomplete","off",4,"ngIf"],["type","text","name","city","ngModel","","class","form-control","placeholder","City","autocomplete","off",4,"ngIf"],["type","text","name","nzone","ngModel","","placeholder","NZ","autocomplete","off",1,"form-control"],["type","text","name","zone","ngModel","","placeholder","Zone","autocomplete","off",1,"form-control"],["type","text","name","region","ngModel","","placeholder","Region","autocomplete","off",1,"form-control"],["type","text","name","area","ngModel","","placeholder","Area","autocomplete","off",1,"form-control"],["type","text","name","city","ngModel","","placeholder","City","autocomplete","off",1,"form-control"],["type","checkbox","data-md-icheck","","name","deletecheck",3,"checked","id","value","click"],[3,"for"],["class","ng2-smart-action ng2-smart-action-edit-edit",3,"routerLink","queryParams",4,"ngIf"],["class","ng2-smart-action ng2-smart-action-delete-delete",3,"swal","confirm",4,"ngIf"],[1,"ng2-smart-action","ng2-smart-action-edit-edit",3,"routerLink","queryParams"],[1,"ft-edit-2","info","font-medium-1","mr-2"],[1,"ng2-smart-action","ng2-smart-action-delete-delete",3,"swal","confirm"],[1,"ft-x","danger","font-medium-1","mr-2"],[1,"btn","btn-danger",2,"color","#fff !important",3,"swal","confirm"],[1,"btn","btn-danger",2,"color","#fff !important",3,"click"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275elementStart"](1,"app-topbar",1),h["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](2,"section",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"div",4),h["\u0275\u0275elementStart"](5,"div",5),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"h4",7),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"app-actionbtns",8),h["\u0275\u0275listener"]("uploadFile",(function(e){return t.upload(e)}))("uploaded",(function(e){return t.fileChange(e)}))("download",(function(){return t.export()})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](10,"swal",9,10),h["\u0275\u0275elementStart"](12,"div",11),h["\u0275\u0275elementStart"](13,"div",12),h["\u0275\u0275template"](14,I,3,1,"div",13),h["\u0275\u0275elementStart"](15,"form",14,15),h["\u0275\u0275template"](17,Q,26,6,"ng-container",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](18,H,2,5,"div",17),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](19,X,1,0,"ng-template",null,18,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275reference"](20);h["\u0275\u0275advance"](8),h["\u0275\u0275textInterpolate"](t.title),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("showAdd",t.showAdd)("addRedirect","/geography/add")("showExport",t.showExport)("uploadFields",t.uploadFields),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("showCancelButton",!0)("focusCancel",!0),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",t.records),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngIf",t.geographyData)("ngIfElse",e),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.records)}},directives:[x.a,b.a,S.a,a.n,r.D,r.r,r.s,a.m,r.b,r.q,r.t,i.f,S.b,C.l],styles:['.geo_checkboxes[_ngcontent-%COMP%]:before{content:"";-webkit-appearance:none;background-color:transparent;border:2px solid #0079bf;box-shadow:0 1px 2px rgba(0,0,0,.05),inset 0 -15px 10px -12px rgba(0,0,0,.05);padding:10px;display:inline-block;position:relative;vertical-align:middle;cursor:pointer;margin-right:5px}.geo_checkboxes[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;top:2px;left:9px;width:6px;height:14px;border:solid #0079bf;border-width:0 2px 2px 0;transform:rotate(45deg)}.acc-header-bg[_ngcontent-%COMP%]{padding:20px;display:block;border-bottom:1px solid #b7b3b3}#checkbox-1[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-top:10px!important}[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){position:absolute;left:-9999px}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;padding-left:2.85em;cursor:pointer;padding-top:.2em}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:2em;height:2em;border:2px solid #673ab7;background:#fff;border-radius:4px;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after, [type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{content:"\\2713\\0020";position:absolute;top:.15em;left:.18em;font-size:2em;line-height:.8;color:#673ab7;transition:all .2s;font-family:Lucida Sans Unicode,Arial Unicode MS,Arial}[type=checkbox][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{opacity:0;transform:scale(0)}[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1;transform:scale(1)}[type=checkbox][_ngcontent-%COMP%]:disabled:checked + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:disabled:not(:checked) + label[_ngcontent-%COMP%]:before{box-shadow:none;border-color:#bbb;background-color:#ddd}[type=checkbox][_ngcontent-%COMP%]:disabled:checked + label[_ngcontent-%COMP%]:after{color:#999}[type=checkbox][_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{color:#aaa}[type=checkbox][_ngcontent-%COMP%]:checked:focus + label[_ngcontent-%COMP%]:before, [type=checkbox][_ngcontent-%COMP%]:not(:checked):focus + label[_ngcontent-%COMP%]:before{border:2px solid #673ab7}label[_ngcontent-%COMP%]:hover:before{border:2px solid #673ab7!important}']}),e})();var W=n("itXk"),Y=n("JX91"),ee=n("LRne");function te(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Type is required! "),h["\u0275\u0275elementEnd"]())}function ne(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,te,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("type").errors.required)}}function ae(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Selected Parent Id is Invalid! "),h["\u0275\u0275elementEnd"]())}function re(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,ae,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("type").errors.invalid)}}function oe(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",e.error_messages.parent_id," ")}}function ie(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275elementStart"](1,"div",16),h["\u0275\u0275elementStart"](2,"div",17),h["\u0275\u0275elementStart"](3,"label",29),h["\u0275\u0275text"](4," Type "),h["\u0275\u0275elementStart"](5,"span",19),h["\u0275\u0275text"](6,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"div",20),h["\u0275\u0275elementStart"](8,"ng-multiselect-dropdown",30),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("type"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](9,ne,2,1,"div",22),h["\u0275\u0275template"](10,re,2,1,"div",22),h["\u0275\u0275template"](11,oe,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("disabled",n.disabled)("placeholder","Select Type")("settings",n.dropdownSettings)("data",e),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.geography.get("type").errors&&n.submitted),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.geography.get("type").errors&&n.submitted),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.error_messages.parent_id)}}function le(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," National Zone is required! "),h["\u0275\u0275elementEnd"]())}function se(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,le,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("national_zone").errors.required)}}function ce(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"label",32),h["\u0275\u0275text"](3," National Zone "),h["\u0275\u0275elementStart"](4,"span",19),h["\u0275\u0275text"](5,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",20),h["\u0275\u0275elementStart"](7,"ng-multiselect-dropdown",33),h["\u0275\u0275listener"]("onSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).updateValue(t,"National Zone")}))("onDeSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).removeValue(t,"National Zone")}))("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("national_zone"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,se,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("placeholder","Select National Zone")("settings",e.dropdownSettings)("data",e.nationalZonesData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("national_zone").errors&&e.submitted)}}function de(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Zone is required! "),h["\u0275\u0275elementEnd"]())}function pe(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,de,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("zone").errors.required)}}function me(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"label",34),h["\u0275\u0275text"](3," Zone "),h["\u0275\u0275elementStart"](4,"span",19),h["\u0275\u0275text"](5,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",20),h["\u0275\u0275elementStart"](7,"ng-multiselect-dropdown",35),h["\u0275\u0275listener"]("onSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).updateValue(t,"Zone")}))("onDeSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).removeValue(t,"Zone")}))("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("zone"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,pe,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("placeholder","Select Zone")("settings",e.dropdownSettings)("data",e.zonesData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("zone").errors&&e.submitted)}}function ge(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Region is required! "),h["\u0275\u0275elementEnd"]())}function ue(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,ge,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("region").errors.required)}}function he(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"label",36),h["\u0275\u0275text"](3," Region "),h["\u0275\u0275elementStart"](4,"span",19),h["\u0275\u0275text"](5,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",20),h["\u0275\u0275elementStart"](7,"ng-multiselect-dropdown",37),h["\u0275\u0275listener"]("onSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).updateValue(t,"Region")}))("onDeSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).removeValue(t,"Region")}))("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("region"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,ue,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("placeholder","Select Region")("settings",e.dropdownSettings)("data",e.regionsData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("region").errors&&e.submitted)}}function fe(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Area is required! "),h["\u0275\u0275elementEnd"]())}function ye(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,fe,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("area").errors.required)}}function ve(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"label",38),h["\u0275\u0275text"](3," Area "),h["\u0275\u0275elementStart"](4,"span",19),h["\u0275\u0275text"](5,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",20),h["\u0275\u0275elementStart"](7,"ng-multiselect-dropdown",39),h["\u0275\u0275listener"]("onSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).updateValue(t,"Area")}))("onDeSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).removeValue(t,"Area")}))("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("area"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,ye,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("placeholder","Select Area")("settings",e.dropdownSettings)("data",e.areaData)("settings",e.dropdownSettings),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("area").errors&&e.submitted)}}function xe(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," City is required! "),h["\u0275\u0275elementEnd"]())}function be(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,xe,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](3);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("city").errors.required)}}function Se(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"div",16),h["\u0275\u0275elementStart"](1,"div",17),h["\u0275\u0275elementStart"](2,"label",40),h["\u0275\u0275text"](3," City "),h["\u0275\u0275elementStart"](4,"span",19),h["\u0275\u0275text"](5,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",20),h["\u0275\u0275elementStart"](7,"ng-multiselect-dropdown",41),h["\u0275\u0275listener"]("onSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).updateValue(t,"City")}))("onDeSelect",(function(t){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"](2).removeValue(t,"City")}))("click",(function(){h["\u0275\u0275restoreView"](e);const t=h["\u0275\u0275nextContext"](2);return t.elementTouched(t.geography.get("city"))})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,be,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("placeholder","Select City")("settings",e.dropdownSettings)("data",e.cityData)("settings",e.dropdownSettings),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("city").errors&&e.submitted)}}function Ce(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Name is required! "),h["\u0275\u0275elementEnd"]())}function Ee(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Name must be atleast 3 characters! "),h["\u0275\u0275elementEnd"]())}function we(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Name can have maximum 50 characters! "),h["\u0275\u0275elementEnd"]())}function Ie(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div"),h["\u0275\u0275text"](1," Name must be letters, numbers or dashes! "),h["\u0275\u0275elementEnd"]())}function _e(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275template"](1,Ce,2,0,"div",14),h["\u0275\u0275template"](2,Ee,2,0,"div",14),h["\u0275\u0275template"](3,we,2,0,"div",14),h["\u0275\u0275template"](4,Ie,2,0,"div",14),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("name").errors.required),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("name").errors.minlength),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("name").errors.maxlength),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.geography.get("name").errors.pattern)}}function ke(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",31),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" ",e.error_messages.name," ")}}n("qnbw");const Fe=function(){return["/geography"]},De=function(e){return{campaign_id:e}};function Ve(e,t){if(1&e){const e=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementContainerStart"](0),h["\u0275\u0275elementStart"](1,"form",10),h["\u0275\u0275listener"]("submit",(function(){return h["\u0275\u0275restoreView"](e),h["\u0275\u0275nextContext"]().onSubmit()})),h["\u0275\u0275elementStart"](2,"div",11),h["\u0275\u0275elementStart"](3,"h4",12),h["\u0275\u0275element"](4,"i",13),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](6,ie,12,7,"div",14),h["\u0275\u0275template"](7,ce,9,4,"div",15),h["\u0275\u0275template"](8,me,9,4,"div",15),h["\u0275\u0275template"](9,he,9,4,"div",15),h["\u0275\u0275template"](10,ve,9,5,"div",15),h["\u0275\u0275template"](11,Se,9,5,"div",15),h["\u0275\u0275elementStart"](12,"div",16),h["\u0275\u0275elementStart"](13,"div",17),h["\u0275\u0275elementStart"](14,"label",18),h["\u0275\u0275text"](15," Geography Name "),h["\u0275\u0275elementStart"](16,"span",19),h["\u0275\u0275text"](17,"*"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"div",20),h["\u0275\u0275element"](19,"input",21),h["\u0275\u0275template"](20,_e,5,4,"div",22),h["\u0275\u0275template"](21,ke,2,1,"div",22),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",23),h["\u0275\u0275element"](23,"div",24),h["\u0275\u0275elementStart"](24,"div",20),h["\u0275\u0275elementStart"](25,"a",25),h["\u0275\u0275element"](26,"i",26),h["\u0275\u0275text"](27," Cancel "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"button",27),h["\u0275\u0275element"](29,"i",28),h["\u0275\u0275text"](30," Save "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("formGroup",e.geographyForm),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",e.title," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.typesData),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.showField["National Zone"]),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.showField.Zone),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.showField.Region),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.showField.Area),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.showField.City),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("ngIf",e.geography.get("name").errors&&e.submitted),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",e.error_messages.name),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("routerLink",h["\u0275\u0275pureFunction0"](12,Fe))("queryParams",h["\u0275\u0275pureFunction1"](13,De,e.campaign_id))}}function Oe(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"div",42),h["\u0275\u0275elementStart"](1,"div",43),h["\u0275\u0275elementStart"](2,"p"),h["\u0275\u0275text"](3,"Loading Data..."),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]())}let Pe=(()=>{class e{constructor(e,t,n,a,r,o){this.fb=e,this.router=t,this.activeRoute=n,this.geoService=a,this.toasterService=r,this.cs=o,this.campaign_id="",this.geography_id="",this.submitted=!1,this.companyData=[],this.campaignData=[],this.typesData=[],this.nationalZonesData=[],this.zonesData=[],this.regionsData=[],this.areaData=[],this.cityData=[],this.errors=[],this.error_messages=[],this.showField={"National Zone":!1,Zone:!1,Region:!1,Area:!1,City:!1},this.fields=[{keyname:"national_zone",text:"National Zone"},{keyname:"zone",text:"Zone"},{keyname:"region",text:"Region"},{keyname:"area",text:"Area"},{keyname:"city",text:"City"}]}getCurrentCampaign(){return this.cs.getCampaignId()}ngOnInit(){this.campaign_id=this.getCurrentCampaign();const e=this.activeRoute.snapshot.data;this.title=e.title,this.urlKey=e.urlKey,this.disabled=!1,this.dropdownSettings=u.a.dropDownSettings(!0,!0),this.geographyForm=this.create_form(),this.typesData=this.geoService.getTypesFromCampaign(this.campaign_id),"add"===this.urlKey||this.activeRoute.params.pipe(Object(c.a)(e=>this.geoService.getAll({id:e.id}))).subscribe(e=>{e.data&&e.data[0]?(this.geography_id=e.data[0].id,this.geographyForm.patchValue(this.rewriteGeography(e.data[0]))):this.buildForm=!1}),Object(W.a)(this.geographyForm.controls.type.valueChanges.pipe(Object(Y.a)(this.geographyForm.controls.type.value),Object(c.a)(e=>(this.resetHeirarchyFor("All"),e||Object(ee.a)({name:""}))))).subscribe(e=>{this.geoService.getTypesFromCampaign(this.campaign_id).subscribe(t=>{this.typesData=t.data,this.requiredFields(e[0]),this.typesData.length&&this.initializeFields(this.typesData),this.buildForm=!0})})}rewriteGeography(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=["id","name"].indexOf(n)>=0?e[n]:[e[n]]);return t}resetHeirarchyFor(e){"All"===e&&(this.geographyForm.controls.national_zone.patchValue([]),this.nationalZonesData=[]),"National Zone"!==e&&"All"!==e||(this.geographyForm.controls.zone.patchValue([]),this.zonesData=[]),"National Zone"!==e&&"Zone"!==e&&"All"!==e||(this.geographyForm.controls.region.patchValue([]),this.regionsData=[]),"National Zone"!==e&&"Zone"!==e&&"Region"!==e&&"All"!==e||(this.geographyForm.controls.area.patchValue([]),this.areaData=[]),"National Zone"!==e&&"Zone"!==e&&"Region"!==e&&"Area"!==e&&"All"!==e||(this.geographyForm.controls.city.patchValue([]),this.cityData=[])}resetFieldsAndVAlidity(){for(const e in this.showField)if(this.showField.hasOwnProperty(e)){this.showField[e]=!1;const t=this.fields.find(t=>t.text===e);this.geographyForm.controls[t.keyname].setValidators(null),this.geographyForm.controls[t.keyname].updateValueAndValidity()}}requiredFields(e){if(e.name){const t=this.typesData.findIndex(t=>t.name===e.name);if(this.resetFieldsAndVAlidity(),t>-1)for(let e=0;e<t;e++){const t=this.typesData[e].name;this.showField[t]=!0;const n=this.fields.find(e=>e.text===t);this.geographyForm.controls[n.keyname].setValidators([r.B.required]),this.geographyForm.controls[n.keyname].updateValueAndValidity()}}}create_form(){return this.fb.group({type:[null,[r.B.required]],national_zone:[null,[r.B.required]],zone:[null,[r.B.required]],region:[null,[r.B.required]],area:[null,[r.B.required]],city:[null,[r.B.required]],name:[null,[r.B.required,r.B.minLength(3),r.B.maxLength(50),r.B.pattern("^([a-zA-Z0-9- ])+$")]]})}listing(e,t=null,n=null){return n?this.geoService.getGeography(e,t,n):this.geoService.getGeography(e,t)}loadingFieldData(e,t,n=0){"National Zone"===e.name&&(this.nationalZonesData=t.data),"Zone"===e.name&&(this.zonesData=t.data,1===n&&(this.areaData=[],this.geographyForm.get("area").setValue([]),this.geographyForm.get("zone").setValue([]),this.regionsData=[],this.geographyForm.get("region").setValue([]))),"Region"===e.name&&(this.regionsData=t.data,1===n&&(this.geographyForm.get("region").setValue([]),this.areaData=[],this.geographyForm.get("area").setValue([]))),"Area"===e.name&&(this.areaData=t.data,1===n&&this.geographyForm.get("area").setValue([])),"City"===e.name&&(this.cityData=t.data)}getParent(e){return"National Zone"===e?this.geographyForm.controls.national_zone.value:"Zone"===e?this.geographyForm.controls.zone.value:"Region"===e?this.geographyForm.controls.region.value:"Area"===e?this.geographyForm.controls.area.value:"City"===e?this.geographyForm.controls.city.value:null}initializeFields(e){const t=e.length;let n=null;for(let a=0;a<t;a++){if(a>0){const t=this.getParent(e[a-1].name);t.length&&t[0]&&(n=t[0].id)}this.listing(e[a].id,n,this.campaign_id).subscribe(t=>{this.loadingFieldData(e[a],t)})}}updateValue(e,t){const n=this.typesData.findIndex(e=>e.name===t);if(n>=0){const t=this.typesData[n+1];this.listing(t.id,e.id,this.campaign_id).subscribe(e=>{this.loadingFieldData(t,e,1)})}}removeValue(e,t){this.resetHeirarchyFor(t)}onSubmit(){if(this.submitted=!0,this.geographyForm.invalid)return;const e=this.geographyForm.value,t=new FormData;this.geoService.getCampaignDataById(this.campaign_id).subscribe(n=>{t.set("campaign_id",this.campaign_id),t.set("company_id",n.data[0].company.id),t.set("type",e.type[0].id),t.set("name",e.name);const a=this.typesData.findIndex(t=>t.name===e.type[0].name);if(a>0){const e=this.getParent(this.typesData[a-1].name);t.set("parent_id",e[0].id)}"add"===this.urlKey?this.save(t):this.update(t)})}save(e){this.geoService.save(e).subscribe(e=>{this.router.navigate(["/geography"],{queryParams:{campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Added Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.geographyForm)})}update(e){this.geoService.update(e,this.geography_id).subscribe(e=>{this.router.navigate(["/geography"],{queryParams:{campaign_id:this.campaign_id}}).then(()=>{this.toasterService.success("Records Updated Successfully!","Success!",{positionClass:"toast-top-right"})})},e=>{this.handleError(e,this.geographyForm)})}handleError(e,t){400===e.status?this.error_messages=e.error.error:alert("Problems while saving data")}get geography(){return this.geographyForm}elementTouched(e){e.markAsTouched()}changeCampaign(e){this.cs.setCampaignId(e.id)}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](r.e),h["\u0275\u0275directiveInject"](i.c),h["\u0275\u0275directiveInject"](i.a),h["\u0275\u0275directiveInject"](f.a),h["\u0275\u0275directiveInject"](y.b),h["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form"]],decls:11,vars:2,consts:[[2,"min-height","calc(100vh - 75px)"],[3,"changeCampaign"],["id","basic-form-layouts"],[1,"row","match-height"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"px-3"],[4,"ngIf","ngIfElse"],["norecord",""],[1,"form","form-horizontal","striped-rows",3,"formGroup","submit"],[1,"form-body"],[1,"form-section"],[1,"ft-user"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row"],["for","name",1,"col-md-3","pt-1"],[2,"color","red"],[1,"col-md-9"],["type","text","formControlName","name","id","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-actions","center"],[1,"col-md-3"],[1,"btn","btn-raised","btn-orange","mr-1",3,"routerLink","queryParams"],[1,"ft-x"],["type","submit",1,"btn","btn-raised","btn-purple"],[1,"fa","fa-check-square-o"],["for","type",1,"col-md-3","pt-1"],["formControlName","type",3,"disabled","placeholder","settings","data","click"],[1,"invalid-feedback"],["for","national_zone",1,"col-md-3","pt-1"],["formControlName","national_zone",3,"placeholder","settings","data","onSelect","onDeSelect","click"],["for","zone",1,"col-md-3","pt-1"],["formControlName","zone",3,"placeholder","settings","data","onSelect","onDeSelect","click"],["for","region",1,"col-md-3","pt-1"],["formControlName","region",3,"placeholder","settings","data","onSelect","onDeSelect","click"],["for","area",1,"col-md-3","pt-1"],["formControlName","area",3,"placeholder","settings","data","onSelect","onDeSelect","click"],["for","city",1,"col-md-3","pt-1"],["formControlName","city",3,"placeholder","settings","data","onSelect","onDeSelect","click"],[1,"card","col-12"],[1,"card-body","mt-3"]],template:function(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275elementStart"](1,"app-topbar",1),h["\u0275\u0275listener"]("changeCampaign",(function(e){return t.changeCampaign(e)})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](2,"section",2),h["\u0275\u0275elementStart"](3,"div",3),h["\u0275\u0275elementStart"](4,"div",4),h["\u0275\u0275elementStart"](5,"div",5),h["\u0275\u0275elementStart"](6,"div",6),h["\u0275\u0275elementStart"](7,"div",7),h["\u0275\u0275template"](8,Ve,31,15,"ng-container",8),h["\u0275\u0275template"](9,Oe,4,0,"ng-template",null,9,h["\u0275\u0275templateRefExtractor"]),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){const e=h["\u0275\u0275reference"](10);h["\u0275\u0275advance"](8),h["\u0275\u0275property"]("ngIf",t.buildForm)("ngIfElse",e)}},directives:[x.a,a.n,r.D,r.r,r.j,r.b,r.q,r.h,i.f,o.a],styles:[""]}),e})();const Me=[{path:"",component:J,data:{title:"Geography",permission:"list-geography"}},{path:"add",component:Pe,data:{title:"Add Geography",urlKey:"add",permission:"create-geography"}},{path:"edit/:id",component:Pe,data:{title:"Edit Geography",urlKey:"edit",permission:"modify-geography"}}];let Ae=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(Me)],i.g]}),e})();var je=n("PCNd");let qe=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[f.a],imports:[[a.c,Ae,r.l,r.y,o.b.forRoot(),je.a,S.c.forRoot()]]}),e})()}}]);