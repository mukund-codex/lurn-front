function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"6Br6":function(e,t,n){"use strict";var a=n("HDdC"),r=n("VRyK");a.a.merge=r.a},Czxw:function(e,t,n){"use strict";n.r(t),n.d(t,"ActivityLogModule",(function(){return F}));var a=n("ofXK"),r=n("1kSV"),i=n("Egam"),o=n("R9Cn"),l=n("3Pt+"),c=n("PCNd"),d=n("tyNb"),s=n("uu/O"),m=n("quSY"),p=n("HDdC"),u=(n("6Br6"),n("lJxs")),g=n("bOdf"),f=n("Kj3r"),h=n("/uUt"),v=n("eIep"),S=n("fXoL"),y=n("hHWK"),C=n("KY19"),b=["searchForm"];function x(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275elementStart"](1,"td"),S["\u0275\u0275text"](2,"No Records Found!"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e&&(S["\u0275\u0275advance"](1),S["\u0275\u0275attribute"]("colSpan",3))}function E(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"tr"),S["\u0275\u0275elementStart"](1,"th",18),S["\u0275\u0275text"](2),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](3,"td"),S["\u0275\u0275text"](4),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](5,"td"),S["\u0275\u0275text"](6),S["\u0275\u0275pipe"](7,"json"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](8,"td"),S["\u0275\u0275text"](9),S["\u0275\u0275pipe"](10,"json"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](11,"td"),S["\u0275\u0275text"](12),S["\u0275\u0275pipe"](13,"json"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](14,"td"),S["\u0275\u0275text"](15),S["\u0275\u0275pipe"](16,"date"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,r=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate1"](" ",(r.records.meta.pagination.current_page-1)*r.records.meta.pagination.per_page+a+1," "),S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](n.log_name),S["\u0275\u0275advance"](2),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](7,6,n.causer)),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](10,8,n.subject)),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](13,10,n.properties)),S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind2"](16,12,n.date,"medium"))}}function _(e,t){if(1&e){var n=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"div"),S["\u0275\u0275elementStart"](1,"ngb-pagination",19),S["\u0275\u0275listener"]("pageChange",(function(e){return S["\u0275\u0275restoreView"](n),S["\u0275\u0275nextContext"](2).pageChange(e)}))("pageChange",(function(e){return S["\u0275\u0275restoreView"](n),S["\u0275\u0275nextContext"](2).records.meta.pagination.current_page=e})),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()}if(2&e){var a=S["\u0275\u0275nextContext"](2);S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("maxSize",3)("rotate",!0)("collectionSize",a.records.meta.pagination.total)("pageSize",a.records.meta.pagination.per_page)("page",a.records.meta.pagination.current_page)}}function w(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"div",12),S["\u0275\u0275elementStart"](1,"div",13),S["\u0275\u0275elementStart"](2,"b",14),S["\u0275\u0275text"](3),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](4,"table",15),S["\u0275\u0275elementStart"](5,"thead"),S["\u0275\u0275elementStart"](6,"tr"),S["\u0275\u0275elementStart"](7,"th"),S["\u0275\u0275text"](8,"Sr. No"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](9,"th"),S["\u0275\u0275text"](10,"Log Name"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](11,"th"),S["\u0275\u0275text"](12,"Causer"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](13,"th"),S["\u0275\u0275text"](14,"Subject"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](15,"th"),S["\u0275\u0275text"](16,"Properties"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](17,"th"),S["\u0275\u0275text"](18,"Date"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](19,"tbody"),S["\u0275\u0275elementContainerStart"](20),S["\u0275\u0275template"](21,x,3,1,"tr",16),S["\u0275\u0275template"](22,E,17,15,"tr",17),S["\u0275\u0275elementContainerEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275template"](23,_,2,5,"div",16),S["\u0275\u0275elementEnd"]()),2&e){var n=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](3),S["\u0275\u0275textInterpolate1"]("Total Records : ",null==n.records.meta||null==n.records.meta.pagination?null:n.records.meta.pagination.total,""),S["\u0275\u0275advance"](18),S["\u0275\u0275property"]("ngIf",!n.records.data.length),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("ngForOf",n.records.data),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("ngIf",n.records)}}function j(e,t){1&e&&S["\u0275\u0275text"](0,"Loading Language Data")}var k,I,O,D=[{path:"",component:(k=function(){function e(t,n,a,r){_classCallCheck(this,e),this.router=t,this.activeRoute=n,this.campaignService=a,this.reportsService=r,this.selectedCampaign=[],this.searchObj={},this.parameters={},this.subscription=new m.a}return _createClass(e,[{key:"getCurrentCampaign",value:function(){return this.campaignService.getCampaignId()}},{key:"ngOnInit",value:function(){this.title=this.activeRoute.snapshot.data.title,this.campaign_id=this.getCurrentCampaign(),this.campaign_id&&(this.parameters.campaign_id=this.campaign_id)}},{key:"ngAfterViewInit",value:function(){this.loadReportData()}},{key:"loadReportData",value:function(){var e=this;this.subscription=p.a.merge(this.activeRoute.queryParams.pipe(Object(u.a)((function(t){return e.parameters=s.a.merge({},e.parameters,t),e.parameters})),Object(g.a)((function(t){return e.loadData(t)}))),this.search()).subscribe((function(t){e.records=t}))}},{key:"loadData",value:function(e){return this.campaign_id&&(e.campaign_id=this.campaign_id),this.reportsService.getActivityLog(e)}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.sf.valueChanges.pipe(Object(f.a)(400),Object(h.a)(),Object(u.a)((function(n){return e.searchObj=s.a.removeNullKeys(n),e.parameters=s.a.merge({},e.parameters,e.searchObj,t),e.parameters})),Object(v.a)((function(t){return e.loadData(t)})))}},{key:"pageChange",value:function(e){this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{page:e,campaign_id:this.campaign_id}})}},{key:"changeCampaign",value:function(e){this.campaignService.setCampaignId(e.id),this.campaign_id=this.getCurrentCampaign(),this.parameters.campaign_id=this.campaign_id,this.sf.form.updateValueAndValidity()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}(),k.\u0275fac=function(e){return new(e||k)(S["\u0275\u0275directiveInject"](d.c),S["\u0275\u0275directiveInject"](d.a),S["\u0275\u0275directiveInject"](y.a),S["\u0275\u0275directiveInject"](C.a))},k.\u0275cmp=S["\u0275\u0275defineComponent"]({type:k,selectors:[["app-activity-log"]],viewQuery:function(e,t){var n;1&e&&S["\u0275\u0275viewQuery"](b,!0),2&e&&S["\u0275\u0275queryRefresh"](n=S["\u0275\u0275loadQuery"]())&&(t.sf=n.first)},decls:14,vars:2,consts:[["id","simple-table"],[1,"row"],[1,"col-sm-12"],[1,"card","card-border-shadow-0"],[1,"card-header","m-top-bottom-10","px-3"],[1,"card-title"],[1,"card-body"],[1,"px-3"],["name","searchForm","ngForm","",1,"table-responsive"],["searchForm","ngForm"],["class","card-block",4,"ngIf"],["loading",""],[1,"card-block"],[2,"float","right"],[1,"tot-record"],[1,"table","table-bordered","table-condensed"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[3,"maxSize","rotate","collectionSize","pageSize","page","pageChange"]],template:function(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"section",0),S["\u0275\u0275elementStart"](1,"div",1),S["\u0275\u0275elementStart"](2,"div",2),S["\u0275\u0275elementStart"](3,"div",3),S["\u0275\u0275elementStart"](4,"div",4),S["\u0275\u0275elementStart"](5,"h4",5),S["\u0275\u0275text"](6),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](7,"div",6),S["\u0275\u0275elementStart"](8,"div",7),S["\u0275\u0275elementStart"](9,"form",8,9),S["\u0275\u0275template"](11,w,24,4,"div",10),S["\u0275\u0275elementEnd"](),S["\u0275\u0275template"](12,j,1,0,"ng-template",null,11,S["\u0275\u0275templateRefExtractor"]),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e&&(S["\u0275\u0275advance"](6),S["\u0275\u0275textInterpolate"](t.title),S["\u0275\u0275advance"](5),S["\u0275\u0275property"]("ngIf",t.records))},directives:[l.D,l.r,l.s,a.n,a.m,r.l],pipes:[a.h,a.e],styles:[""]}),k),data:{title:"Activity Log",permission:"activity-log"}}],R=((O=function e(){_classCallCheck(this,e)}).\u0275mod=S["\u0275\u0275defineNgModule"]({type:O}),O.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(e){return new(e||O)},imports:[[d.g.forChild(D)],d.g]}),O),F=((I=function e(){_classCallCheck(this,e)}).\u0275mod=S["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},providers:[C.a],imports:[[a.c,r.j,l.l,R,l.y,o.b,i.b.forRoot(),c.a,r.i]]}),I)},"uu/O":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getValueCampaign",value:function(){return e.campaign_id}}],[{key:"removeNullKeys",value:function(e){return Object.keys(e).reduce((function(t,n){var a=t;return void 0!==e[n]&&(a[n]=e[n]),a}),{})}},{key:"merge",value:function(){for(var e={},t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){e=Object.assign(e,t)})),e}},{key:"setValueCampaign",value:function(t){e.campaign_id=t}},{key:"dropDownSettings",value:function(e,t,n,a){return{singleSelection:e||!1,idField:n||"id",textField:a||"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:t||!0}}}]),e}()}}]);